<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory IRStepThms</title>
</head>


<body>
<div class="head">
<h1>Theory IRStepThms</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Properties of Control-flow Semantics›</span></span>

<span class="keyword1"><span class="command">theory</span></span> IRStepThms
  <span class="keyword2"><span class="keyword">imports</span></span>
    <a href="IRStepObj.html">IRStepObj</a>
    <a href="IRTreeEvalThms.html">IRTreeEvalThms</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹
We prove that within the same graph, a configuration triple will always
transition to the same subsequent configuration. Therefore, our step semantics
is deterministic.
›</span></span>

<span class="comment1">(*
definition stepping_nodes :: "(IRNode ⇒ bool) set" where
  "stepping_nodes = {
    is_sequential_node,
    is_IfNode,
    is_AbstractEndNode,
    is_NewInstanceNode,
    is_LoadFieldNode,
    is_SignedDivNode,
    is_SignedRemNode,
    is_LoadFieldNode,
    is_StoreFieldNode
  }"

inductive_cases StepE[elim!]:✐‹tag invisible›
  "g, p ⊢ (nid,m,h) → next"

lemma stepping_nodes_distinct:
  assumes "sel ∈ stepping_nodes ∧ sel node"
  shows "∀ oth ∈ stepping_nodes - {sel} . ¬(oth node)"
  using assms unfolding stepping_nodes_def sorry


proof (induction arbitrary: m h rule: step.induct)
  case (SequentialNode nid nid')
  have "is_sequential_node ∈ stepping_nodes" unfolding stepping_nodes_def by simp
  then have distinct: "∀ oth ∈ stepping_nodes - {is_sequential_node} . ¬(oth (kind g nid))"
    using stepping_nodes_distinct SequentialNode(1) by auto
  obtain next' where "g, p ⊢ (nid, m, h) → next'"
    using SequentialNode.hyps(1) step.SequentialNode
    by blast
  then have "next' = (nid', m, h)"
    apply (induct rule: step.induct) using SequentialNode sorry
  show ?case apply (rule allI) (*using step.cases*) apply (induction rule: step.induct)
    using distinct unfolding stepping_nodes_def
    using is_IfNode_def is_NewInstanceNode_def is_LoadFieldNode_def is_SignedDivNode_def is_SignedRemNode_def
    is_LoadFieldNode_def is_StoreFieldNode_def 
    apply (rule stepping_nodes_distinct [where sel = is_sequential_node, where node = "kind g nid"])
  then show ?case apply (rule stepping_nodes_distinct [where sel = is_sequential_node, where node = "kind g nid"])?
next
  case (IfNode nid cond tb fb condE m val nid' h)
  then show ?case sorry
next
  case (EndNodes nid merge i phis inps inpsE m vs m' h)
  then show ?case sorry
next
  case (NewInstanceNode nid f obj nid' h' ref h m' m)
  then show ?case sorry
next
  case (LoadFieldNode nid f obj nid' objE m ref h v m')
  then show ?case sorry
next
  case (SignedDivNode nid x y zero sb nxt xe ye m v1 v2 v m' h)
  then show ?case sorry
next
  case (SignedRemNode nid x y zero sb nxt xe ye m v1 v2 v m' h)
  then show ?case sorry
next
  case (StaticLoadFieldNode nid f nid' h v m' m)
  then show ?case sorry
next
  case (StoreFieldNode nid f newval uu obj nid' newvalE objE m val ref h' h m')
  then show ?case sorry
next
  case (StaticStoreFieldNode nid f newval uv nid' newvalE m val h' h m')
  then show ?case sorry
qed
*)</span>

<span class="keyword1"><span class="command">theorem</span></span> stepDet<span class="main">:</span>
   <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">g</span><span class="main">,</span> <span class="free">p</span> <span class="main">⊢</span> <span class="main">(</span><span class="free">nid</span><span class="main">,</span><span class="free">m</span><span class="main">,</span><span class="free">h</span><span class="main">)</span> <span class="main">→</span> <span class="free">next</span><span class="main">)</span> <span class="main">⟹</span>
   <span class="main">(</span><span class="main">∀</span> <span class="bound">next'</span><span class="main">.</span> <span class="main">(</span><span class="main">(</span><span class="free">g</span><span class="main">,</span> <span class="free">p</span> <span class="main">⊢</span> <span class="main">(</span><span class="free">nid</span><span class="main">,</span><span class="free">m</span><span class="main">,</span><span class="free">h</span><span class="main">)</span> <span class="main">→</span> <span class="bound">next'</span><span class="main">)</span> <span class="main">⟶</span> <span class="free">next</span> <span class="main">=</span> <span class="bound">next'</span><span class="main">)</span><span class="main">)</span>"</span></span>



<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induction</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> <span class="quoted">"step.induct"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>SequentialNode <span class="skolem">nid</span> <span class="quoted">"<span class="skolem">next</span>"</span> <span class="skolem">m</span> <span class="skolem">h</span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notif<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_IfNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> SequentialNode.hyps<span class="main">(</span>1<span class="main">)</span> is_sequential_node.simps 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> is_IfNode_def<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notend<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_AbstractEndNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> SequentialNode.hyps<span class="main">(</span>1<span class="main">)</span> is_sequential_node.simps 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> is_AbstractEndNode.simps is_EndNode.elims<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> is_LoopEndNode_def<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notnew<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_NewInstanceNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> SequentialNode.hyps<span class="main">(</span>1<span class="main">)</span> is_sequential_node.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> is_NewInstanceNode_def<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notload<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_LoadFieldNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> SequentialNode.hyps<span class="main">(</span>1<span class="main">)</span> is_sequential_node.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> is_LoadFieldNode_def<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notstore<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_StoreFieldNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> SequentialNode.hyps<span class="main">(</span>1<span class="main">)</span> is_sequential_node.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> is_StoreFieldNode_def<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notdivrem<span class="main">:</span>  <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_IntegerDivRemNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> SequentialNode.hyps<span class="main">(</span>1<span class="main">)</span> is_sequential_node.simps is_SignedDivNode_def is_SignedRemNode_def
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> is_IntegerDivRemNode.simps<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> notif notend notnew notload notstore notdivrem
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> SequentialNode step.cases
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>z3<span class="main"><span class="main">)</span></span> IRNode.disc<span class="main"><span class="main">(</span></span>1028<span class="main"><span class="main">)</span></span> IRNode.disc<span class="main"><span class="main">(</span></span>2270<span class="main"><span class="main">)</span></span> IRNode.discI<span class="main"><span class="main">(</span></span>31<span class="main"><span class="main">)</span></span> Pair_inject is_sequential_node.simps<span class="main"><span class="main">(</span></span>18<span class="main"><span class="main">)</span></span> is_sequential_node.simps<span class="main"><span class="main">(</span></span>43<span class="main"><span class="main">)</span></span> is_sequential_node.simps<span class="main"><span class="main">(</span></span>44<span class="main"><span class="main">)</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>IfNode <span class="skolem">nid</span> <span class="skolem">cond</span> <span class="skolem">tb</span> <span class="skolem">fb</span> <span class="skolem">m</span> <span class="skolem">val</span> <span class="quoted">"<span class="skolem">next</span>"</span> <span class="skolem">h</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> notseq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_sequential_node <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_sequential_node.simps is_AbstractMergeNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> IfNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notend<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_AbstractEndNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_AbstractEndNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> IfNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notdivrem<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_IntegerDivRemNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> is_AbstractEndNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> IfNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> notseq notend notdivrem <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> IfNode repDet evalDet IRNode.distinct IRNode.inject<span class="main">(</span>11<span class="main">)</span> Pair_inject step.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>z3<span class="main"><span class="main">)</span></span> IRNode.distinct IRNode.inject<span class="main"><span class="main">(</span></span>12<span class="main"><span class="main">)</span></span> Pair_inject step.simps<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>EndNodes <span class="skolem">nid</span> <span class="skolem">merge</span> <span class="skolem">i</span> <span class="skolem">phis</span> <span class="skolem">inputs</span> <span class="skolem">m</span> <span class="skolem">vs</span> <span class="skolem">m'</span> <span class="skolem">h</span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notseq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_sequential_node <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> EndNodes.hyps<span class="main">(</span>1<span class="main">)</span> is_AbstractEndNode.simps is_sequential_node.simps 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> is_EndNode.elims<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> is_LoopEndNode_def<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notif<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_IfNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> EndNodes.hyps<span class="main">(</span>1<span class="main">)</span> is_IfNode_def is_AbstractEndNode.elims
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> IRNode.distinct_disc<span class="main"><span class="main">(</span></span>1058<span class="main"><span class="main">)</span></span> is_EndNode.simps<span class="main"><span class="main">(</span></span>12<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notref<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_RefNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> EndNodes.hyps<span class="main">(</span>1<span class="main">)</span> is_sequential_node.simps
    <span class="keyword1"><span class="command">using</span></span> IRNode.disc<span class="main">(</span>1899<span class="main">)</span> IRNode.distinct<span class="main">(</span>1473<span class="main">)</span> is_AbstractEndNode.simps is_EndNode.elims<span class="main">(</span>2<span class="main">)</span> is_LoopEndNode_def is_RefNode_def
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
  <span class="keyword1"><span class="command">have</span></span> notnew<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_NewInstanceNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> EndNodes.hyps<span class="main">(</span>1<span class="main">)</span> is_AbstractEndNode.simps
    <span class="keyword1"><span class="command">using</span></span> IRNode.distinct_disc<span class="main">(</span>1442<span class="main">)</span> is_EndNode.simps<span class="main">(</span>29<span class="main">)</span> is_NewInstanceNode_def
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> IRNode.distinct_disc<span class="main"><span class="main">(</span></span>1901<span class="main"><span class="main">)</span></span> is_EndNode.simps<span class="main"><span class="main">(</span></span>32<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notload<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_LoadFieldNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> EndNodes.hyps<span class="main">(</span>1<span class="main">)</span> is_AbstractEndNode.simps
    <span class="keyword1"><span class="command">using</span></span> is_LoadFieldNode_def
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> IRNode.distinct_disc<span class="main"><span class="main">(</span></span>1706<span class="main"><span class="main">)</span></span> is_EndNode.simps<span class="main"><span class="main">(</span></span>21<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notstore<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_StoreFieldNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> EndNodes.hyps<span class="main">(</span>1<span class="main">)</span> is_AbstractEndNode.simps is_StoreFieldNode_def
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> IRNode.distinct_disc<span class="main"><span class="main">(</span></span>1926<span class="main"><span class="main">)</span></span> is_EndNode.simps<span class="main"><span class="main">(</span></span>44<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notdivrem<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_IntegerDivRemNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> EndNodes.hyps<span class="main">(</span>1<span class="main">)</span> is_AbstractEndNode.simps is_SignedDivNode_def is_SignedRemNode_def
    <span class="keyword1"><span class="command">using</span></span> IRNode.distinct_disc<span class="main">(</span>1498<span class="main">)</span> IRNode.distinct_disc<span class="main">(</span>1500<span class="main">)</span> is_IntegerDivRemNode.simps is_EndNode.simps<span class="main">(</span>36<span class="main">)</span> is_EndNode.simps<span class="main">(</span>37<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">from</span></span> notseq notif notref notnew notload notstore notdivrem
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> EndNodes repAllDet evalAllDet
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>z3<span class="main"><span class="main">)</span></span> is_IfNode_def is_LoadFieldNode_def is_NewInstanceNode_def is_RefNode_def is_StoreFieldNode_def is_SignedDivNode_def is_SignedRemNode_def  Pair_inject is_IntegerDivRemNode.elims<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> step.cases<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>NewInstanceNode <span class="skolem">nid</span> <span class="skolem">f</span> <span class="skolem">obj</span> <span class="skolem">nxt</span> <span class="skolem">h'</span> <span class="skolem">ref</span> <span class="skolem">h</span> <span class="skolem">m'</span> <span class="skolem">m</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> notseq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_sequential_node <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_sequential_node.simps is_AbstractMergeNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> NewInstanceNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notend<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_AbstractEndNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_AbstractMergeNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> NewInstanceNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notif<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_IfNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_AbstractMergeNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> NewInstanceNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notref<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_RefNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_AbstractMergeNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> NewInstanceNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notload<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_LoadFieldNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_AbstractMergeNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> NewInstanceNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notstore<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_StoreFieldNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_AbstractMergeNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> NewInstanceNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notdivrem<span class="main">:</span>  <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_IntegerDivRemNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_AbstractMergeNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> NewInstanceNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> notseq notend notif notref notload notstore notdivrem
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> NewInstanceNode step.cases
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>z3<span class="main"><span class="main">)</span></span> IRNode.disc<span class="main"><span class="main">(</span></span>1028<span class="main"><span class="main">)</span></span> IRNode.disc<span class="main"><span class="main">(</span></span>2270<span class="main"><span class="main">)</span></span> IRNode.discI<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>2311<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>2313<span class="main"><span class="main">)</span></span> IRNode.inject<span class="main"><span class="main">(</span></span>31<span class="main"><span class="main">)</span></span> Pair_inject<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>LoadFieldNode <span class="skolem">nid</span> <span class="skolem">f</span> <span class="skolem">obj</span> <span class="skolem">nxt</span> <span class="skolem">m</span> <span class="skolem">ref</span> <span class="skolem">h</span> <span class="skolem">v</span> <span class="skolem">m'</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> notseq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_sequential_node <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_sequential_node.simps is_AbstractMergeNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> LoadFieldNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notend<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_AbstractEndNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_AbstractEndNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> LoadFieldNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notdivrem<span class="main">:</span>  <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_IntegerDivRemNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_AbstractEndNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> LoadFieldNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> notseq notend notdivrem
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> LoadFieldNode step.cases repDet evalDet
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>z3<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1051<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1721<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1739<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1741<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1745<span class="main"><span class="main">)</span></span> IRNode.inject<span class="main"><span class="main">(</span></span>20<span class="main"><span class="main">)</span></span> Pair_inject Value.inject<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> option.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> option.inject<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>StaticLoadFieldNode <span class="skolem">nid</span> <span class="skolem">f</span> <span class="skolem">nxt</span> <span class="skolem">h</span> <span class="skolem">v</span> <span class="skolem">m'</span> <span class="skolem">m</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> notseq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_sequential_node <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_sequential_node.simps is_AbstractMergeNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> StaticLoadFieldNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notend<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_AbstractEndNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_AbstractEndNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> StaticLoadFieldNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notdivrem<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_IntegerDivRemNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> StaticLoadFieldNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> notseq notend notdivrem
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> StaticLoadFieldNode step.cases
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>z3<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1051<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1721<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1739<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1741<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1745<span class="main"><span class="main">)</span></span> IRNode.inject<span class="main"><span class="main">(</span></span>20<span class="main"><span class="main">)</span></span> Pair_inject option.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>StoreFieldNode <span class="skolem">nid</span> <span class="skolem">f</span> <span class="skolem">newval</span> <span class="skolem">uu</span> <span class="skolem">obj</span> <span class="skolem">nxt</span> <span class="skolem">m</span> <span class="skolem">val</span> <span class="skolem">ref</span> <span class="skolem">h'</span> <span class="skolem">h</span> <span class="skolem">m'</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> notseq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_sequential_node <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_sequential_node.simps is_AbstractMergeNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> StoreFieldNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notend<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_AbstractEndNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_AbstractEndNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> StoreFieldNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notdivrem<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_IntegerDivRemNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> StoreFieldNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> notseq notend notdivrem
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> StoreFieldNode step.cases repDet evalDet
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>z3<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1097<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1745<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>2317<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>2605<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>2627<span class="main"><span class="main">)</span></span> IRNode.inject<span class="main"><span class="main">(</span></span>43<span class="main"><span class="main">)</span></span> Pair_inject Value.inject<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> option.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> option.inject<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>StaticStoreFieldNode <span class="skolem">nid</span> <span class="skolem">f</span> <span class="skolem">newval</span> <span class="skolem">uv</span> <span class="skolem">nxt</span> <span class="skolem">m</span> <span class="skolem">val</span> <span class="skolem">h'</span> <span class="skolem">h</span> <span class="skolem">m'</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> notseq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_sequential_node <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_sequential_node.simps is_AbstractMergeNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> StaticStoreFieldNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notend<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_AbstractEndNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_AbstractEndNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> StaticStoreFieldNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notdivrem<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_IntegerDivRemNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> StaticStoreFieldNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> notseq notend notdivrem
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> StoreFieldNode step.cases repDet evalDet
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>z3<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1097<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1745<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>2317<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>2605<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>2627<span class="main"><span class="main">)</span></span> IRNode.inject<span class="main"><span class="main">(</span></span>43<span class="main"><span class="main">)</span></span> Pair_inject StaticStoreFieldNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> StaticStoreFieldNode.hyps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> StaticStoreFieldNode.hyps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> StaticStoreFieldNode.hyps<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> StaticStoreFieldNode.hyps<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> option.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>SignedDivNode <span class="skolem">nid</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="skolem">zero</span> <span class="skolem">sb</span> <span class="skolem">nxt</span> <span class="skolem">m</span> <span class="skolem">v1</span> <span class="skolem">v2</span> <span class="skolem">v</span> <span class="skolem">m'</span> <span class="skolem">h</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> notseq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_sequential_node <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_sequential_node.simps is_AbstractMergeNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> SignedDivNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notend<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_AbstractEndNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_AbstractEndNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> SignedDivNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> notseq notend
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> SignedDivNode step.cases repDet evalDet
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>z3<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1091<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1739<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>2311<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>2601<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>2605<span class="main"><span class="main">)</span></span> IRNode.inject<span class="main"><span class="main">(</span></span>40<span class="main"><span class="main">)</span></span> Pair_inject<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>SignedRemNode <span class="skolem">nid</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="skolem">zero</span> <span class="skolem">sb</span> <span class="skolem">nxt</span> <span class="skolem">m</span> <span class="skolem">v1</span> <span class="skolem">v2</span> <span class="skolem">v</span> <span class="skolem">m'</span> <span class="skolem">h</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> notseq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_sequential_node <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_sequential_node.simps is_AbstractMergeNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> SignedRemNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> notend<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="main">(</span>is_AbstractEndNode <span class="main">(</span>kind <span class="free">g</span> <span class="skolem">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_AbstractEndNode.simps
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> SignedRemNode.hyps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> notseq notend
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> SignedRemNode step.cases repDet evalDet
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>z3<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1093<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>1741<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>2313<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>2601<span class="main"><span class="main">)</span></span> IRNode.distinct<span class="main"><span class="main">(</span></span>2627<span class="main"><span class="main">)</span></span> IRNode.inject<span class="main"><span class="main">(</span></span>41<span class="main"><span class="main">)</span></span> Pair_inject<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">lemma</span></span> stepRefNode<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">⟦</span>kind <span class="free">g</span> <span class="free">nid</span> <span class="main">=</span> RefNode <span class="free">nid'</span><span class="main">⟧</span> <span class="main">⟹</span> <span class="free">g</span><span class="main">,</span> <span class="free">p</span> <span class="main">⊢</span> <span class="main">(</span><span class="free">nid</span><span class="main">,</span><span class="free">m</span><span class="main">,</span><span class="free">h</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="free">nid'</span><span class="main">,</span><span class="free">m</span><span class="main">,</span><span class="free">h</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> SequentialNode<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> IfNodeStepCases<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"kind <span class="free">g</span> <span class="free">nid</span> <span class="main">=</span> IfNode <span class="free">cond</span> <span class="free">tb</span> <span class="free">fb</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span> <span class="main">⊢</span> <span class="free">cond</span> <span class="main">≃</span> <span class="free">condE</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">[</span><span class="free">m</span><span class="main">,</span> <span class="free">p</span><span class="main">]</span> <span class="main">⊢</span> <span class="free">condE</span> <span class="main">↦</span> <span class="free">v</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">,</span> <span class="free">p</span> <span class="main">⊢</span> <span class="main">(</span><span class="free">nid</span><span class="main">,</span> <span class="free">m</span><span class="main">,</span> <span class="free">h</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="free">nid'</span><span class="main">,</span> <span class="free">m</span><span class="main">,</span> <span class="free">h</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">nid'</span> <span class="main">∈</span> <span class="main">{</span><span class="free">tb</span><span class="main">,</span> <span class="free">fb</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> step.IfNode repDet stepDet assms
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_iff old.prod.inject<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> IfNodeSeq<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"kind <span class="free">g</span> <span class="free">nid</span> <span class="main">=</span> IfNode <span class="free">cond</span> <span class="free">tb</span> <span class="free">fb</span> <span class="main">⟶</span> <span class="main">¬</span><span class="main">(</span>is_sequential_node <span class="main">(</span>kind <span class="free">g</span> <span class="free">nid</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> is_sequential_node.simps <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  
<span class="keyword1"><span class="command">lemma</span></span> IfNodeCond<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"kind <span class="free">g</span> <span class="free">nid</span> <span class="main">=</span> IfNode <span class="free">cond</span> <span class="free">tb</span> <span class="free">fb</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">,</span> <span class="free">p</span> <span class="main">⊢</span> <span class="main">(</span><span class="free">nid</span><span class="main">,</span> <span class="free">m</span><span class="main">,</span> <span class="free">h</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="free">nid'</span><span class="main">,</span> <span class="free">m</span><span class="main">,</span> <span class="free">h</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">condE</span> <span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="main">(</span><span class="free">g</span> <span class="main">⊢</span> <span class="free">cond</span> <span class="main">≃</span> <span class="bound">condE</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">[</span><span class="free">m</span><span class="main">,</span> <span class="free">p</span><span class="main">]</span> <span class="main">⊢</span> <span class="bound">condE</span> <span class="main">↦</span> <span class="bound">v</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">,</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">nid</span><span class="main">,</span><span class="free">m</span><span class="main">,</span><span class="free">h</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">nid'</span><span class="main">,</span><span class="free">m</span><span class="main">,</span><span class="free">h</span><span class="main">)</span>"</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> step.induct<span class="main"><span class="keyword3">;</span></span> <span class="operator">auto</span><span class="main">)</span>


<span class="keyword1"><span class="command">lemma</span></span> step_in_ids<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">,</span> <span class="free">p</span> <span class="main">⊢</span> <span class="main">(</span><span class="free">nid</span><span class="main">,</span> <span class="free">m</span><span class="main">,</span> <span class="free">h</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="free">nid'</span><span class="main">,</span> <span class="free">m'</span><span class="main">,</span> <span class="free">h'</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">nid</span> <span class="main">∈</span> ids <span class="free">g</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">nid</span><span class="main">,</span> <span class="free">m</span><span class="main">,</span> <span class="free">h</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">nid'</span><span class="main">,</span> <span class="free">m'</span><span class="main">,</span> <span class="free">h'</span><span class="main">)</span>"</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> step.induct<span class="main">)</span>
  <span class="keyword1"><span class="command">using</span></span> is_sequential_node.simps<span class="main">(</span>45<span class="main">)</span> not_in_g 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> is_sequential_node.simps<span class="main"><span class="main">(</span></span>53<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">using</span></span> ids_some
  <span class="keyword1"><span class="command">using</span></span> IRNode.distinct<span class="main">(</span>1113<span class="main">)</span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">presburger</span>
  <span class="keyword1"><span class="command">using</span></span> EndNodes<span class="main">(</span>1<span class="main">)</span> is_AbstractEndNode.simps is_EndNode.simps<span class="main">(</span>45<span class="main">)</span> ids_some
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> IRNode.disc<span class="main"><span class="main">(</span></span>1218<span class="main"><span class="main">)</span></span> is_EndNode.simps<span class="main"><span class="main">(</span></span>52<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</body>

</html>