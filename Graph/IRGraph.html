<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory IRGraph</title>
</head>


<body>
<div class="head">
<h1>Theory IRGraph</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Graph Representation</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>IRGraph</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> 
    </span><a href="IRNodeHierarchy.html"><span>IRNodeHierarchy</span></a><span>
    </span><a href="Stamp.html"><span>Stamp</span></a><span>
    </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Library/FSet.html"><span>HOL-Library.FSet</span></a><span>"</span></span><span>
    </span><span class="quoted"><span>"</span><a href="../../HOL/HOL/Relation.html"><span>HOL.Relation</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>This theory defines the main Graal data structure - an entire IR Graph.</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>
</span><span>IRGraph is defined as a partial map with a finite domain.
</span><span>The finite domain is required to be able to generate code and produce an interpreter.</span><span>
</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.arity_typerep_IRGraph|fact"><span class="entity_def" id="IRGraph.typerep_IRGraph_def|fact"><span class="entity_def" id="IRGraph.typerep_IRGraph_inst.typerep_IRGraph|fact"><span class="entity_def" id="IRGraph.IRGraph.Abs_IRGraph_induct|fact"><span class="entity_def" id="IRGraph.IRGraph.Rep_IRGraph_induct|fact"><span class="entity_def" id="IRGraph.IRGraph.Abs_IRGraph_cases|fact"><span class="entity_def" id="IRGraph.IRGraph.Rep_IRGraph_cases|fact"><span class="entity_def" id="IRGraph.IRGraph.Abs_IRGraph_inject|fact"><span class="entity_def" id="IRGraph.IRGraph.Rep_IRGraph_inject|fact"><span class="entity_def" id="IRGraph.IRGraph.Abs_IRGraph_inverse|fact"><span class="entity_def" id="IRGraph.IRGraph.Rep_IRGraph_inverse|fact"><span class="entity_def" id="IRGraph.IRGraph.Rep_IRGraph|fact"><span class="entity_def" id="IRGraph.IRGraph.type_definition_IRGraph|fact"><span class="entity_def" id="IRGraph.arity_type_IRGraph|fact"><span class="entity_def" id="IRGraph.arity_typerep_IRGraph|thm"><span class="entity_def" id="IRGraph.typerep_IRGraph_def|thm"><span class="entity_def" id="IRGraph.typerep_IRGraph_inst.typerep_IRGraph|thm"><span class="entity_def" id="IRGraph.IRGraph.Abs_IRGraph_induct|thm"><span class="entity_def" id="IRGraph.IRGraph.Rep_IRGraph_induct|thm"><span class="entity_def" id="IRGraph.IRGraph.Abs_IRGraph_cases|thm"><span class="entity_def" id="IRGraph.IRGraph.Rep_IRGraph_cases|thm"><span class="entity_def" id="IRGraph.IRGraph.Abs_IRGraph_inject|thm"><span class="entity_def" id="IRGraph.IRGraph.Rep_IRGraph_inject|thm"><span class="entity_def" id="IRGraph.IRGraph.Abs_IRGraph_inverse|thm"><span class="entity_def" id="IRGraph.IRGraph.Rep_IRGraph_inverse|thm"><span class="entity_def" id="IRGraph.IRGraph.Rep_IRGraph|thm"><span class="entity_def" id="IRGraph.IRGraph.type_definition_IRGraph|thm"><span class="entity_def" id="IRGraph.arity_type_IRGraph|thm"><span class="entity_def" id="IRGraph.typerep_IRGraph_def_raw|axiom"><span class="entity_def" id="IRGraph.typerep_IRGraph_inst.typerep_IRGraph_def|axiom"><span class="entity_def" id="IRGraph.IRGraph.type_definition_IRGraph|axiom"><span class="entity_def" id="IRGraph.arity_type_IRGraph|axiom"><span class="entity_def" id="IRGraph.typerep_IRGraph_inst.typerep_IRGraph|const"><span class="entity_def" id="IRGraph.IRGraph.Abs_IRGraph|const"><span class="entity_def" id="IRGraph.IRGraph.Rep_IRGraph|const"><span>typedef</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="IRGraph.IRGraph|type"><span>IRGraph</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>g</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>⇀</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode|type"><span>IRNode</span></a><span> </span><span class="main"><span>×</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="bound"><span>g</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span class="main"><span>(</span></span><span>dom</span><span class="main"><span>(</span></span><span>Map.empty</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span>ran</span><span> </span><span>Map.empty</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.Quotient_IRGraph|fact"><span class="entity_def" id="IRGraph.IRGraph.domain_eq|fact"><span class="entity_def" id="IRGraph.IRGraph.domain_par_left_total|fact"><span class="entity_def" id="IRGraph.IRGraph.domain_par|fact"><span class="entity_def" id="IRGraph.IRGraph.domain|fact"><span class="entity_def" id="IRGraph.IRGraph.rep_transfer|fact"><span class="entity_def" id="IRGraph.IRGraph.right_total|fact"><span class="entity_def" id="IRGraph.IRGraph.bi_unique|fact"><span class="entity_def" id="IRGraph.IRGraph.right_unique|fact"><span class="entity_def" id="IRGraph.IRGraph.left_unique|fact"><span class="entity_def" id="IRGraph.arity_term_of_IRGraph|fact"><span class="entity_def" id="IRGraph.term_of_IRGraph_triv|fact"><span class="entity_def" id="IRGraph.term_of_IRGraph_inst.term_of_IRGraph|fact"><span class="entity_def" id="IRGraph.IRGraph.pcr_cr_eq|fact"><span class="entity_def" id="IRGraph.pcr_IRGraph_def|fact"><span class="entity_def" id="IRGraph.cr_IRGraph_def|fact"><span class="entity_def" id="IRGraph.IRGraph.lifting|bundle"><span class="entity_def" id="IRGraph.Quotient_IRGraph|thm"><span class="entity_def" id="IRGraph.IRGraph.domain_eq|thm"><span class="entity_def" id="IRGraph.IRGraph.domain_par_left_total|thm"><span class="entity_def" id="IRGraph.IRGraph.domain_par|thm"><span class="entity_def" id="IRGraph.IRGraph.domain|thm"><span class="entity_def" id="IRGraph.IRGraph.rep_transfer|thm"><span class="entity_def" id="IRGraph.IRGraph.right_total|thm"><span class="entity_def" id="IRGraph.IRGraph.bi_unique|thm"><span class="entity_def" id="IRGraph.IRGraph.right_unique|thm"><span class="entity_def" id="IRGraph.IRGraph.left_unique|thm"><span class="entity_def" id="IRGraph.arity_term_of_IRGraph|thm"><span class="entity_def" id="IRGraph.term_of_IRGraph_triv|thm"><span class="entity_def" id="IRGraph.term_of_IRGraph_inst.term_of_IRGraph|thm"><span class="entity_def" id="IRGraph.IRGraph.pcr_cr_eq|thm"><span class="entity_def" id="IRGraph.pcr_IRGraph_def|thm"><span class="entity_def" id="IRGraph.cr_IRGraph_def|thm"><span class="entity_def" id="IRGraph.term_of_IRGraph_triv_raw|axiom"><span class="entity_def" id="IRGraph.term_of_IRGraph_inst.term_of_IRGraph_def|axiom"><span class="entity_def" id="IRGraph.pcr_IRGraph_def_raw|axiom"><span class="entity_def" id="IRGraph.cr_IRGraph_def|axiom"><span class="entity_def" id="IRGraph.term_of_IRGraph_inst.term_of_IRGraph|const"><span class="entity_def" id="IRGraph.pcr_IRGraph|const"><span class="entity_def" id="IRGraph.cr_IRGraph|const"><span>setup_lifting</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph.type_definition_IRGraph|fact"><span>type_definition_IRGraph</span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.ids.rep_eq|fact"><span class="entity_def" id="IRGraph.ids.abs_eq|fact"><span class="entity_def" id="IRGraph.ids.transfer|fact"><span class="entity_def" id="IRGraph.ids.rsp|fact"><span class="entity_def" id="IRGraph.ids_def|fact"><span class="entity_def" id="IRGraph.ids.rep_eq|thm"><span class="entity_def" id="IRGraph.ids.abs_eq|thm"><span class="entity_def" id="IRGraph.ids.transfer|thm"><span class="entity_def" id="IRGraph.ids.rsp|thm"><span class="entity_def" id="IRGraph.ids_def|thm"><span class="entity_def" id="IRGraph.ids_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="IRGraph.ids|const"><span>ids</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span>set</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>g</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>nid</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>dom</span><span> </span><span class="bound"><span>g</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∄</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>g</span></span><span> </span><span class="bound"><span>nid</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>Some</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span class="main"><span>,</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.with_default.elims|fact"><span class="entity_def" id="IRGraph.with_default.induct|fact"><span class="entity_def" id="IRGraph.with_default.simps|fact"><span class="entity_def" id="IRGraph.with_default.pelims|fact"><span class="entity_def" id="IRGraph.with_default.cases|fact"><span class="entity_def" id="IRGraph.with_default.termination|fact"><span class="entity_def" id="IRGraph.with_default.pinduct|fact"><span class="entity_def" id="IRGraph.with_default.psimps|fact"><span class="entity_def" id="IRGraph.with_default_rel.inducts|fact"><span class="entity_def" id="IRGraph.with_default_rel.simps|fact"><span class="entity_def" id="IRGraph.with_default_rel.induct|fact"><span class="entity_def" id="IRGraph.with_default_rel.cases|fact"><span class="entity_def" id="IRGraph.with_default_rel.intros|fact"><span class="entity_def" id="IRGraph.with_default_graph.inducts|fact"><span class="entity_def" id="IRGraph.with_default_graph.simps|fact"><span class="entity_def" id="IRGraph.with_default_graph.induct|fact"><span class="entity_def" id="IRGraph.with_default_graph.cases|fact"><span class="entity_def" id="IRGraph.with_default_graph.intros|fact"><span class="entity_def" id="IRGraph.with_default.elims|thm"><span class="entity_def" id="IRGraph.with_default.induct|thm"><span class="entity_def" id="IRGraph.with_default.simps|thm"><span class="entity_def" id="IRGraph.with_default.pelims|thm"><span class="entity_def" id="IRGraph.with_default.cases|thm"><span class="entity_def" id="IRGraph.with_default.termination|thm"><span class="entity_def" id="IRGraph.with_default.pinduct|thm"><span class="entity_def" id="IRGraph.with_default.psimps|thm"><span class="entity_def" id="IRGraph.with_default_rel.inducts|thm"><span class="entity_def" id="IRGraph.with_default_rel.simps|thm"><span class="entity_def" id="IRGraph.with_default_rel.induct|thm"><span class="entity_def" id="IRGraph.with_default_rel.cases|thm"><span class="entity_def" id="IRGraph.with_default_graph.inducts|thm"><span class="entity_def" id="IRGraph.with_default_graph.simps|thm"><span class="entity_def" id="IRGraph.with_default_graph.induct|thm"><span class="entity_def" id="IRGraph.with_default_graph.cases|thm"><span class="entity_def" id="IRGraph.with_default_graph.intros|thm"><span class="entity_def" id="IRGraph.with_default_def|axiom"><span class="entity_def" id="IRGraph.with_default_rel_def|axiom"><span class="entity_def" id="IRGraph.with_default_sumC_def|axiom"><span class="entity_def" id="IRGraph.with_default_graph_def|axiom"><span class="entity_def" id="IRGraph.with_default_dom|const"><span class="entity_def" id="IRGraph.with_default_rel|const"><span class="entity_def" id="IRGraph.with_default_sumC|const"><span class="entity_def" id="IRGraph.with_default_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.with_default|const"><span>with_default</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇀</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>with_default</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>def</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>conv</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span>
    </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="keyword1"><span>of</span></span><span> None </span><span class="main"><span>⇒</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>def</span></span></span></span><span> </span><span class="main"><span>|</span></span><span> Some </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>conv</span></span></span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.kind.rep_eq|fact"><span class="entity_def" id="IRGraph.kind.abs_eq|fact"><span class="entity_def" id="IRGraph.kind.transfer|fact"><span class="entity_def" id="IRGraph.kind.rsp|fact"><span class="entity_def" id="IRGraph.kind_def|fact"><span class="entity_def" id="IRGraph.kind.rep_eq|thm"><span class="entity_def" id="IRGraph.kind.abs_eq|thm"><span class="entity_def" id="IRGraph.kind.transfer|thm"><span class="entity_def" id="IRGraph.kind.rsp|thm"><span class="entity_def" id="IRGraph.kind_def|thm"><span class="entity_def" id="IRGraph.kind_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="IRGraph.kind|const"><span>kind</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode|type"><span>IRNode</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.with_default|const"><span>with_default</span></a><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span> </span><span>fst</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.stamp.rep_eq|fact"><span class="entity_def" id="IRGraph.stamp.abs_eq|fact"><span class="entity_def" id="IRGraph.stamp.transfer|fact"><span class="entity_def" id="IRGraph.stamp.rsp|fact"><span class="entity_def" id="IRGraph.stamp_def|fact"><span class="entity_def" id="IRGraph.stamp.rep_eq|thm"><span class="entity_def" id="IRGraph.stamp.abs_eq|thm"><span class="entity_def" id="IRGraph.stamp.transfer|thm"><span class="entity_def" id="IRGraph.stamp.rsp|thm"><span class="entity_def" id="IRGraph.stamp_def|thm"><span class="entity_def" id="IRGraph.stamp_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="IRGraph.stamp|const"><span>stamp</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.with_default|const"><span>with_default</span></a><span> </span><a class="entity_ref" href="Stamp.html#Stamp.Stamp.IllegalStamp|const"><span>IllegalStamp</span></a><span> </span><span>snd</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.add_node.rep_eq|fact"><span class="entity_def" id="IRGraph.add_node.abs_eq|fact"><span class="entity_def" id="IRGraph.add_node.transfer|fact"><span class="entity_def" id="IRGraph.add_node.rsp|fact"><span class="entity_def" id="IRGraph.add_node_def|fact"><span class="entity_def" id="IRGraph.add_node.rep_eq|thm"><span class="entity_def" id="IRGraph.add_node.abs_eq|thm"><span class="entity_def" id="IRGraph.add_node.transfer|thm"><span class="entity_def" id="IRGraph.add_node.rsp|thm"><span class="entity_def" id="IRGraph.add_node_def|thm"><span class="entity_def" id="IRGraph.add_node_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="IRGraph.add_node|const"><span>add_node</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode|type"><span>IRNode</span></a><span> </span><span class="main"><span>×</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>nid</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="bound"><span>g</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span>fst</span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="bound"><span>g</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="bound"><span>g</span></span><span class="main"><span>(</span></span><span class="bound"><span>nid</span></span><span> </span><span class="main"><span>↦</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.remove_node.rep_eq|fact"><span class="entity_def" id="IRGraph.remove_node.abs_eq|fact"><span class="entity_def" id="IRGraph.remove_node.transfer|fact"><span class="entity_def" id="IRGraph.remove_node.rsp|fact"><span class="entity_def" id="IRGraph.remove_node_def|fact"><span class="entity_def" id="IRGraph.remove_node.rep_eq|thm"><span class="entity_def" id="IRGraph.remove_node.abs_eq|thm"><span class="entity_def" id="IRGraph.remove_node.transfer|thm"><span class="entity_def" id="IRGraph.remove_node.rsp|thm"><span class="entity_def" id="IRGraph.remove_node_def|thm"><span class="entity_def" id="IRGraph.remove_node_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="IRGraph.remove_node|const"><span>remove_node</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>nid</span></span><span> </span><span class="bound"><span>g</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>g</span></span><span class="main"><span>(</span></span><span class="bound"><span>nid</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span>None</span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.replace_node.rep_eq|fact"><span class="entity_def" id="IRGraph.replace_node.abs_eq|fact"><span class="entity_def" id="IRGraph.replace_node.transfer|fact"><span class="entity_def" id="IRGraph.replace_node.rsp|fact"><span class="entity_def" id="IRGraph.replace_node_def|fact"><span class="entity_def" id="IRGraph.replace_node.rep_eq|thm"><span class="entity_def" id="IRGraph.replace_node.abs_eq|thm"><span class="entity_def" id="IRGraph.replace_node.transfer|thm"><span class="entity_def" id="IRGraph.replace_node.rsp|thm"><span class="entity_def" id="IRGraph.replace_node_def|thm"><span class="entity_def" id="IRGraph.replace_node_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="IRGraph.replace_node|const"><span>replace_node</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode|type"><span>IRNode</span></a><span> </span><span class="main"><span>×</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>nid</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="bound"><span>g</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span>fst</span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="bound"><span>g</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="bound"><span>g</span></span><span class="main"><span>(</span></span><span class="bound"><span>nid</span></span><span> </span><span class="main"><span>↦</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.as_list.rep_eq|fact"><span class="entity_def" id="IRGraph.as_list.abs_eq|fact"><span class="entity_def" id="IRGraph.as_list.transfer|fact"><span class="entity_def" id="IRGraph.as_list.rsp|fact"><span class="entity_def" id="IRGraph.as_list_def|fact"><span class="entity_def" id="IRGraph.as_list.rep_eq|thm"><span class="entity_def" id="IRGraph.as_list.abs_eq|thm"><span class="entity_def" id="IRGraph.as_list.transfer|thm"><span class="entity_def" id="IRGraph.as_list.rsp|thm"><span class="entity_def" id="IRGraph.as_list_def|thm"><span class="entity_def" id="IRGraph.as_list_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="IRGraph.as_list|const"><span>as_list</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>×</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode|type"><span>IRNode</span></a><span> </span><span class="main"><span>×</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span class="main"><span>)</span></span><span> </span><span>list</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>g</span></span><span class="main"><span>.</span></span><span> </span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>g</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>sorted_list_of_set</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="bound"><span>g</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.no_node.elims|fact"><span class="entity_def" id="IRGraph.no_node.induct|fact"><span class="entity_def" id="IRGraph.no_node.simps|fact"><span class="entity_def" id="IRGraph.no_node.pelims|fact"><span class="entity_def" id="IRGraph.no_node.cases|fact"><span class="entity_def" id="IRGraph.no_node.termination|fact"><span class="entity_def" id="IRGraph.no_node.pinduct|fact"><span class="entity_def" id="IRGraph.no_node.psimps|fact"><span class="entity_def" id="IRGraph.no_node_rel.inducts|fact"><span class="entity_def" id="IRGraph.no_node_rel.simps|fact"><span class="entity_def" id="IRGraph.no_node_rel.induct|fact"><span class="entity_def" id="IRGraph.no_node_rel.cases|fact"><span class="entity_def" id="IRGraph.no_node_rel.intros|fact"><span class="entity_def" id="IRGraph.no_node_graph.inducts|fact"><span class="entity_def" id="IRGraph.no_node_graph.simps|fact"><span class="entity_def" id="IRGraph.no_node_graph.induct|fact"><span class="entity_def" id="IRGraph.no_node_graph.cases|fact"><span class="entity_def" id="IRGraph.no_node_graph.intros|fact"><span class="entity_def" id="IRGraph.no_node.elims|thm"><span class="entity_def" id="IRGraph.no_node.induct|thm"><span class="entity_def" id="IRGraph.no_node.simps|thm"><span class="entity_def" id="IRGraph.no_node.pelims|thm"><span class="entity_def" id="IRGraph.no_node.cases|thm"><span class="entity_def" id="IRGraph.no_node.termination|thm"><span class="entity_def" id="IRGraph.no_node.pinduct|thm"><span class="entity_def" id="IRGraph.no_node.psimps|thm"><span class="entity_def" id="IRGraph.no_node_rel.inducts|thm"><span class="entity_def" id="IRGraph.no_node_rel.simps|thm"><span class="entity_def" id="IRGraph.no_node_rel.induct|thm"><span class="entity_def" id="IRGraph.no_node_rel.cases|thm"><span class="entity_def" id="IRGraph.no_node_graph.inducts|thm"><span class="entity_def" id="IRGraph.no_node_graph.simps|thm"><span class="entity_def" id="IRGraph.no_node_graph.induct|thm"><span class="entity_def" id="IRGraph.no_node_graph.cases|thm"><span class="entity_def" id="IRGraph.no_node_graph.intros|thm"><span class="entity_def" id="IRGraph.no_node_def|axiom"><span class="entity_def" id="IRGraph.no_node_rel_def|axiom"><span class="entity_def" id="IRGraph.no_node_sumC_def|axiom"><span class="entity_def" id="IRGraph.no_node_graph_def|axiom"><span class="entity_def" id="IRGraph.no_node_dom|const"><span class="entity_def" id="IRGraph.no_node_rel|const"><span class="entity_def" id="IRGraph.no_node_sumC|const"><span class="entity_def" id="IRGraph.no_node_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.no_node|const"><span>no_node</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>×</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode|type"><span>IRNode</span></a><span> </span><span class="main"><span>×</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>list</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>×</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode|type"><span>IRNode</span></a><span> </span><span class="main"><span>×</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>list</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>no_node</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>filter</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span>fst</span><span> </span><span class="main"><span>(</span></span><span>snd</span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.irgraph.rep_eq|fact"><span class="entity_def" id="IRGraph.irgraph.abs_eq|fact"><span class="entity_def" id="IRGraph.irgraph.transfer|fact"><span class="entity_def" id="IRGraph.irgraph.rsp|fact"><span class="entity_def" id="IRGraph.irgraph_def|fact"><span class="entity_def" id="IRGraph.irgraph.rep_eq|thm"><span class="entity_def" id="IRGraph.irgraph.abs_eq|thm"><span class="entity_def" id="IRGraph.irgraph.transfer|thm"><span class="entity_def" id="IRGraph.irgraph.rsp|thm"><span class="entity_def" id="IRGraph.irgraph_def|thm"><span class="entity_def" id="IRGraph.irgraph_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="IRGraph.irgraph|const"><span>irgraph</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>×</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode|type"><span>IRNode</span></a><span> </span><span class="main"><span>×</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>list</span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map_of</span><span> </span><span class="main"><span>∘</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.no_node|const"><span>no_node</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>finite_dom_map_of</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.as_set_def|fact"><span class="entity_def" id="IRGraph.as_set_def|thm"><span class="entity_def" id="IRGraph.as_set_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.as_set|const"><span>as_set</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>×</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode|type"><span>IRNode</span></a><span> </span><span class="main"><span>×</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>set</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>as_set</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.stamp|const"><span>stamp</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.true_ids_def|fact"><span class="entity_def" id="IRGraph.true_ids_def|thm"><span class="entity_def" id="IRGraph.true_ids_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.true_ids|const"><span>true_ids</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span>set</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>true_ids</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>n</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>n'</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.RefNode|const"><span>RefNode</span></a><span> </span><span class="bound"><span>n'</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.domain_subtraction_def|fact"><span class="entity_def" id="IRGraph.domain_subtraction_def|thm"><span class="entity_def" id="IRGraph.domain_subtraction_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.domain_subtraction|const"><span>domain_subtraction</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>×</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span>set</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>×</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span>set</span><span>"</span></span></span><span>
  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>⊴</span></span><span>"</span></span><span> 30</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>domain_subtraction</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∉</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><span class="main"><span>(</span></span><span>latex</span><span class="main"><span>)</span></span><span>
  </span><a class="entity_ref" href="IRGraph.html#IRGraph.domain_subtraction|const"><span>domain_subtraction</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span>_</span><span> </span><span class="keyword1"><span><span class="hidden">\&lt;^</span><span class="control">latex</span><span class="hidden">&gt;</span>‹$</span><span>\</span><span>\ndres$›</span></span><span> </span><span>_</span><span>"</span></span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Theories are required for code generation to work </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.arity_partial_term_of_IRGraph|fact"><span class="entity_def" id="IRGraph.partial_term_of_IRGraph_triv|fact"><span class="entity_def" id="IRGraph.partial_term_of_IRGraph_inst.partial_term_of_IRGraph|fact"><span class="entity_def" id="IRGraph.arity_partial_term_of_IRGraph|thm"><span class="entity_def" id="IRGraph.partial_term_of_IRGraph_triv|thm"><span class="entity_def" id="IRGraph.partial_term_of_IRGraph_inst.partial_term_of_IRGraph|thm"><span class="entity_def" id="IRGraph.partial_term_of_IRGraph_triv_raw|axiom"><span class="entity_def" id="IRGraph.partial_term_of_IRGraph_inst.partial_term_of_IRGraph_def|axiom"><span class="entity_def" id="IRGraph.partial_term_of_IRGraph_inst.partial_term_of_IRGraph|const"><span>code_datatype</span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph|const"><span>irgraph</span></a></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.filter_none.elims|fact"><span class="entity_def" id="IRGraph.filter_none.induct|fact"><span class="entity_def" id="IRGraph.filter_none.simps|fact"><span class="entity_def" id="IRGraph.filter_none.pelims|fact"><span class="entity_def" id="IRGraph.filter_none.cases|fact"><span class="entity_def" id="IRGraph.filter_none.termination|fact"><span class="entity_def" id="IRGraph.filter_none.pinduct|fact"><span class="entity_def" id="IRGraph.filter_none.psimps|fact"><span class="entity_def" id="IRGraph.filter_none_rel.inducts|fact"><span class="entity_def" id="IRGraph.filter_none_rel.simps|fact"><span class="entity_def" id="IRGraph.filter_none_rel.induct|fact"><span class="entity_def" id="IRGraph.filter_none_rel.cases|fact"><span class="entity_def" id="IRGraph.filter_none_rel.intros|fact"><span class="entity_def" id="IRGraph.filter_none_graph.inducts|fact"><span class="entity_def" id="IRGraph.filter_none_graph.simps|fact"><span class="entity_def" id="IRGraph.filter_none_graph.induct|fact"><span class="entity_def" id="IRGraph.filter_none_graph.cases|fact"><span class="entity_def" id="IRGraph.filter_none_graph.intros|fact"><span class="entity_def" id="IRGraph.filter_none.elims|thm"><span class="entity_def" id="IRGraph.filter_none.induct|thm"><span class="entity_def" id="IRGraph.filter_none.simps|thm"><span class="entity_def" id="IRGraph.filter_none.pelims|thm"><span class="entity_def" id="IRGraph.filter_none.cases|thm"><span class="entity_def" id="IRGraph.filter_none.termination|thm"><span class="entity_def" id="IRGraph.filter_none.pinduct|thm"><span class="entity_def" id="IRGraph.filter_none.psimps|thm"><span class="entity_def" id="IRGraph.filter_none_rel.inducts|thm"><span class="entity_def" id="IRGraph.filter_none_rel.simps|thm"><span class="entity_def" id="IRGraph.filter_none_rel.induct|thm"><span class="entity_def" id="IRGraph.filter_none_rel.cases|thm"><span class="entity_def" id="IRGraph.filter_none_graph.inducts|thm"><span class="entity_def" id="IRGraph.filter_none_graph.simps|thm"><span class="entity_def" id="IRGraph.filter_none_graph.induct|thm"><span class="entity_def" id="IRGraph.filter_none_graph.cases|thm"><span class="entity_def" id="IRGraph.filter_none_graph.intros|thm"><span class="entity_def" id="IRGraph.filter_none_def|axiom"><span class="entity_def" id="IRGraph.filter_none_rel_def|axiom"><span class="entity_def" id="IRGraph.filter_none_sumC_def|axiom"><span class="entity_def" id="IRGraph.filter_none_graph_def|axiom"><span class="entity_def" id="IRGraph.filter_none_dom|const"><span class="entity_def" id="IRGraph.filter_none_rel|const"><span class="entity_def" id="IRGraph.filter_none_sumC|const"><span class="entity_def" id="IRGraph.filter_none_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.filter_none|const"><span>filter_none</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>filter_none</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>nid</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>dom</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∄</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="bound"><span>nid</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>Some</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span class="main"><span>,</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IRGraph.no_node_clears|fact"><span class="entity_def" id="IRGraph.no_node_clears|thm"><span>no_node_clears</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>res</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.no_node|const"><span>no_node</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>set</span><span> </span><span class="free"><span>res</span></span><span class="main"><span>.</span></span><span> </span><span>fst</span><span> </span><span class="main"><span>(</span></span><span>snd</span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2508..2513">lemma</span></span></span><span> </span><span class="entity_def" id="IRGraph.dom_eq|fact"><span class="entity_def" id="IRGraph.dom_eq|thm"><span>dom_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>set</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span>fst</span><span> </span><span class="main"><span>(</span></span><span>snd</span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.filter_none|const"><span>filter_none</span></a><span> </span><span class="main"><span>(</span></span><span>map_of</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dom</span><span> </span><span class="main"><span>(</span></span><span>map_of</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.filter_none.simps|fact"><span>filter_none.simps</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#offset_2508..2513"><span>assms</span></a><span> </span><span>map_of_SomeD</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IRGraph.fil_eq|fact"><span class="entity_def" id="IRGraph.fil_eq|thm"><span>fil_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.filter_none|const"><span>filter_none</span></a><span> </span><span class="main"><span>(</span></span><span>map_of</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.no_node|const"><span>no_node</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span>fst</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.no_node|const"><span>no_node</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.no_node_clears|fact"><span>no_node_clears</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.dom_eq|fact"><span>dom_eq</span></a><span> </span><span>dom_map_of_conv_image_fst</span><span> </span><span>list.set_map</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IRGraph.irgraph|fact"><span class="entity_def" id="IRGraph.irgraph|thm"><span>irgraph</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph|const"><span>irgraph</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span>fst</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.no_node|const"><span>no_node</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph_def|fact"><span>irgraph_def</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids_def|fact"><span>ids_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.fil_eq|fact"><span>fil_eq</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph.Rep_IRGraph|fact"><span>Rep_IRGraph</span></a><span> </span><span>comp_apply</span><span> </span><span>eq_onp_same_args</span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.filter_none.simps|fact"><span>filter_none.simps</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids.abs_eq|fact"><span>ids.abs_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids_def|fact"><span>ids_def</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph.abs_eq|fact"><span>irgraph.abs_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph.rep_eq|fact"><span>irgraph.rep_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph_def|fact"><span>irgraph_def</span></a><span> </span><span>mem_Collect_eq</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph.Rep_IRGraph|const"><span>Rep_IRGraph</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph|const"><span>irgraph</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_of</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.no_node|const"><span>no_node</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph.Abs_IRGraph_inverse|fact"><span>Abs_IRGraph_inverse</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph.rep_eq|fact"><span>irgraph.rep_eq</span></a><span class="main"><span>)</span></span><span>


</span><span class="comment1"><span>― ‹</span><span>Get the inputs set of a given node ID</span><span>›</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.inputs.elims|fact"><span class="entity_def" id="IRGraph.inputs.induct|fact"><span class="entity_def" id="IRGraph.inputs.simps|fact"><span class="entity_def" id="IRGraph.inputs.pelims|fact"><span class="entity_def" id="IRGraph.inputs.cases|fact"><span class="entity_def" id="IRGraph.inputs.termination|fact"><span class="entity_def" id="IRGraph.inputs.pinduct|fact"><span class="entity_def" id="IRGraph.inputs.psimps|fact"><span class="entity_def" id="IRGraph.inputs_rel.inducts|fact"><span class="entity_def" id="IRGraph.inputs_rel.simps|fact"><span class="entity_def" id="IRGraph.inputs_rel.induct|fact"><span class="entity_def" id="IRGraph.inputs_rel.cases|fact"><span class="entity_def" id="IRGraph.inputs_rel.intros|fact"><span class="entity_def" id="IRGraph.inputs_graph.inducts|fact"><span class="entity_def" id="IRGraph.inputs_graph.simps|fact"><span class="entity_def" id="IRGraph.inputs_graph.induct|fact"><span class="entity_def" id="IRGraph.inputs_graph.cases|fact"><span class="entity_def" id="IRGraph.inputs_graph.intros|fact"><span class="entity_def" id="IRGraph.inputs.elims|thm"><span class="entity_def" id="IRGraph.inputs.induct|thm"><span class="entity_def" id="IRGraph.inputs.simps|thm"><span class="entity_def" id="IRGraph.inputs.pelims|thm"><span class="entity_def" id="IRGraph.inputs.cases|thm"><span class="entity_def" id="IRGraph.inputs.termination|thm"><span class="entity_def" id="IRGraph.inputs.pinduct|thm"><span class="entity_def" id="IRGraph.inputs.psimps|thm"><span class="entity_def" id="IRGraph.inputs_rel.inducts|thm"><span class="entity_def" id="IRGraph.inputs_rel.simps|thm"><span class="entity_def" id="IRGraph.inputs_rel.induct|thm"><span class="entity_def" id="IRGraph.inputs_rel.cases|thm"><span class="entity_def" id="IRGraph.inputs_graph.inducts|thm"><span class="entity_def" id="IRGraph.inputs_graph.simps|thm"><span class="entity_def" id="IRGraph.inputs_graph.induct|thm"><span class="entity_def" id="IRGraph.inputs_graph.cases|thm"><span class="entity_def" id="IRGraph.inputs_graph.intros|thm"><span class="entity_def" id="IRGraph.inputs_def|axiom"><span class="entity_def" id="IRGraph.inputs_rel_def|axiom"><span class="entity_def" id="IRGraph.inputs_sumC_def|axiom"><span class="entity_def" id="IRGraph.inputs_graph_def|axiom"><span class="entity_def" id="IRGraph.inputs_dom|const"><span class="entity_def" id="IRGraph.inputs_rel|const"><span class="entity_def" id="IRGraph.inputs_sumC|const"><span class="entity_def" id="IRGraph.inputs_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.inputs|const"><span>inputs</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span>set</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inputs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.inputs_of|const"><span>inputs_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="comment1"><span>― ‹</span><span>Get the successor set of a given node ID</span><span>›</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.succ.elims|fact"><span class="entity_def" id="IRGraph.succ.induct|fact"><span class="entity_def" id="IRGraph.succ.simps|fact"><span class="entity_def" id="IRGraph.succ.pelims|fact"><span class="entity_def" id="IRGraph.succ.cases|fact"><span class="entity_def" id="IRGraph.succ.termination|fact"><span class="entity_def" id="IRGraph.succ.pinduct|fact"><span class="entity_def" id="IRGraph.succ.psimps|fact"><span class="entity_def" id="IRGraph.succ_rel.inducts|fact"><span class="entity_def" id="IRGraph.succ_rel.simps|fact"><span class="entity_def" id="IRGraph.succ_rel.induct|fact"><span class="entity_def" id="IRGraph.succ_rel.cases|fact"><span class="entity_def" id="IRGraph.succ_rel.intros|fact"><span class="entity_def" id="IRGraph.succ_graph.inducts|fact"><span class="entity_def" id="IRGraph.succ_graph.simps|fact"><span class="entity_def" id="IRGraph.succ_graph.induct|fact"><span class="entity_def" id="IRGraph.succ_graph.cases|fact"><span class="entity_def" id="IRGraph.succ_graph.intros|fact"><span class="entity_def" id="IRGraph.succ.elims|thm"><span class="entity_def" id="IRGraph.succ.induct|thm"><span class="entity_def" id="IRGraph.succ.simps|thm"><span class="entity_def" id="IRGraph.succ.pelims|thm"><span class="entity_def" id="IRGraph.succ.cases|thm"><span class="entity_def" id="IRGraph.succ.termination|thm"><span class="entity_def" id="IRGraph.succ.pinduct|thm"><span class="entity_def" id="IRGraph.succ.psimps|thm"><span class="entity_def" id="IRGraph.succ_rel.inducts|thm"><span class="entity_def" id="IRGraph.succ_rel.simps|thm"><span class="entity_def" id="IRGraph.succ_rel.induct|thm"><span class="entity_def" id="IRGraph.succ_rel.cases|thm"><span class="entity_def" id="IRGraph.succ_graph.inducts|thm"><span class="entity_def" id="IRGraph.succ_graph.simps|thm"><span class="entity_def" id="IRGraph.succ_graph.induct|thm"><span class="entity_def" id="IRGraph.succ_graph.cases|thm"><span class="entity_def" id="IRGraph.succ_graph.intros|thm"><span class="entity_def" id="IRGraph.succ_def|axiom"><span class="entity_def" id="IRGraph.succ_rel_def|axiom"><span class="entity_def" id="IRGraph.succ_sumC_def|axiom"><span class="entity_def" id="IRGraph.succ_graph_def|axiom"><span class="entity_def" id="IRGraph.succ_dom|const"><span class="entity_def" id="IRGraph.succ_rel|const"><span class="entity_def" id="IRGraph.succ_sumC|const"><span class="entity_def" id="IRGraph.succ_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.succ|const"><span>succ</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span>set</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>succ</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.successors_of|const"><span>successors_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="comment1"><span>― ‹</span><span>Gives a relation between node IDs - between a node and its input nodes</span><span>›</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.input_edges.elims|fact"><span class="entity_def" id="IRGraph.input_edges.induct|fact"><span class="entity_def" id="IRGraph.input_edges.simps|fact"><span class="entity_def" id="IRGraph.input_edges.pelims|fact"><span class="entity_def" id="IRGraph.input_edges.cases|fact"><span class="entity_def" id="IRGraph.input_edges.termination|fact"><span class="entity_def" id="IRGraph.input_edges.pinduct|fact"><span class="entity_def" id="IRGraph.input_edges.psimps|fact"><span class="entity_def" id="IRGraph.input_edges_rel.inducts|fact"><span class="entity_def" id="IRGraph.input_edges_rel.simps|fact"><span class="entity_def" id="IRGraph.input_edges_rel.induct|fact"><span class="entity_def" id="IRGraph.input_edges_rel.cases|fact"><span class="entity_def" id="IRGraph.input_edges_rel.intros|fact"><span class="entity_def" id="IRGraph.input_edges_graph.inducts|fact"><span class="entity_def" id="IRGraph.input_edges_graph.simps|fact"><span class="entity_def" id="IRGraph.input_edges_graph.induct|fact"><span class="entity_def" id="IRGraph.input_edges_graph.cases|fact"><span class="entity_def" id="IRGraph.input_edges_graph.intros|fact"><span class="entity_def" id="IRGraph.input_edges.elims|thm"><span class="entity_def" id="IRGraph.input_edges.induct|thm"><span class="entity_def" id="IRGraph.input_edges.simps|thm"><span class="entity_def" id="IRGraph.input_edges.pelims|thm"><span class="entity_def" id="IRGraph.input_edges.cases|thm"><span class="entity_def" id="IRGraph.input_edges.termination|thm"><span class="entity_def" id="IRGraph.input_edges.pinduct|thm"><span class="entity_def" id="IRGraph.input_edges.psimps|thm"><span class="entity_def" id="IRGraph.input_edges_rel.inducts|thm"><span class="entity_def" id="IRGraph.input_edges_rel.simps|thm"><span class="entity_def" id="IRGraph.input_edges_rel.induct|thm"><span class="entity_def" id="IRGraph.input_edges_rel.cases|thm"><span class="entity_def" id="IRGraph.input_edges_graph.inducts|thm"><span class="entity_def" id="IRGraph.input_edges_graph.simps|thm"><span class="entity_def" id="IRGraph.input_edges_graph.induct|thm"><span class="entity_def" id="IRGraph.input_edges_graph.cases|thm"><span class="entity_def" id="IRGraph.input_edges_graph.intros|thm"><span class="entity_def" id="IRGraph.input_edges_def|axiom"><span class="entity_def" id="IRGraph.input_edges_rel_def|axiom"><span class="entity_def" id="IRGraph.input_edges_sumC_def|axiom"><span class="entity_def" id="IRGraph.input_edges_graph_def|axiom"><span class="entity_def" id="IRGraph.input_edges_dom|const"><span class="entity_def" id="IRGraph.input_edges_rel|const"><span class="entity_def" id="IRGraph.input_edges_sumC|const"><span class="entity_def" id="IRGraph.input_edges_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.input_edges|const"><span>input_edges</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span>rel</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>input_edges</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋃</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>|</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.inputs|const"><span>inputs</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="comment1"><span>― ‹</span><span>Find all the nodes in the graph that have nid as an input - the usages of nid</span><span>›</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.usages.elims|fact"><span class="entity_def" id="IRGraph.usages.induct|fact"><span class="entity_def" id="IRGraph.usages.simps|fact"><span class="entity_def" id="IRGraph.usages.pelims|fact"><span class="entity_def" id="IRGraph.usages.cases|fact"><span class="entity_def" id="IRGraph.usages.termination|fact"><span class="entity_def" id="IRGraph.usages.pinduct|fact"><span class="entity_def" id="IRGraph.usages.psimps|fact"><span class="entity_def" id="IRGraph.usages_rel.inducts|fact"><span class="entity_def" id="IRGraph.usages_rel.simps|fact"><span class="entity_def" id="IRGraph.usages_rel.induct|fact"><span class="entity_def" id="IRGraph.usages_rel.cases|fact"><span class="entity_def" id="IRGraph.usages_rel.intros|fact"><span class="entity_def" id="IRGraph.usages_graph.inducts|fact"><span class="entity_def" id="IRGraph.usages_graph.simps|fact"><span class="entity_def" id="IRGraph.usages_graph.induct|fact"><span class="entity_def" id="IRGraph.usages_graph.cases|fact"><span class="entity_def" id="IRGraph.usages_graph.intros|fact"><span class="entity_def" id="IRGraph.usages.elims|thm"><span class="entity_def" id="IRGraph.usages.induct|thm"><span class="entity_def" id="IRGraph.usages.simps|thm"><span class="entity_def" id="IRGraph.usages.pelims|thm"><span class="entity_def" id="IRGraph.usages.cases|thm"><span class="entity_def" id="IRGraph.usages.termination|thm"><span class="entity_def" id="IRGraph.usages.pinduct|thm"><span class="entity_def" id="IRGraph.usages.psimps|thm"><span class="entity_def" id="IRGraph.usages_rel.inducts|thm"><span class="entity_def" id="IRGraph.usages_rel.simps|thm"><span class="entity_def" id="IRGraph.usages_rel.induct|thm"><span class="entity_def" id="IRGraph.usages_rel.cases|thm"><span class="entity_def" id="IRGraph.usages_graph.inducts|thm"><span class="entity_def" id="IRGraph.usages_graph.simps|thm"><span class="entity_def" id="IRGraph.usages_graph.induct|thm"><span class="entity_def" id="IRGraph.usages_graph.cases|thm"><span class="entity_def" id="IRGraph.usages_graph.intros|thm"><span class="entity_def" id="IRGraph.usages_def|axiom"><span class="entity_def" id="IRGraph.usages_rel_def|axiom"><span class="entity_def" id="IRGraph.usages_sumC_def|axiom"><span class="entity_def" id="IRGraph.usages_graph_def|axiom"><span class="entity_def" id="IRGraph.usages_dom|const"><span class="entity_def" id="IRGraph.usages_rel|const"><span class="entity_def" id="IRGraph.usages_sumC|const"><span class="entity_def" id="IRGraph.usages_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.usages|const"><span>usages</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span>set</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>usages</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>j</span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.input_edges|const"><span>input_edges</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.successor_edges.elims|fact"><span class="entity_def" id="IRGraph.successor_edges.induct|fact"><span class="entity_def" id="IRGraph.successor_edges.simps|fact"><span class="entity_def" id="IRGraph.successor_edges.pelims|fact"><span class="entity_def" id="IRGraph.successor_edges.cases|fact"><span class="entity_def" id="IRGraph.successor_edges.termination|fact"><span class="entity_def" id="IRGraph.successor_edges.pinduct|fact"><span class="entity_def" id="IRGraph.successor_edges.psimps|fact"><span class="entity_def" id="IRGraph.successor_edges_rel.inducts|fact"><span class="entity_def" id="IRGraph.successor_edges_rel.simps|fact"><span class="entity_def" id="IRGraph.successor_edges_rel.induct|fact"><span class="entity_def" id="IRGraph.successor_edges_rel.cases|fact"><span class="entity_def" id="IRGraph.successor_edges_rel.intros|fact"><span class="entity_def" id="IRGraph.successor_edges_graph.inducts|fact"><span class="entity_def" id="IRGraph.successor_edges_graph.simps|fact"><span class="entity_def" id="IRGraph.successor_edges_graph.induct|fact"><span class="entity_def" id="IRGraph.successor_edges_graph.cases|fact"><span class="entity_def" id="IRGraph.successor_edges_graph.intros|fact"><span class="entity_def" id="IRGraph.successor_edges.elims|thm"><span class="entity_def" id="IRGraph.successor_edges.induct|thm"><span class="entity_def" id="IRGraph.successor_edges.simps|thm"><span class="entity_def" id="IRGraph.successor_edges.pelims|thm"><span class="entity_def" id="IRGraph.successor_edges.cases|thm"><span class="entity_def" id="IRGraph.successor_edges.termination|thm"><span class="entity_def" id="IRGraph.successor_edges.pinduct|thm"><span class="entity_def" id="IRGraph.successor_edges.psimps|thm"><span class="entity_def" id="IRGraph.successor_edges_rel.inducts|thm"><span class="entity_def" id="IRGraph.successor_edges_rel.simps|thm"><span class="entity_def" id="IRGraph.successor_edges_rel.induct|thm"><span class="entity_def" id="IRGraph.successor_edges_rel.cases|thm"><span class="entity_def" id="IRGraph.successor_edges_graph.inducts|thm"><span class="entity_def" id="IRGraph.successor_edges_graph.simps|thm"><span class="entity_def" id="IRGraph.successor_edges_graph.induct|thm"><span class="entity_def" id="IRGraph.successor_edges_graph.cases|thm"><span class="entity_def" id="IRGraph.successor_edges_graph.intros|thm"><span class="entity_def" id="IRGraph.successor_edges_def|axiom"><span class="entity_def" id="IRGraph.successor_edges_rel_def|axiom"><span class="entity_def" id="IRGraph.successor_edges_sumC_def|axiom"><span class="entity_def" id="IRGraph.successor_edges_graph_def|axiom"><span class="entity_def" id="IRGraph.successor_edges_dom|const"><span class="entity_def" id="IRGraph.successor_edges_rel|const"><span class="entity_def" id="IRGraph.successor_edges_sumC|const"><span class="entity_def" id="IRGraph.successor_edges_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.successor_edges|const"><span>successor_edges</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span>rel</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>successor_edges</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋃</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>|</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.succ|const"><span>succ</span></a><span>  </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.predecessors.elims|fact"><span class="entity_def" id="IRGraph.predecessors.induct|fact"><span class="entity_def" id="IRGraph.predecessors.simps|fact"><span class="entity_def" id="IRGraph.predecessors.pelims|fact"><span class="entity_def" id="IRGraph.predecessors.cases|fact"><span class="entity_def" id="IRGraph.predecessors.termination|fact"><span class="entity_def" id="IRGraph.predecessors.pinduct|fact"><span class="entity_def" id="IRGraph.predecessors.psimps|fact"><span class="entity_def" id="IRGraph.predecessors_rel.inducts|fact"><span class="entity_def" id="IRGraph.predecessors_rel.simps|fact"><span class="entity_def" id="IRGraph.predecessors_rel.induct|fact"><span class="entity_def" id="IRGraph.predecessors_rel.cases|fact"><span class="entity_def" id="IRGraph.predecessors_rel.intros|fact"><span class="entity_def" id="IRGraph.predecessors_graph.inducts|fact"><span class="entity_def" id="IRGraph.predecessors_graph.simps|fact"><span class="entity_def" id="IRGraph.predecessors_graph.induct|fact"><span class="entity_def" id="IRGraph.predecessors_graph.cases|fact"><span class="entity_def" id="IRGraph.predecessors_graph.intros|fact"><span class="entity_def" id="IRGraph.predecessors.elims|thm"><span class="entity_def" id="IRGraph.predecessors.induct|thm"><span class="entity_def" id="IRGraph.predecessors.simps|thm"><span class="entity_def" id="IRGraph.predecessors.pelims|thm"><span class="entity_def" id="IRGraph.predecessors.cases|thm"><span class="entity_def" id="IRGraph.predecessors.termination|thm"><span class="entity_def" id="IRGraph.predecessors.pinduct|thm"><span class="entity_def" id="IRGraph.predecessors.psimps|thm"><span class="entity_def" id="IRGraph.predecessors_rel.inducts|thm"><span class="entity_def" id="IRGraph.predecessors_rel.simps|thm"><span class="entity_def" id="IRGraph.predecessors_rel.induct|thm"><span class="entity_def" id="IRGraph.predecessors_rel.cases|thm"><span class="entity_def" id="IRGraph.predecessors_graph.inducts|thm"><span class="entity_def" id="IRGraph.predecessors_graph.simps|thm"><span class="entity_def" id="IRGraph.predecessors_graph.induct|thm"><span class="entity_def" id="IRGraph.predecessors_graph.cases|thm"><span class="entity_def" id="IRGraph.predecessors_graph.intros|thm"><span class="entity_def" id="IRGraph.predecessors_def|axiom"><span class="entity_def" id="IRGraph.predecessors_rel_def|axiom"><span class="entity_def" id="IRGraph.predecessors_sumC_def|axiom"><span class="entity_def" id="IRGraph.predecessors_graph_def|axiom"><span class="entity_def" id="IRGraph.predecessors_dom|const"><span class="entity_def" id="IRGraph.predecessors_rel|const"><span class="entity_def" id="IRGraph.predecessors_sumC|const"><span class="entity_def" id="IRGraph.predecessors_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.predecessors|const"><span>predecessors</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span>set</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>predecessors</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>j</span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.successor_edges|const"><span>successor_edges</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.nodes_of.elims|fact"><span class="entity_def" id="IRGraph.nodes_of.induct|fact"><span class="entity_def" id="IRGraph.nodes_of.simps|fact"><span class="entity_def" id="IRGraph.nodes_of.pelims|fact"><span class="entity_def" id="IRGraph.nodes_of.cases|fact"><span class="entity_def" id="IRGraph.nodes_of.termination|fact"><span class="entity_def" id="IRGraph.nodes_of.pinduct|fact"><span class="entity_def" id="IRGraph.nodes_of.psimps|fact"><span class="entity_def" id="IRGraph.nodes_of_rel.inducts|fact"><span class="entity_def" id="IRGraph.nodes_of_rel.simps|fact"><span class="entity_def" id="IRGraph.nodes_of_rel.induct|fact"><span class="entity_def" id="IRGraph.nodes_of_rel.cases|fact"><span class="entity_def" id="IRGraph.nodes_of_rel.intros|fact"><span class="entity_def" id="IRGraph.nodes_of_graph.inducts|fact"><span class="entity_def" id="IRGraph.nodes_of_graph.simps|fact"><span class="entity_def" id="IRGraph.nodes_of_graph.induct|fact"><span class="entity_def" id="IRGraph.nodes_of_graph.cases|fact"><span class="entity_def" id="IRGraph.nodes_of_graph.intros|fact"><span class="entity_def" id="IRGraph.nodes_of.elims|thm"><span class="entity_def" id="IRGraph.nodes_of.induct|thm"><span class="entity_def" id="IRGraph.nodes_of.simps|thm"><span class="entity_def" id="IRGraph.nodes_of.pelims|thm"><span class="entity_def" id="IRGraph.nodes_of.cases|thm"><span class="entity_def" id="IRGraph.nodes_of.termination|thm"><span class="entity_def" id="IRGraph.nodes_of.pinduct|thm"><span class="entity_def" id="IRGraph.nodes_of.psimps|thm"><span class="entity_def" id="IRGraph.nodes_of_rel.inducts|thm"><span class="entity_def" id="IRGraph.nodes_of_rel.simps|thm"><span class="entity_def" id="IRGraph.nodes_of_rel.induct|thm"><span class="entity_def" id="IRGraph.nodes_of_rel.cases|thm"><span class="entity_def" id="IRGraph.nodes_of_graph.inducts|thm"><span class="entity_def" id="IRGraph.nodes_of_graph.simps|thm"><span class="entity_def" id="IRGraph.nodes_of_graph.induct|thm"><span class="entity_def" id="IRGraph.nodes_of_graph.cases|thm"><span class="entity_def" id="IRGraph.nodes_of_graph.intros|thm"><span class="entity_def" id="IRGraph.nodes_of_def|axiom"><span class="entity_def" id="IRGraph.nodes_of_rel_def|axiom"><span class="entity_def" id="IRGraph.nodes_of_sumC_def|axiom"><span class="entity_def" id="IRGraph.nodes_of_graph_def|axiom"><span class="entity_def" id="IRGraph.nodes_of_dom|const"><span class="entity_def" id="IRGraph.nodes_of_rel|const"><span class="entity_def" id="IRGraph.nodes_of_sumC|const"><span class="entity_def" id="IRGraph.nodes_of_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.nodes_of|const"><span>nodes_of</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode|type"><span>IRNode</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>bool</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span>set</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>nodes_of</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>sel</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>nid</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>sel</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="bound"><span>nid</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.edge.elims|fact"><span class="entity_def" id="IRGraph.edge.induct|fact"><span class="entity_def" id="IRGraph.edge.simps|fact"><span class="entity_def" id="IRGraph.edge.pelims|fact"><span class="entity_def" id="IRGraph.edge.cases|fact"><span class="entity_def" id="IRGraph.edge.termination|fact"><span class="entity_def" id="IRGraph.edge.pinduct|fact"><span class="entity_def" id="IRGraph.edge.psimps|fact"><span class="entity_def" id="IRGraph.edge_rel.inducts|fact"><span class="entity_def" id="IRGraph.edge_rel.simps|fact"><span class="entity_def" id="IRGraph.edge_rel.induct|fact"><span class="entity_def" id="IRGraph.edge_rel.cases|fact"><span class="entity_def" id="IRGraph.edge_rel.intros|fact"><span class="entity_def" id="IRGraph.edge_graph.inducts|fact"><span class="entity_def" id="IRGraph.edge_graph.simps|fact"><span class="entity_def" id="IRGraph.edge_graph.induct|fact"><span class="entity_def" id="IRGraph.edge_graph.cases|fact"><span class="entity_def" id="IRGraph.edge_graph.intros|fact"><span class="entity_def" id="IRGraph.edge.elims|thm"><span class="entity_def" id="IRGraph.edge.induct|thm"><span class="entity_def" id="IRGraph.edge.simps|thm"><span class="entity_def" id="IRGraph.edge.pelims|thm"><span class="entity_def" id="IRGraph.edge.cases|thm"><span class="entity_def" id="IRGraph.edge.termination|thm"><span class="entity_def" id="IRGraph.edge.pinduct|thm"><span class="entity_def" id="IRGraph.edge.psimps|thm"><span class="entity_def" id="IRGraph.edge_rel.inducts|thm"><span class="entity_def" id="IRGraph.edge_rel.simps|thm"><span class="entity_def" id="IRGraph.edge_rel.induct|thm"><span class="entity_def" id="IRGraph.edge_rel.cases|thm"><span class="entity_def" id="IRGraph.edge_graph.inducts|thm"><span class="entity_def" id="IRGraph.edge_graph.simps|thm"><span class="entity_def" id="IRGraph.edge_graph.induct|thm"><span class="entity_def" id="IRGraph.edge_graph.cases|thm"><span class="entity_def" id="IRGraph.edge_graph.intros|thm"><span class="entity_def" id="IRGraph.edge_def|axiom"><span class="entity_def" id="IRGraph.edge_rel_def|axiom"><span class="entity_def" id="IRGraph.edge_sumC_def|axiom"><span class="entity_def" id="IRGraph.edge_graph_def|axiom"><span class="entity_def" id="IRGraph.edge_dom|const"><span class="entity_def" id="IRGraph.edge_rel|const"><span class="entity_def" id="IRGraph.edge_sumC|const"><span class="entity_def" id="IRGraph.edge_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.edge|const"><span>edge</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode|type"><span>IRNode</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>edge</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>sel</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>sel</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.filtered_inputs.elims|fact"><span class="entity_def" id="IRGraph.filtered_inputs.induct|fact"><span class="entity_def" id="IRGraph.filtered_inputs.simps|fact"><span class="entity_def" id="IRGraph.filtered_inputs.pelims|fact"><span class="entity_def" id="IRGraph.filtered_inputs.cases|fact"><span class="entity_def" id="IRGraph.filtered_inputs.termination|fact"><span class="entity_def" id="IRGraph.filtered_inputs.pinduct|fact"><span class="entity_def" id="IRGraph.filtered_inputs.psimps|fact"><span class="entity_def" id="IRGraph.filtered_inputs_rel.inducts|fact"><span class="entity_def" id="IRGraph.filtered_inputs_rel.simps|fact"><span class="entity_def" id="IRGraph.filtered_inputs_rel.induct|fact"><span class="entity_def" id="IRGraph.filtered_inputs_rel.cases|fact"><span class="entity_def" id="IRGraph.filtered_inputs_rel.intros|fact"><span class="entity_def" id="IRGraph.filtered_inputs_graph.inducts|fact"><span class="entity_def" id="IRGraph.filtered_inputs_graph.simps|fact"><span class="entity_def" id="IRGraph.filtered_inputs_graph.induct|fact"><span class="entity_def" id="IRGraph.filtered_inputs_graph.cases|fact"><span class="entity_def" id="IRGraph.filtered_inputs_graph.intros|fact"><span class="entity_def" id="IRGraph.filtered_inputs.elims|thm"><span class="entity_def" id="IRGraph.filtered_inputs.induct|thm"><span class="entity_def" id="IRGraph.filtered_inputs.simps|thm"><span class="entity_def" id="IRGraph.filtered_inputs.pelims|thm"><span class="entity_def" id="IRGraph.filtered_inputs.cases|thm"><span class="entity_def" id="IRGraph.filtered_inputs.termination|thm"><span class="entity_def" id="IRGraph.filtered_inputs.pinduct|thm"><span class="entity_def" id="IRGraph.filtered_inputs.psimps|thm"><span class="entity_def" id="IRGraph.filtered_inputs_rel.inducts|thm"><span class="entity_def" id="IRGraph.filtered_inputs_rel.simps|thm"><span class="entity_def" id="IRGraph.filtered_inputs_rel.induct|thm"><span class="entity_def" id="IRGraph.filtered_inputs_rel.cases|thm"><span class="entity_def" id="IRGraph.filtered_inputs_graph.inducts|thm"><span class="entity_def" id="IRGraph.filtered_inputs_graph.simps|thm"><span class="entity_def" id="IRGraph.filtered_inputs_graph.induct|thm"><span class="entity_def" id="IRGraph.filtered_inputs_graph.cases|thm"><span class="entity_def" id="IRGraph.filtered_inputs_graph.intros|thm"><span class="entity_def" id="IRGraph.filtered_inputs_def|axiom"><span class="entity_def" id="IRGraph.filtered_inputs_rel_def|axiom"><span class="entity_def" id="IRGraph.filtered_inputs_sumC_def|axiom"><span class="entity_def" id="IRGraph.filtered_inputs_graph_def|axiom"><span class="entity_def" id="IRGraph.filtered_inputs_dom|const"><span class="entity_def" id="IRGraph.filtered_inputs_rel|const"><span class="entity_def" id="IRGraph.filtered_inputs_sumC|const"><span class="entity_def" id="IRGraph.filtered_inputs_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.filtered_inputs|const"><span>filtered_inputs</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode|type"><span>IRNode</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>bool</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span>list</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>filtered_inputs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>filter</span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>∘</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.inputs_of|const"><span>inputs_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.filtered_successors.elims|fact"><span class="entity_def" id="IRGraph.filtered_successors.induct|fact"><span class="entity_def" id="IRGraph.filtered_successors.simps|fact"><span class="entity_def" id="IRGraph.filtered_successors.pelims|fact"><span class="entity_def" id="IRGraph.filtered_successors.cases|fact"><span class="entity_def" id="IRGraph.filtered_successors.termination|fact"><span class="entity_def" id="IRGraph.filtered_successors.pinduct|fact"><span class="entity_def" id="IRGraph.filtered_successors.psimps|fact"><span class="entity_def" id="IRGraph.filtered_successors_rel.inducts|fact"><span class="entity_def" id="IRGraph.filtered_successors_rel.simps|fact"><span class="entity_def" id="IRGraph.filtered_successors_rel.induct|fact"><span class="entity_def" id="IRGraph.filtered_successors_rel.cases|fact"><span class="entity_def" id="IRGraph.filtered_successors_rel.intros|fact"><span class="entity_def" id="IRGraph.filtered_successors_graph.inducts|fact"><span class="entity_def" id="IRGraph.filtered_successors_graph.simps|fact"><span class="entity_def" id="IRGraph.filtered_successors_graph.induct|fact"><span class="entity_def" id="IRGraph.filtered_successors_graph.cases|fact"><span class="entity_def" id="IRGraph.filtered_successors_graph.intros|fact"><span class="entity_def" id="IRGraph.filtered_successors.elims|thm"><span class="entity_def" id="IRGraph.filtered_successors.induct|thm"><span class="entity_def" id="IRGraph.filtered_successors.simps|thm"><span class="entity_def" id="IRGraph.filtered_successors.pelims|thm"><span class="entity_def" id="IRGraph.filtered_successors.cases|thm"><span class="entity_def" id="IRGraph.filtered_successors.termination|thm"><span class="entity_def" id="IRGraph.filtered_successors.pinduct|thm"><span class="entity_def" id="IRGraph.filtered_successors.psimps|thm"><span class="entity_def" id="IRGraph.filtered_successors_rel.inducts|thm"><span class="entity_def" id="IRGraph.filtered_successors_rel.simps|thm"><span class="entity_def" id="IRGraph.filtered_successors_rel.induct|thm"><span class="entity_def" id="IRGraph.filtered_successors_rel.cases|thm"><span class="entity_def" id="IRGraph.filtered_successors_graph.inducts|thm"><span class="entity_def" id="IRGraph.filtered_successors_graph.simps|thm"><span class="entity_def" id="IRGraph.filtered_successors_graph.induct|thm"><span class="entity_def" id="IRGraph.filtered_successors_graph.cases|thm"><span class="entity_def" id="IRGraph.filtered_successors_graph.intros|thm"><span class="entity_def" id="IRGraph.filtered_successors_def|axiom"><span class="entity_def" id="IRGraph.filtered_successors_rel_def|axiom"><span class="entity_def" id="IRGraph.filtered_successors_sumC_def|axiom"><span class="entity_def" id="IRGraph.filtered_successors_graph_def|axiom"><span class="entity_def" id="IRGraph.filtered_successors_dom|const"><span class="entity_def" id="IRGraph.filtered_successors_rel|const"><span class="entity_def" id="IRGraph.filtered_successors_sumC|const"><span class="entity_def" id="IRGraph.filtered_successors_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.filtered_successors|const"><span>filtered_successors</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode|type"><span>IRNode</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>bool</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span>list</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>filtered_successors</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>filter</span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>∘</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.successors_of|const"><span>successors_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.filtered_usages.elims|fact"><span class="entity_def" id="IRGraph.filtered_usages.induct|fact"><span class="entity_def" id="IRGraph.filtered_usages.simps|fact"><span class="entity_def" id="IRGraph.filtered_usages.pelims|fact"><span class="entity_def" id="IRGraph.filtered_usages.cases|fact"><span class="entity_def" id="IRGraph.filtered_usages.termination|fact"><span class="entity_def" id="IRGraph.filtered_usages.pinduct|fact"><span class="entity_def" id="IRGraph.filtered_usages.psimps|fact"><span class="entity_def" id="IRGraph.filtered_usages_rel.inducts|fact"><span class="entity_def" id="IRGraph.filtered_usages_rel.simps|fact"><span class="entity_def" id="IRGraph.filtered_usages_rel.induct|fact"><span class="entity_def" id="IRGraph.filtered_usages_rel.cases|fact"><span class="entity_def" id="IRGraph.filtered_usages_rel.intros|fact"><span class="entity_def" id="IRGraph.filtered_usages_graph.inducts|fact"><span class="entity_def" id="IRGraph.filtered_usages_graph.simps|fact"><span class="entity_def" id="IRGraph.filtered_usages_graph.induct|fact"><span class="entity_def" id="IRGraph.filtered_usages_graph.cases|fact"><span class="entity_def" id="IRGraph.filtered_usages_graph.intros|fact"><span class="entity_def" id="IRGraph.filtered_usages.elims|thm"><span class="entity_def" id="IRGraph.filtered_usages.induct|thm"><span class="entity_def" id="IRGraph.filtered_usages.simps|thm"><span class="entity_def" id="IRGraph.filtered_usages.pelims|thm"><span class="entity_def" id="IRGraph.filtered_usages.cases|thm"><span class="entity_def" id="IRGraph.filtered_usages.termination|thm"><span class="entity_def" id="IRGraph.filtered_usages.pinduct|thm"><span class="entity_def" id="IRGraph.filtered_usages.psimps|thm"><span class="entity_def" id="IRGraph.filtered_usages_rel.inducts|thm"><span class="entity_def" id="IRGraph.filtered_usages_rel.simps|thm"><span class="entity_def" id="IRGraph.filtered_usages_rel.induct|thm"><span class="entity_def" id="IRGraph.filtered_usages_rel.cases|thm"><span class="entity_def" id="IRGraph.filtered_usages_graph.inducts|thm"><span class="entity_def" id="IRGraph.filtered_usages_graph.simps|thm"><span class="entity_def" id="IRGraph.filtered_usages_graph.induct|thm"><span class="entity_def" id="IRGraph.filtered_usages_graph.cases|thm"><span class="entity_def" id="IRGraph.filtered_usages_graph.intros|thm"><span class="entity_def" id="IRGraph.filtered_usages_def|axiom"><span class="entity_def" id="IRGraph.filtered_usages_rel_def|axiom"><span class="entity_def" id="IRGraph.filtered_usages_sumC_def|axiom"><span class="entity_def" id="IRGraph.filtered_usages_graph_def|axiom"><span class="entity_def" id="IRGraph.filtered_usages_dom|const"><span class="entity_def" id="IRGraph.filtered_usages_rel|const"><span class="entity_def" id="IRGraph.filtered_usages_sumC|const"><span class="entity_def" id="IRGraph.filtered_usages_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.filtered_usages|const"><span>filtered_usages</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode|type"><span>IRNode</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>bool</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span>set</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>filtered_usages</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>n</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.usages|const"><span>usages</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.is_empty.elims|fact"><span class="entity_def" id="IRGraph.is_empty.induct|fact"><span class="entity_def" id="IRGraph.is_empty.simps|fact"><span class="entity_def" id="IRGraph.is_empty.pelims|fact"><span class="entity_def" id="IRGraph.is_empty.cases|fact"><span class="entity_def" id="IRGraph.is_empty.termination|fact"><span class="entity_def" id="IRGraph.is_empty.pinduct|fact"><span class="entity_def" id="IRGraph.is_empty.psimps|fact"><span class="entity_def" id="IRGraph.is_empty_rel.inducts|fact"><span class="entity_def" id="IRGraph.is_empty_rel.simps|fact"><span class="entity_def" id="IRGraph.is_empty_rel.induct|fact"><span class="entity_def" id="IRGraph.is_empty_rel.cases|fact"><span class="entity_def" id="IRGraph.is_empty_rel.intros|fact"><span class="entity_def" id="IRGraph.is_empty_graph.inducts|fact"><span class="entity_def" id="IRGraph.is_empty_graph.simps|fact"><span class="entity_def" id="IRGraph.is_empty_graph.induct|fact"><span class="entity_def" id="IRGraph.is_empty_graph.cases|fact"><span class="entity_def" id="IRGraph.is_empty_graph.intros|fact"><span class="entity_def" id="IRGraph.is_empty.elims(3)|thm"><span class="entity_def" id="IRGraph.is_empty.elims(2)|thm"><span class="entity_def" id="IRGraph.is_empty.elims(1)|thm"><span class="entity_def" id="IRGraph.is_empty.induct|thm"><span class="entity_def" id="IRGraph.is_empty.simps|thm"><span class="entity_def" id="IRGraph.is_empty.pelims(3)|thm"><span class="entity_def" id="IRGraph.is_empty.pelims(2)|thm"><span class="entity_def" id="IRGraph.is_empty.pelims(1)|thm"><span class="entity_def" id="IRGraph.is_empty.cases|thm"><span class="entity_def" id="IRGraph.is_empty.termination|thm"><span class="entity_def" id="IRGraph.is_empty.pinduct|thm"><span class="entity_def" id="IRGraph.is_empty.psimps|thm"><span class="entity_def" id="IRGraph.is_empty_rel.inducts|thm"><span class="entity_def" id="IRGraph.is_empty_rel.simps|thm"><span class="entity_def" id="IRGraph.is_empty_rel.induct|thm"><span class="entity_def" id="IRGraph.is_empty_rel.cases|thm"><span class="entity_def" id="IRGraph.is_empty_graph.inducts|thm"><span class="entity_def" id="IRGraph.is_empty_graph.simps|thm"><span class="entity_def" id="IRGraph.is_empty_graph.induct|thm"><span class="entity_def" id="IRGraph.is_empty_graph.cases|thm"><span class="entity_def" id="IRGraph.is_empty_graph.intros|thm"><span class="entity_def" id="IRGraph.is_empty_def|axiom"><span class="entity_def" id="IRGraph.is_empty_rel_def|axiom"><span class="entity_def" id="IRGraph.is_empty_sumC_def|axiom"><span class="entity_def" id="IRGraph.is_empty_graph_def|axiom"><span class="entity_def" id="IRGraph.is_empty_dom|const"><span class="entity_def" id="IRGraph.is_empty_rel|const"><span class="entity_def" id="IRGraph.is_empty_sumC|const"><span class="entity_def" id="IRGraph.is_empty_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.is_empty|const"><span>is_empty</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>bool</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_empty</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.any_usage.elims|fact"><span class="entity_def" id="IRGraph.any_usage.induct|fact"><span class="entity_def" id="IRGraph.any_usage.simps|fact"><span class="entity_def" id="IRGraph.any_usage.pelims|fact"><span class="entity_def" id="IRGraph.any_usage.cases|fact"><span class="entity_def" id="IRGraph.any_usage.termination|fact"><span class="entity_def" id="IRGraph.any_usage.pinduct|fact"><span class="entity_def" id="IRGraph.any_usage.psimps|fact"><span class="entity_def" id="IRGraph.any_usage_rel.inducts|fact"><span class="entity_def" id="IRGraph.any_usage_rel.simps|fact"><span class="entity_def" id="IRGraph.any_usage_rel.induct|fact"><span class="entity_def" id="IRGraph.any_usage_rel.cases|fact"><span class="entity_def" id="IRGraph.any_usage_rel.intros|fact"><span class="entity_def" id="IRGraph.any_usage_graph.inducts|fact"><span class="entity_def" id="IRGraph.any_usage_graph.simps|fact"><span class="entity_def" id="IRGraph.any_usage_graph.induct|fact"><span class="entity_def" id="IRGraph.any_usage_graph.cases|fact"><span class="entity_def" id="IRGraph.any_usage_graph.intros|fact"><span class="entity_def" id="IRGraph.any_usage.elims|thm"><span class="entity_def" id="IRGraph.any_usage.induct|thm"><span class="entity_def" id="IRGraph.any_usage.simps|thm"><span class="entity_def" id="IRGraph.any_usage.pelims|thm"><span class="entity_def" id="IRGraph.any_usage.cases|thm"><span class="entity_def" id="IRGraph.any_usage.termination|thm"><span class="entity_def" id="IRGraph.any_usage.pinduct|thm"><span class="entity_def" id="IRGraph.any_usage.psimps|thm"><span class="entity_def" id="IRGraph.any_usage_rel.inducts|thm"><span class="entity_def" id="IRGraph.any_usage_rel.simps|thm"><span class="entity_def" id="IRGraph.any_usage_rel.induct|thm"><span class="entity_def" id="IRGraph.any_usage_rel.cases|thm"><span class="entity_def" id="IRGraph.any_usage_graph.inducts|thm"><span class="entity_def" id="IRGraph.any_usage_graph.simps|thm"><span class="entity_def" id="IRGraph.any_usage_graph.induct|thm"><span class="entity_def" id="IRGraph.any_usage_graph.cases|thm"><span class="entity_def" id="IRGraph.any_usage_graph.intros|thm"><span class="entity_def" id="IRGraph.any_usage_def|axiom"><span class="entity_def" id="IRGraph.any_usage_rel_def|axiom"><span class="entity_def" id="IRGraph.any_usage_sumC_def|axiom"><span class="entity_def" id="IRGraph.any_usage_graph_def|axiom"><span class="entity_def" id="IRGraph.any_usage_dom|const"><span class="entity_def" id="IRGraph.any_usage_rel|const"><span class="entity_def" id="IRGraph.any_usage_sumC|const"><span class="entity_def" id="IRGraph.any_usage_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.any_usage|const"><span>any_usage</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>any_usage</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>hd</span><span> </span><span class="main"><span>(</span></span><span>sorted_list_of_set</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.usages|const"><span>usages</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IRGraph.ids_some|fact"><span class="entity_def" id="IRGraph.ids_some|thm"><span>ids_some</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>⟷</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5008..5012">that</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids.rep_eq|fact"><span>ids.rep_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind.rep_eq|fact"><span>kind.rep_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span> </span><span class="main"><span>⟶</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.with_default.simps|fact"><span>with_default.simps</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind_def|fact"><span>kind_def</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids_def|fact"><span>ids_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5181..5183">by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph.Rep_IRGraph|const"><span>Rep_IRGraph</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>None</span><span>"</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#offset_5181..5183"><span>this</span></a><span> </span><a class="entity_ref" href="IRGraph.html#offset_5008..5012"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5266..5271">lemma</span></span></span><span> </span><span class="entity_def" id="IRGraph.not_in_g|fact"><span class="entity_def" id="IRGraph.not_in_g|thm"><span>not_in_g</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>nid</span></span><span> </span><span class="main"><span>∉</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>nid</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#offset_5266..5271"><span>assms</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids_some|fact"><span>ids_some</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IRGraph.valid_creation|fact"><span class="entity_def" id="IRGraph.valid_creation|thm"><span>valid_creation</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟷</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph.Rep_IRGraph|const"><span>Rep_IRGraph</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph.Abs_IRGraph|const"><span>Abs_IRGraph</span></a><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph.Abs_IRGraph_inverse|fact"><span>Abs_IRGraph_inverse</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph.Rep_IRGraph|fact"><span>Rep_IRGraph</span></a><span> </span><span>mem_Collect_eq</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph.Rep_IRGraph|fact"><span>Rep_IRGraph</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids.rep_eq|fact"><span>ids.rep_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph|const"><span>irgraph</span></a><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>finite_dom_map_of</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph.Abs_IRGraph|const"><span>Abs_IRGraph</span></a><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>nid</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>dom</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∄</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>nid</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Some</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span class="main"><span>,</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids.rep_eq|fact"><span>ids.rep_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph.Abs_IRGraph|const"><span>Abs_IRGraph</span></a><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>of</span></span><span> None </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span> </span><span class="main"><span>|</span></span><span> Some </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>fst</span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind.rep_eq|fact"><span>kind.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.stamp|const"><span>stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph.Abs_IRGraph|const"><span>Abs_IRGraph</span></a><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>of</span></span><span> None </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.Stamp.IllegalStamp|const"><span>IllegalStamp</span></a><span> </span><span class="main"><span>|</span></span><span> Some </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>snd</span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.stamp.abs_eq|fact"><span>stamp.abs_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.stamp.rep_eq|fact"><span>stamp.rep_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph|const"><span>irgraph</span></a><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span>fst</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.no_node|const"><span>no_node</span></a><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph|fact"><span>irgraph</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph|const"><span>irgraph</span></a><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>nid</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="main"><span>(</span></span><span>map_of</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.no_node|const"><span>no_node</span></a><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>nid</span></span><span> </span><span class="keyword1"><span>of</span></span><span> None </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span> </span><span class="main"><span>|</span></span><span> Some </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>fst</span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph.rep_eq|fact"><span>irgraph.rep_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind.transfer|fact"><span>kind.transfer</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind.rep_eq|fact"><span>kind.rep_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.stamp|const"><span>stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph|const"><span>irgraph</span></a><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>nid</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="main"><span>(</span></span><span>map_of</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.no_node|const"><span>no_node</span></a><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>nid</span></span><span> </span><span class="keyword1"><span>of</span></span><span> None </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.Stamp.IllegalStamp|const"><span>IllegalStamp</span></a><span> </span><span class="main"><span>|</span></span><span> Some </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>snd</span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph.rep_eq|fact"><span>irgraph.rep_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.stamp.transfer|fact"><span>stamp.transfer</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.stamp.rep_eq|fact"><span>stamp.rep_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IRGraph.map_of_upd|fact"><span class="entity_def" id="IRGraph.map_of_upd|thm"><span>map_of_upd</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>map_of</span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>↦</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>map_of</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> this proof should be simplier </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.replace_node|const"><span>replace_node</span></a><span> </span><span class="free"><span>nid</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph|const"><span>irgraph</span></a><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph|const"><span>irgraph</span></a><span> </span><span class="main"><span>(</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>nid</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>fst</span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph.Rep_IRGraph_inject|fact"><span>Rep_IRGraph_inject</span></a><span> </span><span>filter.simps</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph.abs_eq|fact"><span>irgraph.abs_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.no_node.simps|fact"><span>no_node.simps</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.replace_node.rep_eq|fact"><span>replace_node.rep_eq</span></a><span> </span><span>snd_conv</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph_def|fact"><span>irgraph_def</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.replace_node_def|fact"><span>replace_node_def</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.no_node.simps|fact"><span>no_node.simps</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph.Rep_IRGraph|fact"><span>Rep_IRGraph</span></a><span> </span><span>comp_apply</span><span> </span><span>eq_onp_same_args</span><span> </span><span>filter.simps</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>id_def</span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph.rep_eq|fact"><span>irgraph.rep_eq</span></a><span> </span><span>map_fun_apply</span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.map_of_upd|fact"><span>map_of_upd</span></a><span> </span><span>mem_Collect_eq</span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.no_node.elims|fact"><span>no_node.elims</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.replace_node.abs_eq|fact"><span>replace_node.abs_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.replace_node_def|fact"><span>replace_node_def</span></a><span> </span><span>snd_eqD</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.add_node|const"><span>add_node</span></a><span> </span><span class="free"><span>nid</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph|const"><span>irgraph</span></a><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph|const"><span>irgraph</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>nid</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph.Rep_IRGraph_inject|fact"><span>Rep_IRGraph_inject</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.add_node.rep_eq|fact"><span>add_node.rep_eq</span></a><span> </span><span>filter.simps</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph.rep_eq|fact"><span>irgraph.rep_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.map_of_upd|fact"><span>map_of_upd</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.no_node.simps|fact"><span>no_node.simps</span></a><span> </span><span>snd_conv</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IRGraph.add_node_lookup|fact"><span class="entity_def" id="IRGraph.add_node_lookup|thm"><span>add_node_lookup</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>gup</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.add_node|const"><span>add_node</span></a><span> </span><span class="free"><span>nid</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>⟶</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span> </span><span class="keyword1"><span>then</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span>gup</span></span><span> </span><span class="free"><span>nid</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.stamp|const"><span>stamp</span></a><span> </span><span class="free"><span>gup</span></span><span> </span><span class="free"><span>nid</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span>gup</span></span><span> </span><span class="free"><span>nid</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>nid</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.add_node.rep_eq|fact"><span>add_node.rep_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind.rep_eq|fact"><span>kind.rep_eq</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind.rep_eq|fact"><span>kind.rep_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.add_node.rep_eq|fact"><span>add_node.rep_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.stamp.rep_eq|fact"><span>stamp.rep_eq</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IRGraph.remove_node_lookup|fact"><span class="entity_def" id="IRGraph.remove_node_lookup|thm"><span>remove_node_lookup</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>gup</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.remove_node|const"><span>remove_node</span></a><span> </span><span class="free"><span>nid</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span>gup</span></span><span> </span><span class="free"><span>nid</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.stamp|const"><span>stamp</span></a><span> </span><span class="free"><span>gup</span></span><span> </span><span class="free"><span>nid</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.Stamp.IllegalStamp|const"><span>IllegalStamp</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind.rep_eq|fact"><span>kind.rep_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.remove_node.rep_eq|fact"><span>remove_node.rep_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.stamp.rep_eq|fact"><span>stamp.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IRGraph.replace_node_lookup|fact"><span class="entity_def" id="IRGraph.replace_node_lookup|thm"><span>replace_node_lookup</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>gup</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.replace_node|const"><span>replace_node</span></a><span> </span><span class="free"><span>nid</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.NoNode|const"><span>NoNode</span></a><span> </span><span class="main"><span>⟶</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span>gup</span></span><span> </span><span class="free"><span>nid</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.stamp|const"><span>stamp</span></a><span> </span><span class="free"><span>gup</span></span><span> </span><span class="free"><span>nid</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.replace_node.rep_eq|fact"><span>replace_node.rep_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind.rep_eq|fact"><span>kind.rep_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.stamp.rep_eq|fact"><span>stamp.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IRGraph.replace_node_unchanged|fact"><span class="entity_def" id="IRGraph.replace_node_unchanged|thm"><span>replace_node_unchanged</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>gup</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.replace_node|const"><span>replace_node</span></a><span> </span><span class="free"><span>nid</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>nid</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.ids|const"><span>ids</span></a><span> </span><span class="free"><span>gup</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="free"><span>gup</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.kind.rep_eq|fact"><span>kind.rep_eq</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.replace_node.rep_eq|fact"><span>replace_node.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"</span><span>Example Graphs</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"</span><span>Example 1: empty graph (just a start and end node)</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.start_end_graph_def|fact"><span class="entity_def" id="IRGraph.start_end_graph_def|thm"><span class="entity_def" id="IRGraph.start_end_graph_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.start_end_graph|const"><span>start_end_graph</span></span></span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>start_end_graph</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph|const"><span>irgraph</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.StartNode|const"><span>StartNode</span></a><span> </span><span>None</span><span> </span><span class="main"><span>1</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.Stamp.VoidStamp|const"><span>VoidStamp</span></a><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.ReturnNode|const"><span>ReturnNode</span></a><span> </span><span>None</span><span> </span><span>None</span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.Stamp.VoidStamp|const"><span>VoidStamp</span></a><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Example 2:
</span><span>  public static int sq(int x) { return x * x; }
</span><span>
</span><span>             [1 P(0)]
</span><span>               \ /
</span><span>  [0 Start]   [4 *]
</span><span>       |      /
</span><span>       V     /
</span><span>      [5 Return]</span><span>
</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="IRGraph.eg2_sq_def|fact"><span class="entity_def" id="IRGraph.eg2_sq_def|thm"><span class="entity_def" id="IRGraph.eg2_sq_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IRGraph.eg2_sq|const"><span>eg2_sq</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.IRGraph|type"><span>IRGraph</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eg2_sq</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.irgraph|const"><span>irgraph</span></a><span> </span><span class="main"><span>[</span></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.StartNode|const"><span>StartNode</span></a><span> </span><span>None</span><span> </span><span class="numeral"><span>5</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.Stamp.VoidStamp|const"><span>VoidStamp</span></a><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.ParameterNode|const"><span>ParameterNode</span></a><span> </span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.default_stamp|const"><span>default_stamp</span></a><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
    </span><span class="main"><span>(</span></span><span class="numeral"><span>4</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.MulNode|const"><span>MulNode</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.default_stamp|const"><span>default_stamp</span></a><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
    </span><span class="main"><span>(</span></span><span class="numeral"><span>5</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="IRNodes.html#IRNodes.IRNode.ReturnNode|const"><span>ReturnNode</span></a><span> </span><span class="main"><span>(</span></span><span>Some</span><span> </span><span class="numeral"><span>4</span></span><span class="main"><span>)</span></span><span> </span><span>None</span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Stamp.html#Stamp.default_stamp|const"><span>default_stamp</span></a><span class="main"><span>)</span></span><span>
   </span><span class="main"><span>]</span></span><span>"</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> TODO: to include the float type (used by stamps) we need
         a code equation for float_of but it is not clear how
         to implement this correctly
lemma[code]: "float_of n = 0"
</span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Test the code generation. </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.input_edges|const"><span>input_edges</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.eg2_sq|const"><span>eg2_sq</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IRGraph.html#IRGraph.usages|const"><span>usages</span></a><span> </span><a class="entity_ref" href="IRGraph.html#IRGraph.eg2_sq|const"><span>eg2_sq</span></a><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span></pre>
</body>

</html>