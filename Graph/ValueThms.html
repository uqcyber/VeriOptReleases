<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory ValueThms</title>
</head>


<body>
<div class="head">
<h1>Theory ValueThms</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Fixed-width Word Theories</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>ValueThms</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Values.html"><span>Values</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> declare [[show_types=true]] </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Support Lemmas for Upper/Lower Bounds</span><span>›</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> these two were weirdly hard to prove given it should be by definition </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.size32|fact"><span class="entity_def" id="ValueThms.size32|thm"><span>size32</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>32</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>32</span></span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>size_word.rep_eq</span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>One_nat_def</span><span> </span><span>add.right_neutral</span><span> </span><span>add_Suc_right</span><span> </span><span>len_of_numeral_defs</span><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span>len_of_numeral_defs</span><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span>mult.right_neutral</span><span> </span><span>mult_Suc_right</span><span> </span><span>numeral_2_eq_2</span><span> </span><span>numeral_Bit0</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>mult.commute</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.size64|fact"><span class="entity_def" id="ValueThms.size64|thm"><span>size64</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>64</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>64</span></span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>size_word.rep_eq</span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>One_nat_def</span><span> </span><span>add.right_neutral</span><span> </span><span>add_Suc_right</span><span> </span><span>len_of_numeral_defs</span><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span>len_of_numeral_defs</span><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span>mult.right_neutral</span><span> </span><span>mult_Suc_right</span><span> </span><span>numeral_2_eq_2</span><span> </span><span>numeral_Bit0</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>mult.commute</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Nb. Word.sint_ge and sint_lt subsume these lemmas.
lemma signed_int_bottom32: "-(((2::int) ^ 31)) ≤ sint (v::int32)"
  using sint_range_size size32
  by (smt (verit, ccfv_SIG) One_nat_def Suc_pred add_Suc add_Suc_right eval_nat_numeral(3) nat.inject numeral_2_eq_2 numeral_Bit0 numeral_Bit1 zero_less_numeral)

lemma signed_int_top32: "(2 ^ 31) - 1 ≥ sint (v::int32)"
  using sint_range_size size32
  by (smt (verit, ccfv_SIG) One_nat_def Suc_pred add_Suc add_Suc_right eval_nat_numeral(3) nat.inject numeral_2_eq_2 numeral_Bit0 numeral_Bit1 zero_less_numeral)
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1368..1373">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.lower_bounds_equiv|fact"><span class="entity_def" id="ValueThms.lower_bounds_equiv|thm"><span>lower_bounds_equiv</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_1368..1373"><span>assms</span></a><span> </span><span>int_power_div_base</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1515..1520">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.upper_bounds_equiv|fact"><span class="entity_def" id="ValueThms.upper_bounds_equiv|thm"><span>upper_bounds_equiv</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_1515..1520"><span>assms</span></a><span> </span><span>int_power_div_base</span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Some min/max bounds for 64-bit words</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.bit_bounds_min64|fact"><span class="entity_def" id="ValueThms.bit_bounds_min64|thm"><span>bit_bounds_min64</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>fst</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Values.html#Values.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="numeral"><span>64</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="main"><span>(</span></span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Values.html#Values.int64|type"><span>int64</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Values.html#Values.bit_bounds.simps|fact"><span>bit_bounds.simps</span></a><span> </span><span>fst_def</span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sint_ge</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.bit_bounds_max64|fact"><span class="entity_def" id="ValueThms.bit_bounds_max64|thm"><span>bit_bounds_max64</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>snd</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Values.html#Values.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="numeral"><span>64</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span class="main"><span>(</span></span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Values.html#Values.int64|type"><span>int64</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Values.html#Values.bit_bounds.simps|fact"><span>bit_bounds.simps</span></a><span> </span><span>fst_def</span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sint_lt</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Extend these min/max bounds to extracting smaller signed words using $signed\_take\_bit$.</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Note: we could use signed to convert between bit-widths, instead of 
</span><span>  signed\_take\_bit.  But that would have to be done separately for each bit-width type.</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="numeral"><span>7</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>128</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="Values.html#Values.int8|type"><span>int8</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>ML_val</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span>signed_take_bit_decr_length_iff</span><span class="antiquote"><span>}</span></span></span></span><span>›</span></span><span>
</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="operator"><span>show_types</span></span><span class="main"><span class="main"><span>=</span></span></span><span class="quasi_keyword"><span>true</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>ML_val</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span>signed_take_bit_int_less_exp</span><span class="antiquote"><span>}</span></span></span></span><span>›</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.signed_take_bit_int_less_exp_word|fact"><span class="entity_def" id="ValueThms.signed_take_bit_int_less_exp_word|thm"><span>signed_take_bit_int_less_exp_word</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>ival</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>transfer</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>not_take_bit_negative</span><span> </span><span>signed_take_bit_eq_take_bit_shift</span><span> 
     </span><span>signed_take_bit_int_less_exp</span><span> </span><span>take_bit_int_greater_self_iff</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.signed_take_bit_int_greater_eq_minus_exp_word|fact"><span class="entity_def" id="ValueThms.signed_take_bit_int_greater_eq_minus_exp_word|thm"><span>signed_take_bit_int_greater_eq_minus_exp_word</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>ival</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>transfer</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>signed_take_bit_int_greater_eq_minus_exp</span><span> 
     </span><span>signed_take_bit_int_greater_eq_self_iff</span><span> </span><span>signed_take_bit_int_less_exp</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3051..3056">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.signed_take_bit_range|fact"><span class="entity_def" id="ValueThms.signed_take_bit_range|thm"><span>signed_take_bit_range</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>sint</span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>ival</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.signed_take_bit_int_greater_eq_minus_exp_word|fact"><span>signed_take_bit_int_greater_eq_minus_exp_word</span></a><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.signed_take_bit_int_less_exp_word|fact"><span>signed_take_bit_int_less_exp_word</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_3051..3056"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>A $bit\_bounds$ version of the above lemma.</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3391..3396">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.signed_take_bit_bounds|fact"><span class="entity_def" id="ValueThms.signed_take_bit_bounds|thm"><span>signed_take_bit_bounds</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>sint</span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ival</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>fst</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Values.html#Values.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>snd</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Values.html#Values.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_3391..3396"><span>assms</span></a><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.signed_take_bit_range|fact"><span>signed_take_bit_range</span></a><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.lower_bounds_equiv|fact"><span>lower_bounds_equiv</span></a><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.upper_bounds_equiv|fact"><span>upper_bounds_equiv</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Values.html#Values.bit_bounds.simps|fact"><span>bit_bounds.simps</span></a><span> </span><span>fst_conv</span><span> </span><span>less_imp_diff_less</span><span> </span><span>nat_less_le</span><span> </span><span>sint_ge</span><span> </span><span>sint_lt</span><span> </span><span>snd_conv</span><span> </span><span>zle_diff1_eq</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> It is helpful to have the 64-bit instance of the above, to avoid uninstantiated types
   when apply it backwards. </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3917..3922">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.signed_take_bit_bounds64|fact"><span class="entity_def" id="ValueThms.signed_take_bit_bounds64|thm"><span>signed_take_bit_bounds64</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Values.html#Values.int64|type"><span>int64</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="numeral"><span>64</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>sint</span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ival</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>fst</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Values.html#Values.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>snd</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Values.html#Values.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_3917..3922"><span>assms</span></a><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.signed_take_bit_bounds|fact"><span>signed_take_bit_bounds</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.size64|fact"><span>size64</span></a><span> </span><span>word_size</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4193..4198">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.int_signed_value_bounds|fact"><span class="entity_def" id="ValueThms.int_signed_value_bounds|thm"><span>int_signed_value_bounds</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b1</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="numeral"><span>64</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>b1</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>fst</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Values.html#Values.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="free"><span>b1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><a class="entity_ref" href="Values.html#Values.int_signed_value|const"><span>int_signed_value</span></a><span> </span><span class="free"><span>b1</span></span><span> </span><span class="free"><span>v2</span></span><span> </span><span class="main"><span>∧</span></span><span>
         </span><a class="entity_ref" href="Values.html#Values.int_signed_value|const"><span>int_signed_value</span></a><span> </span><span class="free"><span>b1</span></span><span> </span><span class="free"><span>v2</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>snd</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Values.html#Values.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="free"><span>b1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_4193..4198"><span>assms</span></a><span> </span><a class="entity_ref" href="Values.html#Values.int_signed_value.simps|fact"><span>int_signed_value.simps</span></a><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.signed_take_bit_bounds64|fact"><span>signed_take_bit_bounds64</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4446..4451">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.int_signed_value_range|fact"><span class="entity_def" id="ValueThms.int_signed_value_range|thm"><span>int_signed_value_range</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Values.html#Values.int64|type"><span>int64</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Values.html#Values.int_signed_value|const"><span>int_signed_value</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>ival</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.signed_take_bit_range|fact"><span>signed_take_bit_range</span></a><span> </span><a class="entity_ref" href="ValueThms.html#offset_4446..4451"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>One_nat_def</span><span> </span><span>diff_less</span><span> </span><a class="entity_ref" href="Values.html#Values.int_signed_value.elims|fact"><span>int_signed_value.elims</span></a><span> </span><span>len_gt_0</span><span> </span><span>len_num1</span><span> </span><span>power_less_imp_less_exp</span><span> </span><span>power_strict_increasing</span><span> </span><span>sint_greater_eq</span><span> </span><span>sint_less</span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Some lemmas about unsigned words smaller than 64-bit, for zero-extend operators.</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4887..4892">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.take_bit_smaller_range|fact"><span class="entity_def" id="ValueThms.take_bit_smaller_range|thm"><span>take_bit_smaller_range</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>sint</span><span class="main"><span>(</span></span><span>take_bit</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>ival</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_4887..4892"><span>assms</span></a><span> </span><span>signed_take_bit_eq</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5099..5104">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.take_bit_same_size_nochange|fact"><span class="entity_def" id="ValueThms.take_bit_same_size_nochange|thm"><span>take_bit_same_size_nochange</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>take_bit</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>ival</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_5099..5104"><span>assms</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>A simplification lemma for $new\_int$, showing that upper bits can be ignored.</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5338..5343">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.take_bit_redundant|fact"><span class="entity_def" id="ValueThms.take_bit_redundant|thm"><span>take_bit_redundant</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>take_bit</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>ival</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ival</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>¬</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_5338..5343"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>arith</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>take_bit</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>signed_take_bit_take_bit</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5764..5769">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.take_bit_same_size_range|fact"><span class="entity_def" id="ValueThms.take_bit_same_size_range|thm"><span>take_bit_same_size_range</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ival2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>take_bit</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>ival</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>ival2</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>ival2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_5764..5769"><span>assms</span></a><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.lower_bounds_equiv|fact"><span>lower_bounds_equiv</span></a><span> </span><span>sint_ge</span><span> </span><span>sint_lt</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6016..6021">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.take_bit_same_bounds|fact"><span class="entity_def" id="ValueThms.take_bit_same_bounds|thm"><span>take_bit_same_bounds</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ival2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>take_bit</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>ival</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>fst</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Values.html#Values.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>ival2</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>ival2</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>snd</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Values.html#Values.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Values.html#Values.bit_bounds.simps|fact"><span>bit_bounds.simps</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_6016..6021"><span>assms</span></a><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.take_bit_same_size_range|fact"><span>take_bit_same_size_range</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>



</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Next we show that casting a word to a wider word preserves any upper/lower bounds.
</span><span>  (These lemmas may not be needed any more, since we are not using scast now?)</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6469..6474">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.scast_max_bound|fact"><span class="entity_def" id="ValueThms.scast_max_bound|thm"><span>scast_max_bound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>scast</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>Word.scast_eq</span><span> </span><span>Word.sint_sbintrunc'</span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Bit_Operations.signed_take_bit_int_eq_self_iff</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>One_nat_def</span><span> </span><a class="entity_ref" href="ValueThms.html#offset_6469..6474"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_6469..6474"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>decr_length_less_iff</span><span> </span><span>linorder_not_le</span><span> </span><span>power_strict_increasing_iff</span><span> </span><span>signed_take_bit_int_less_self_iff</span><span> </span><span>sint_greater_eq</span><span class="main"><span>)</span></span><span> 
</span><span class="comment1"><span>(</span><span>*</span><span> helpful thms?
  Word.scast_eq: scast (?w::?'b word) = word_of_int (sint ?w)
  Word.sint_lt: sint (?x::?'a word) &lt; (2::int) ^ (LENGTH(?'a) - (1::nat)
  Word.sint_uint: sint (w::'a word) = signed_take_bit (LENGTH('a) - Suc (0::nat)) (uint w)
  Word.sint_sbintrunc' :  sint (word_of_int (?bin::int)) = signed_take_bit (LENGTH(?'a) - (1::nat)) ?bin
  Word.int_word_sint   - moves up, takes mod, then moves down
  Bit_Operations.signed_take_bit_int_eq_self_iff:
    (signed_take_bit (?n::nat) (?k::int) = ?k) = (- ((2::int) ^ ?n) ⊑ ?k ∧ ?k &lt; (2::int) ^ ?n)
  Bit_Operations.signed_take_bit_int_eq_self:
    - ((2::int) ^ (?n::nat)) ⊑ (?k::int) ⟹ ?k &lt; (2::int) ^ ?n ⟹ signed_take_bit ?n ?k = ?k
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7589..7594">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.scast_min_bound|fact"><span class="entity_def" id="ValueThms.scast_min_bound|thm"><span>scast_min_bound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>scast</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>Word.scast_eq</span><span> </span><span>Word.sint_sbintrunc'</span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Bit_Operations.signed_take_bit_int_eq_self_iff</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>One_nat_def</span><span> </span><span>Suc_pred</span><span> </span><a class="entity_ref" href="ValueThms.html#offset_7589..7594"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_7589..7594"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>len_gt_0</span><span> </span><span>less_Suc_eq</span><span> </span><span>order_less_le</span><span> </span><span>order_less_le_trans</span><span> </span><span>power_le_imp_le_exp</span><span> </span><span>signed_take_bit_int_greater_eq_self_iff</span><span> </span><span>sint_lt</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8024..8029">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.scast_bigger_max_bound|fact"><span class="entity_def" id="ValueThms.scast_bigger_max_bound|thm"><span>scast_bigger_max_bound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>result</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>scast</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sint_lt</span><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.upper_bounds_equiv|fact"><span>upper_bounds_equiv</span></a><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.scast_max_bound|fact"><span>scast_max_bound</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_8024..8029"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>len_gt_0</span><span> </span><span>signed_scast_eq</span><span> </span><span>signed_take_bit_int_greater_self_iff</span><span> </span><span>sint_ge</span><span> </span><span>sint_less</span><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.upper_bounds_equiv|fact"><span>upper_bounds_equiv</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8354..8359">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.scast_bigger_min_bound|fact"><span class="entity_def" id="ValueThms.scast_bigger_min_bound|thm"><span>scast_bigger_min_bound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>result</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>scast</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>result</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sint_ge</span><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.lower_bounds_equiv|fact"><span>lower_bounds_equiv</span></a><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.scast_min_bound|fact"><span>scast_min_bound</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_8354..8359"><span>assms</span></a><span> </span><span>len_gt_0</span><span> </span><span>nat_less_le</span><span> </span><span>not_less</span><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.scast_max_bound|fact"><span>scast_max_bound</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8625..8630">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.scast_bigger_bit_bounds|fact"><span class="entity_def" id="ValueThms.scast_bigger_bit_bounds|thm"><span>scast_bigger_bit_bounds</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>result</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>scast</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>fst</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Values.html#Values.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>snd</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Values.html#Values.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_8625..8630"><span>assms</span></a><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.scast_bigger_min_bound|fact"><span>scast_bigger_min_bound</span></a><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.scast_bigger_max_bound|fact"><span>scast_bigger_max_bound</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Results about $new\_int$.</span><span>›</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> may be too trivial? </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8957..8962">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.new_int_take_bits|fact"><span class="entity_def" id="ValueThms.new_int_take_bits|thm"><span>new_int_take_bits</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>ival</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_8957..8962"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Support lemmas for take bit and signed take bit.</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Lemmas for removing redundant take\_bit wrappers.</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.take_bit_dist_addL|fact"><span class="entity_def" id="ValueThms.take_bit_dist_addL|thm"><span>take_bit_dist_addL</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>add.commute</span><span> </span><span>mask_eqs</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>take_bit_eq_mask</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.take_bit_dist_addR|fact"><span class="entity_def" id="ValueThms.take_bit_dist_addR|thm"><span>take_bit_dist_addR</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.take_bit_dist_addL|fact"><span>take_bit_dist_addL</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>add.commute</span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.take_bit_dist_subL|fact"><span class="entity_def" id="ValueThms.take_bit_dist_subL|thm"><span>take_bit_dist_subL</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.take_bit_dist_addR|fact"><span>take_bit_dist_addR</span></a><span> </span><span>uminus_add_conv_diff</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.take_bit_dist_subR|fact"><span class="entity_def" id="ValueThms.take_bit_dist_subR|thm"><span>take_bit_dist_subR</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.take_bit_dist_subL|fact"><span>take_bit_dist_subL</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> opaque_lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>diff_add_cancel</span><span> </span><span>diff_right_commute</span><span> </span><span>diff_self</span><span class="main"><span>)</span></span><span> 


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.take_bit_dist_neg|fact"><span class="entity_def" id="ValueThms.take_bit_dist_neg|thm"><span>take_bit_dist_neg</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>ix</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span> </span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ix</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span> </span><span class="free"><span>ix</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>diff_0</span><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.take_bit_dist_subR|fact"><span>take_bit_dist_subR</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10249..10254">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.signed_take_take_bit|fact"><span class="entity_def" id="ValueThms.signed_take_take_bit|thm"><span>signed_take_take_bit</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>Suc_diff_1</span><span> </span><a class="entity_ref" href="ValueThms.html#offset_10249..10254"><span>assms</span></a><span> </span><span>lessI</span><span> </span><span>linorder_not_less</span><span> </span><span>signed_take_bit_take_bit</span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10502..10507">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.mod_larger_ignore|fact"><span class="entity_def" id="ValueThms.mod_larger_ignore|thm"><span>mod_larger_ignore</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>int</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_10502..10507"><span>assms</span></a><span> </span><span>exp_mod_exp</span><span> </span><span>linorder_not_le</span><span> </span><span>mod_0_imp_dvd</span><span> </span><span>mod_mod_cancel</span><span> </span><span>mod_self</span><span> </span><span>order_less_imp_le</span><span class="main"><span>)</span></span><span>
  

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10753..10758">lemma</span></span></span><span> </span><span class="entity_def" id="ValueThms.mod_dist_over_add|fact"><span class="entity_def" id="ValueThms.mod_dist_over_add|thm"><span>mod_dist_over_add</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Values.html#Values.int64|type"><span>int64</span></a></span><span>  </span><span class="comment1"><span>(</span><span>*</span><span> "'a :: len word" </span><span>*</span><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="numeral"><span>64</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10952..10953">3</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="Values.html#Values.int64|type"><span>int64</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_10753..10758"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="ValueThms.html#ValueThms.size64|fact"><span>size64</span></a><span> </span><span>word_2p_lem</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>word_mod_2p_is_mask</span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="ValueThms.html#offset_10952..10953"><span>3</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>transfer</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> opaque_lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>and.right_idem</span><span> </span><span>take_bit_add</span><span> </span><span>take_bit_eq_mask</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>