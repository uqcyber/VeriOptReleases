<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory TreeSnippets</title>
</head>


<body>
<div class="head">
<h1>Theory TreeSnippets</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>TreeSnippets</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> 
    </span><a href="../Canonicalizations/ConditionalPhase.html"><span>Canonicalizations.ConditionalPhase</span></a><span>
    </span><a href="../Optimizations/CanonicalizationSyntax.html"><span>Optimizations.CanonicalizationSyntax</span></a><span>
    </span><a href="../Semantics/TreeToGraphThms.html"><span>Semantics.TreeToGraphThms</span></a><span>
    </span><a href="../Snippets/Snipping.html"><span>Snippets.Snipping</span></a><span>
    </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Library/OptionalSugar.html"><span>HOL-Library.OptionalSugar</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>no_notation</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.ConditionalExpr|const"><span>ConditionalExpr</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span>_</span><span> </span><span class="keyword1"><span>?</span></span><span> </span><span>_</span><span> </span><span class="keyword1"><span>:</span></span><span> </span><span>_</span><span>"</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><span class="main"><span>(</span></span><span>latex</span><span class="main"><span>)</span></span><span>
  </span><a class="entity_ref" href="../Graph/IRGraph.html#IRGraph.kind|const"><span>kind</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span>_</span><span class="keyword1"><span>⟪</span></span><span>_</span><span class="keyword1"><span>⟫</span></span><span>"</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><span class="main"><span>(</span></span><span>latex</span><span class="main"><span>)</span></span><span>
  </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span>_</span><span> </span><span class="keyword1"><span>∈</span></span><span> </span><span>_</span><span>"</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><span class="main"><span>(</span></span><span>latex</span><span class="main"><span>)</span></span><span>
  </span><a class="entity_ref" href="../Graph/Values.html#Values.val_to_bool|const"><span>val_to_bool</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span><span class="hidden">\&lt;^</span><span class="control">latex</span><span class="hidden">&gt;</span>‹bool-of›</span></span><span> </span><span>_</span><span>"</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><span class="main"><span>(</span></span><span>latex</span><span class="main"><span>)</span></span><span>
  </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.constantAsStamp|const"><span>constantAsStamp</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span><span class="hidden">\&lt;^</span><span class="control">latex</span><span class="hidden">&gt;</span>‹stamp-from-value›</span></span><span> </span><span>_</span><span>"</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><span class="main"><span>(</span></span><span>latex</span><span class="main"><span>)</span></span><span>
  </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span><span class="hidden">\&lt;^</span><span class="control">latex</span><span class="hidden">&gt;</span>‹trm(›</span></span><span>_</span><span class="keyword1"><span><span class="hidden">\&lt;^</span><span class="control">latex</span><span class="hidden">&gt;</span>‹)›</span></span><span>"</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>translations</span></span></span><span>
  </span><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span><span> </span><span class="main"><span>&lt;=</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><span class="main"><span>(</span></span><span>latex</span><span class="main"><span>)</span></span><span>
  </span><span>greater</span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span>_</span><span> </span><span class="keyword1"><span>&gt;</span></span><span class="keyword3"><span>/ </span></span><span>_</span><span>"</span></span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> lengthen rewrite arrow slightly
notation (latex)
  Transform ("_ ⟼ _")
notation (latex)
  Conditional ("_ ⟼ _ <span class="hidden">\&lt;^</span><span class="control">latex</span><span class="hidden">&gt;</span>‹ when › _")
</span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> hide type casting </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>translations</span></span></span><span>
  </span><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span>"</span></span><span> </span><span class="main"><span>&lt;=</span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>CONST</span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.intexp.Rep_intexp|const"><span>Rep_intexp</span></a><span> </span><span class="free"><span>n</span></span><span>"</span></span><span>
  </span><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span>"</span></span><span> </span><span class="main"><span>&lt;=</span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>CONST</span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.i32exp.Rep_i32exp|const"><span>Rep_i32exp</span></a><span> </span><span class="free"><span>n</span></span><span>"</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="TreeSnippets.vminusv|fact"><span class="entity_def" id="TreeSnippets.vminusv|thm"><span>vminusv</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>vv</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>vv</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>thm_oracles</span></span></span><span> </span><a class="entity_ref" href="TreeSnippets.html#TreeSnippets.vminusv|fact"><span>vminusv</span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="TreeSnippets.vminusv2|fact"><span class="entity_def" id="TreeSnippets.vminusv2|thm"><span>vminusv2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Values.html#Values.int32|type"><span>int32</span></a><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="TreeSnippets.redundant_sub|fact"><span class="entity_def" id="TreeSnippets.redundant_sub|thm"><span>redundant_sub</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>vv<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>vv<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="bound"><span>v<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>v<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>vv<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>v<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="bound"><span>vv<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>v<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><span class="bound"><span>v<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>v<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="bound"><span>v<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>v<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>thm_oracles</span></span></span><span> </span><a class="entity_ref" href="TreeSnippets.html#TreeSnippets.redundant_sub|fact"><span>redundant_sub</span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="TreeSnippets.redundant_sub2|fact"><span class="entity_def" id="TreeSnippets.redundant_sub2|thm"><span>redundant_sub2</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>v<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Values.html#Values.int32|type"><span>int32</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>v<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Values.html#Values.int32|type"><span>int32</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>v<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="bound"><span>v<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>v<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>val-eq</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="TreeSnippets.html#TreeSnippets.vminusv|fact"><span>vminusv</span></a><span class="antiquote"><span>}</span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="TreeSnippets.html#TreeSnippets.redundant_sub|fact"><span>redundant_sub</span></a><span class="antiquote"><span>}</span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1239..1244">lemma</span></span></span><span> </span><span class="entity_def" id="TreeSnippets.sub_same_val|fact"><span class="entity_def" id="TreeSnippets.sub_same_val|thm"><span>sub_same_val</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>e</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>e</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>val[</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="TreeSnippets.html#offset_1239..1244"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>e</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="TreeSnippets.wf_stamp_def|fact"><span class="entity_def" id="TreeSnippets.wf_stamp_def|thm"><span class="entity_def" id="TreeSnippets.wf_stamp_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="TreeSnippets.wf_stamp|const"><span>wf_stamp</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>bool</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>wf_stamp</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>e</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>e</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>e</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1490..1495">lemma</span></span></span><span> </span><span class="entity_def" id="TreeSnippets.wf_stamp_eval|fact"><span class="entity_def" id="TreeSnippets.wf_stamp_eval|thm"><span>wf_stamp_eval</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="TreeSnippets.html#TreeSnippets.wf_stamp|const"><span>wf_stamp</span></a><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>e</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>lo</span></span><span> </span><span class="free"><span>hi</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>vv</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>vv</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="TreeSnippets.html#offset_1490..1495"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="TreeSnippets.html#TreeSnippets.wf_stamp_def|fact"><span>wf_stamp_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Proofs/StampEvalThms.html#StampEvalThms.valid_int_same_bits|fact"><span>valid_int_same_bits</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid_int|fact"><span>valid_int</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>

</span><span class="keyword1"><span class="command"><span>phase</span></span></span><span> tmp
  </span><span class="keyword2"><span class="keyword"><span>terminating</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.size|const"><span>size</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>sub-same-32</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="TreeSnippets.sub_same_32_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="TreeSnippets.sub_same_32|fact"><span class="entity_def" id="TreeSnippets.sub_same_32_code|fact"><span class="entity_def" id="TreeSnippets.sub_same_32(2)|thm"><span class="entity_def" id="TreeSnippets.sub_same_32(1)|thm"><span class="entity_def" id="TreeSnippets.sub_same_32_code|thm"><span class="entity_def" id="TreeSnippets.sub_same_32_code_raw|axiom"><span class="entity_def" id="offset_1801..1812">sub_same_32</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>e</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.i32exp|type"><span>i32exp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>⟼</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>when</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>e</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>lo</span></span><span> </span><span class="free"><span>hi</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="TreeSnippets.html#TreeSnippets.wf_stamp|const"><span>wf_stamp</span></a><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>e</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Suc_lessI</span><span> </span><span>add_is_1</span><span> </span><span>add_pos_pos</span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.size_gt_0|fact"><span>size_gt_0</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>impI</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_2067..2072">assms</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_binary|const"><span>stamp_binary</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinSub|const"><span>BinSub</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>lo</span></span><span> </span><span class="free"><span>hi</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="TreeSnippets.html#TreeSnippets.wf_stamp|const"><span>wf_stamp</span></a><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>e</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>e</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>vv</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>vv</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="TreeSnippets.html#offset_2067..2072"><span>assms</span></a><span> </span><a class="entity_ref" href="TreeSnippets.html#TreeSnippets.wf_stamp_eval|fact"><span>wf_stamp_eval</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr.simps|fact"><span>stamp_expr.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinSub|const"><span>BinSub</span></a><span> </span><span class="free"><span>e</span></span><span> </span><span class="free"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.ConstantExpr|const"><span>ConstantExpr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.BinaryExprE|fact"><span>BinaryExprE</span></a><span> </span><a class="entity_ref" href="TreeSnippets.html#TreeSnippets.wf_stamp_def|fact"><span>TreeSnippets.wf_stamp_def</span></a><span> </span><a class="entity_ref" href="TreeSnippets.html#offset_2067..2072"><span>assms</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.constantAsStamp.simps|fact"><span>constantAsStamp.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr.simps|fact"><span>stamp_expr.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="TreeSnippets.html#TreeSnippets.sub_same_val|fact"><span>sub_same_val</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.unfold_const|fact"><span>unfold_const</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_stamp.simps|fact"><span>valid_stamp.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.simps|fact"><span>valid_value.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>thm_oracles</span></span></span><span> </span><a class="entity_ref" href="TreeSnippets.html#offset_1801..1812"><span>sub_same_32</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>ast-example</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>value</span></span><span>[</span><span>display</span><span>] </span><span class="quoted"><span>‹</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinAdd|const"><span>BinAdd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinMul|const"><span>BinMul</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinMul|const"><span>BinMul</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>›</span></span><span class="antiquote"><span>}</span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>abstract-syntax-tree</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>datatype</span></span><span>[</span><span>display</span><span>,</span><span>margin</span><span>=40] </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>value</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>datatype</span></span><span>[</span><span>display</span><span>,</span><span>margin</span><span>=40] </span><a class="entity_ref" href="../Graph/Values.html#Values.Value|type"><span>Value</span></a><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>eval</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term_type</span></span><span>[</span><span>mode</span><span>=spaced_type_def] </span><span class="quoted"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval|const"><span>unary_eval</span></a></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term_type</span></span><span>[</span><span>mode</span><span>=spaced_type_def] </span><span class="quoted"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval|const"><span>bin_eval</span></a></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>tree-semantics</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>
</span><span>\induct{</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>mode</span><span>=Rule] </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree.UnaryExpr|fact"><span>evaltree.UnaryExpr</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>}{semantics:unary}
</span><span>\induct{</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>mode</span><span>=Rule] </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree.BinaryExpr|fact"><span>evaltree.BinaryExpr</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>}{semantics:binary}
</span><span>\induct{</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>mode</span><span>=Rule] </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree.ConditionalExpr|fact"><span>evaltree.ConditionalExpr</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>}{semantics:conditional}
</span><span>\induct{</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>mode</span><span>=Rule] </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree.ConstantExpr|fact"><span>evaltree.ConstantExpr</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>}{semantics:constant}
</span><span>\induct{</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>mode</span><span>=Rule] </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree.ParameterExpr|fact"><span>evaltree.ParameterExpr</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>}{semantics:parameter}
</span><span>\induct{</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>mode</span><span>=Rule] </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree.LeafExpr|fact"><span>evaltree.LeafExpr</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>}{semantics:leaf}</span><span>
</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>\induct{@{thm[mode=Rule] evaltree.ConvertExpr [no_vars]}}{semantics:convert}</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>tree-evaluation-deterministic</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>display</span><span>] </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>thm_oracles</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>expression-refinement</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.le_expr_def|fact"><span>le_expr_def</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span> </span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>expression-refinement-monotone</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>
</span><span>\begin{tabular}{l@ {~~</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>"⟹"</span></span><span class="antiquote"><span>}</span></span></span><span>~~}l}
</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>prem</span></span><span> 1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.mono_unary|fact"><span>mono_unary</span></a><span class="antiquote"><span>}</span></span></span><span> &amp; </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>concl</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.mono_unary|fact"><span>mono_unary</span></a><span class="antiquote"><span>}</span></span></span><span>\\
</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>prem</span></span><span> 1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.mono_binary|fact"><span>mono_binary</span></a><span class="antiquote"><span>}</span></span></span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>∧</span></span><span class="antiquote"><span>}</span></span></span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>prem</span></span><span> 2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.mono_binary|fact"><span>mono_binary</span></a><span class="antiquote"><span>}</span></span></span><span> &amp; </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>concl</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.mono_binary|fact"><span>mono_binary</span></a><span class="antiquote"><span>}</span></span></span><span>\\
</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>prem</span></span><span> 1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.mono_conditional|fact"><span>mono_conditional</span></a><span class="antiquote"><span>}</span></span></span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>∧</span></span><span class="antiquote"><span>}</span></span></span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>prem</span></span><span> 2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.mono_conditional|fact"><span>mono_conditional</span></a><span class="antiquote"><span>}</span></span></span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>∧</span></span><span class="antiquote"><span>}</span></span></span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>prem</span></span><span> 3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.mono_conditional|fact"><span>mono_conditional</span></a><span class="antiquote"><span>}</span></span></span><span> &amp; </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>concl</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.mono_conditional|fact"><span>mono_conditional</span></a><span class="antiquote"><span>}</span></span></span><span>
</span><span>\end{tabular}</span><span>
</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>ML</span></span></span><span> </span><span class="quoted"><span>‹</span><span>
</span><span class="comment1"><span>(*fun get_list (phase: phase option) =
  case phase of
    NONE =&gt; [] |
    SOME p =&gt; (#rewrites p)

fun get_rewrite name thy =
  let 
    val (phases, lookup) = (case RWList.get thy of
      NoPhase store =&gt; store |
      InPhase (name, store, _) =&gt; store)
    val rewrites = (map (fn x =&gt; get_list (lookup x)) phases)
  in
    rewrites
  end
  
fun rule_print name =
  Document_Output.antiquotation_pretty name (Args.term)
    (fn ctxt =&gt; fn (rule) =&gt; (*Pretty.str "hello")*)
      Pretty.block (print_all_phases (Proof_Context.theory_of ctxt)));
(*
      Goal_Display.pretty_goal
        (Config.put Goal_Display.show_main_goal main ctxt)
        (#goal (Proof.goal (Toplevel.proof_of (Toplevel.presentation_state ctxt)))));
*)

val _ = Theory.setup
 (rule_print <span class="hidden">\&lt;^</span><span class="control">binding</span><span class="hidden">&gt;</span>‹rule›);*)</span></span><span>
</span><span>›</span></span><span>


</span><span class="comment1"><span>(</span><span>*</span><span>snipbegin ‹OptimizationList›
text ‹@{rule BinaryFoldConstant}›
snipend -</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>phase</span></span></span><span> SnipPhase 
  </span><span class="keyword2"><span class="keyword"><span>terminating</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.size|const"><span>size</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>BinaryFoldConstant</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="TreeSnippets.BinaryFoldConstant_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="TreeSnippets.BinaryFoldConstant|fact"><span class="entity_def" id="TreeSnippets.BinaryFoldConstant_code|fact"><span class="entity_def" id="TreeSnippets.BinaryFoldConstant(2)|thm"><span class="entity_def" id="TreeSnippets.BinaryFoldConstant(1)|thm"><span class="entity_def" id="TreeSnippets.BinaryFoldConstant_code|thm"><span class="entity_def" id="TreeSnippets.BinaryFoldConstant_code_raw|axiom"><span>BinaryFoldConstant</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="free"><span>v1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="free"><span>v2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>⟼</span></a></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.ConstantExpr|const"><span>ConstantExpr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval|const"><span>bin_eval</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="free"><span>v1</span></span><span> </span><span class="free"><span>v2</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>when</span></a></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.int_and_equal_bits|const"><span>int_and_equal_bits</span></a><span> </span><span class="free"><span>v1</span></span><span> </span><span class="free"><span>v2</span></span><span> </span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.rewrite_preservation.simps|fact"><span>rewrite_preservation.simps</span></a><span> </span><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.rewrite_termination.simps|fact"><span>rewrite_termination.simps</span></a><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>conjE</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.le_expr_def|fact"><span>le_expr_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>BinaryFoldConstantObligation</span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>subgoals</span></span><span>[</span><span>display</span><span>]</span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.BinaryFoldConstant|fact"><span>BinaryFoldConstant</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>AddCommuteConstantRight</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="TreeSnippets.AddCommuteConstantRight_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="TreeSnippets.AddCommuteConstantRight|fact"><span class="entity_def" id="TreeSnippets.AddCommuteConstantRight_code|fact"><span class="entity_def" id="TreeSnippets.AddCommuteConstantRight(2)|thm"><span class="entity_def" id="TreeSnippets.AddCommuteConstantRight(1)|thm"><span class="entity_def" id="TreeSnippets.AddCommuteConstantRight_code|thm"><span class="entity_def" id="TreeSnippets.AddCommuteConstantRight_code_raw|axiom"><span>AddCommuteConstantRight</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>⟼</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>when</span></a></span><span> </span><span class="main"><span>¬</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.is_ConstantExpr|const"><span>is_ConstantExpr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.rewrite_preservation.simps|fact"><span>rewrite_preservation.simps</span></a><span> </span><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.rewrite_termination.simps|fact"><span>rewrite_termination.simps</span></a><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>conjE</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.le_expr_def|fact"><span>le_expr_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>AddCommuteConstantRightObligation</span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>subgoals</span></span><span>[</span><span>display</span><span>,</span><span>margin</span><span>=50]</span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.AddShiftConstantRight|fact"><span>AddShiftConstantRight</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>AddNeutral</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="TreeSnippets.AddNeutral_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="TreeSnippets.AddNeutral|fact"><span class="entity_def" id="TreeSnippets.AddNeutral_code|fact"><span class="entity_def" id="TreeSnippets.AddNeutral(2)|thm"><span class="entity_def" id="TreeSnippets.AddNeutral(1)|thm"><span class="entity_def" id="TreeSnippets.AddNeutral_code|thm"><span class="entity_def" id="TreeSnippets.AddNeutral_code_raw|axiom"><span>AddNeutral</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>e</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.i32exp|type"><span>i32exp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.rewrite_preservation.simps|fact"><span>rewrite_preservation.simps</span></a><span> </span><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.rewrite_termination.simps|fact"><span>rewrite_termination.simps</span></a><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>conjE</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.le_expr_def|fact"><span>le_expr_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>AddNeutralObligation</span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>subgoals</span></span><span>[</span><span>display</span><span>]</span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.neutral_zero|fact"><span>neutral_zero</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.rewrite_preservation.simps|fact"><span>rewrite_preservation.simps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>InverseLeftSub</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="TreeSnippets.InverseLeftSub_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="TreeSnippets.InverseLeftSub|fact"><span class="entity_def" id="TreeSnippets.InverseLeftSub_code|fact"><span class="entity_def" id="TreeSnippets.InverseLeftSub(2)|thm"><span class="entity_def" id="TreeSnippets.InverseLeftSub(1)|thm"><span class="entity_def" id="TreeSnippets.InverseLeftSub_code|thm"><span class="entity_def" id="TreeSnippets.InverseLeftSub_code_raw|axiom"><span>InverseLeftSub</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>e<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.intexp|type"><span>intexp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>e<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.intexp|type"><span>intexp</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>e<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>e<span class="hidden">⇩</span><sub>1</sub></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.rewrite_preservation.simps|fact"><span>rewrite_preservation.simps</span></a><span> </span><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.rewrite_termination.simps|fact"><span>rewrite_termination.simps</span></a><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>conjE</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.le_expr_def|fact"><span>le_expr_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>InverseLeftSubObligation</span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>subgoals</span></span><span>[</span><span>display</span><span>]</span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.neutral_left_add_sub|fact"><span>neutral_left_add_sub</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>InverseRightSub</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="TreeSnippets.InverseRightSub_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="TreeSnippets.InverseRightSub|fact"><span class="entity_def" id="TreeSnippets.InverseRightSub_code|fact"><span class="entity_def" id="TreeSnippets.InverseRightSub(2)|thm"><span class="entity_def" id="TreeSnippets.InverseRightSub(1)|thm"><span class="entity_def" id="TreeSnippets.InverseRightSub_code|thm"><span class="entity_def" id="TreeSnippets.InverseRightSub_code_raw|axiom"><span>InverseRightSub</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>e<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.intexp|type"><span>intexp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>e<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.intexp|type"><span>intexp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>e<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>e<span class="hidden">⇩</span><sub>1</sub></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.rewrite_preservation.simps|fact"><span>rewrite_preservation.simps</span></a><span> </span><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.rewrite_termination.simps|fact"><span>rewrite_termination.simps</span></a><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>conjE</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.le_expr_def|fact"><span>le_expr_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>InverseRightSubObligation</span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>subgoals</span></span><span>[</span><span>display</span><span>]</span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.neutral_right_add_sub|fact"><span>neutral_right_add_sub</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>AddToSub</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="TreeSnippets.AddToSub_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="TreeSnippets.AddToSub|fact"><span class="entity_def" id="TreeSnippets.AddToSub_code|fact"><span class="entity_def" id="TreeSnippets.AddToSub(2)|thm"><span class="entity_def" id="TreeSnippets.AddToSub(1)|thm"><span class="entity_def" id="TreeSnippets.AddToSub_code|thm"><span class="entity_def" id="TreeSnippets.AddToSub_code_raw|axiom"><span>AddToSub</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>


  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.rewrite_preservation.simps|fact"><span>rewrite_preservation.simps</span></a><span> </span><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.rewrite_termination.simps|fact"><span>rewrite_termination.simps</span></a><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>conjE</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.le_expr_def|fact"><span>le_expr_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>AddToSubObligation</span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>subgoals</span></span><span>[</span><span>display</span><span>]</span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.AddLeftNegateToSub|fact"><span>AddLeftNegateToSub</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="TreeSnippets.trm_def|fact"><span class="entity_def" id="TreeSnippets.trm_def|thm"><span class="entity_def" id="TreeSnippets.trm_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="TreeSnippets.trm|const"><span>trm</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>trm</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.size|const"><span>size</span></a><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>phase</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>phase</span></span></span><span> AddCanonicalizations
  </span><span class="keyword2"><span class="keyword"><span>terminating</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="TreeSnippets.html#TreeSnippets.trm|const"><span>trm</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>text_raw</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"</span><span>\</span><span>\dots</span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>hide_const</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>open</span></span></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/Form.html#Form.wf_stamp|const"><span>Form.wf_stamp</span></a><span>"</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>phase-example</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>phase</span></span></span><span> Conditional
  </span><span class="keyword2"><span class="keyword"><span>terminating</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="TreeSnippets.html#TreeSnippets.trm|const"><span>trm</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>phase-example-1</span><span>›</span></span></span><span class="keyword1"><span class="command"><span class="entity_def" id="TreeSnippets.negate_condition_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="TreeSnippets.negate_condition|fact"><span class="entity_def" id="TreeSnippets.negate_condition_code|fact"><span class="entity_def" id="TreeSnippets.negate_condition(2)|thm"><span class="entity_def" id="TreeSnippets.negate_condition(1)|thm"><span class="entity_def" id="TreeSnippets.negate_condition_code|thm"><span class="entity_def" id="TreeSnippets.negate_condition_code_raw|axiom"><span>negate_condition</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.LogicNegationNotation|const"><span>!</span></a></span><span class="free"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConditionalNotation|const"><span>?</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConditionalNotation|const"><span>:</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConditionalNotation|const"><span>?</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConditionalNotation|const"><span>:</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Canonicalizations/ConditionalPhase.html#ConditionalPhase.NegateConditionFlipBranches|fact"><span>ConditionalPhase.NegateConditionFlipBranches</span></a><span>
   </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="TreeSnippets.html#TreeSnippets.trm_def|fact"><span>trm_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>phase-example-2</span><span>›</span></span></span><span class="keyword1"><span class="command"><span class="entity_def" id="TreeSnippets.const_true_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="TreeSnippets.const_true|fact"><span class="entity_def" id="TreeSnippets.const_true_code|fact"><span class="entity_def" id="TreeSnippets.const_true(2)|thm"><span class="entity_def" id="TreeSnippets.const_true(1)|thm"><span class="entity_def" id="TreeSnippets.const_true_code|thm"><span class="entity_def" id="TreeSnippets.const_true_code_raw|axiom"><span>const_true</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.TrueNotation|const"><span>true</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConditionalNotation|const"><span>?</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConditionalNotation|const"><span>:</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="TreeSnippets.html#TreeSnippets.trm_def|fact"><span>trm_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>phase-example-3</span><span>›</span></span></span><span class="keyword1"><span class="command"><span class="entity_def" id="TreeSnippets.const_false_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="TreeSnippets.const_false|fact"><span class="entity_def" id="TreeSnippets.const_false_code|fact"><span class="entity_def" id="TreeSnippets.const_false(2)|thm"><span class="entity_def" id="TreeSnippets.const_false(1)|thm"><span class="entity_def" id="TreeSnippets.const_false_code|thm"><span class="entity_def" id="TreeSnippets.const_false_code_raw|axiom"><span>const_false</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.FalseNotation|const"><span>false</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConditionalNotation|const"><span>?</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConditionalNotation|const"><span>:</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="TreeSnippets.html#TreeSnippets.trm_def|fact"><span>trm_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>phase-example-4</span><span>›</span></span></span><span class="keyword1"><span class="command"><span class="entity_def" id="TreeSnippets.equal_branches_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="TreeSnippets.equal_branches|fact"><span class="entity_def" id="TreeSnippets.equal_branches_code|fact"><span class="entity_def" id="TreeSnippets.equal_branches(2)|thm"><span class="entity_def" id="TreeSnippets.equal_branches(1)|thm"><span class="entity_def" id="TreeSnippets.equal_branches_code|thm"><span class="entity_def" id="TreeSnippets.equal_branches_code_raw|axiom"><span>equal_branches</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConditionalNotation|const"><span>?</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConditionalNotation|const"><span>:</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="TreeSnippets.html#TreeSnippets.trm_def|fact"><span>trm_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>
snipbegin ‹phase-example-5›optimization condition_bounds_x: "((u &lt; v) ? x : y) ⟼ x
                   when (stamp_under (stamp_expr u) (stamp_expr v) 
                            ∧ wf_stamp u ∧ wf_stamp v)"snipend -
  using ConditionalPhase.condition_bounds_x(1)
  by (blast, auto simp: trm_def)

snipbegin ‹phase-example-6›optimization condition_bounds_y: "((x &lt; y) ? x : y) ⟼ y
                   when (stamp_under (stamp_expr y) (stamp_expr x) ∧ wf_stamp x ∧ wf_stamp y)"snipend -
  using ConditionalPhase.condition_bounds_y(1)
  by (blast, auto simp: trm_def)
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>phase-example-7</span><span>›</span></span></span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span> </span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>termination</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>\begin{tabular}{l@ {~~</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>"="</span></span><span class="antiquote"><span>}</span></span></span><span>~~}l}
</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>lhs</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.size.simps|fact"><span>size.simps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="antiquote"><span>}</span></span></span><span> &amp; </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rhs</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.size.simps|fact"><span>size.simps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="antiquote"><span>}</span></span></span><span>\\
</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>lhs</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.size.simps|fact"><span>size.simps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="antiquote"><span>}</span></span></span><span> &amp; </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rhs</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.size.simps|fact"><span>size.simps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="antiquote"><span>}</span></span></span><span>\\
</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>lhs</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.size.simps|fact"><span>size.simps</span></a><span class="main"><span>(</span></span><span>14</span><span class="main"><span>)</span></span><span class="antiquote"><span>}</span></span></span><span> &amp; </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rhs</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.size.simps|fact"><span>size.simps</span></a><span class="main"><span>(</span></span><span>14</span><span class="main"><span>)</span></span><span class="antiquote"><span>}</span></span></span><span>\\
</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>lhs</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.size.simps|fact"><span>size.simps</span></a><span class="main"><span>(</span></span><span>15</span><span class="main"><span>)</span></span><span class="antiquote"><span>}</span></span></span><span> &amp; </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rhs</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.size.simps|fact"><span>size.simps</span></a><span class="main"><span>(</span></span><span>15</span><span class="main"><span>)</span></span><span class="antiquote"><span>}</span></span></span><span>\\
</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>lhs</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.size.simps|fact"><span>size.simps</span></a><span class="main"><span>(</span></span><span>16</span><span class="main"><span>)</span></span><span class="antiquote"><span>}</span></span></span><span> &amp; </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rhs</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.size.simps|fact"><span>size.simps</span></a><span class="main"><span>(</span></span><span>16</span><span class="main"><span>)</span></span><span class="antiquote"><span>}</span></span></span><span>\\
</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>lhs</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.size.simps|fact"><span>size.simps</span></a><span class="main"><span>(</span></span><span>17</span><span class="main"><span>)</span></span><span class="antiquote"><span>}</span></span></span><span> &amp; </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rhs</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Optimizations/CanonicalizationSyntax.html#CanonicalizationSyntax.size.simps|fact"><span>size.simps</span></a><span class="main"><span>(</span></span><span>17</span><span class="main"><span>)</span></span><span class="antiquote"><span>}</span></span></span><span>
</span><span>\end{tabular}</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Experimenting with auto generated optimizations
notation (latex)
  Transform ("_ <span class="hidden">\&lt;^</span><span class="control">latex</span><span class="hidden">&gt;</span>‹&amp;› _")
notation (latex)
  Conditional ("_ <span class="hidden">\&lt;^</span><span class="control">latex</span><span class="hidden">&gt;</span>‹&amp;›_<span class="hidden">\&lt;^</span><span class="control">latex</span><span class="hidden">&gt;</span>‹\\\\›\\ <span class="hidden">\&lt;^</span><span class="control">latex</span><span class="hidden">&gt;</span>‹&amp;›if _")

translations
  "t" &lt;= "CONST rewrite_obligation t"

print_optimizations
snipbegin ‹optimization rules›
text_raw ‹\begin{tabular}{l@ {~~@{text "⟼"}~~}l}›
text_raw ‹@{thm constant_add(1) [no_vars]}\\›
text_raw ‹@{thm AddShiftConstantRight(1) [no_vars]}\\›
text_raw ‹@{thm AddNeutral(1) [no_vars]}›
text_raw ‹\end{tabular}›
snipend -
</span><span>*</span><span>)</span></span><span>


</span><span class="comment1"><span>(</span><span>*</span><span> definition 5 (semantics-preserving) is there a distinction in Isabelle? </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>graph-representation</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>bold</span></span><span> </span><span class="plain_text"><span>‹</span><span>typedef</span><span>›</span></span><span class="antiquote"><span>}</span></span></span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span>[</span><span>source</span><span>] </span><span class="quoted"><span>‹</span><span class="free"><span>IRGraph</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>g</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../Graph/IRNodes.html#IRNodes.ID|type"><span>ID</span></a><span> </span><span class="main"><span>⇀</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/IRNodes.html#IRNodes.IRNode|type"><span>IRNode</span></a><span> </span><span class="main"><span>×</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>dom</span><span> </span><span class="bound"><span>g</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>›</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>graph2tree</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>
</span><span>\induct{</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>mode</span><span>=Rule] </span><a class="entity_ref" href="../Semantics/TreeToGraph.html#TreeToGraph.rep.ConstantNode|fact"><span>rep.ConstantNode</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>}{rep:constant}
</span><span>\induct{</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>mode</span><span>=Rule] </span><a class="entity_ref" href="../Semantics/TreeToGraph.html#TreeToGraph.rep.ParameterNode|fact"><span>rep.ParameterNode</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>}{rep:parameter}
</span><span>\induct{</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>mode</span><span>=Rule] </span><a class="entity_ref" href="../Semantics/TreeToGraph.html#TreeToGraph.rep.ConditionalNode|fact"><span>rep.ConditionalNode</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>}{rep:conditional}
</span><span>\induct{</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>mode</span><span>=Rule] </span><a class="entity_ref" href="../Semantics/TreeToGraph.html#TreeToGraph.rep.AbsNode|fact"><span>rep.AbsNode</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>}{rep:unary}
</span><span>\induct{</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>mode</span><span>=Rule] </span><a class="entity_ref" href="../Semantics/TreeToGraph.html#TreeToGraph.rep.SignExtendNode|fact"><span>rep.SignExtendNode</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>}{rep:convert}
</span><span>\induct{</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>mode</span><span>=Rule] </span><a class="entity_ref" href="../Semantics/TreeToGraph.html#TreeToGraph.rep.AddNode|fact"><span>rep.AddNode</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>}{rep:binary}
</span><span>\induct{</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>mode</span><span>=Rule] </span><a class="entity_ref" href="../Semantics/TreeToGraph.html#TreeToGraph.rep.LeafNode|fact"><span>rep.LeafNode</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>}{rep:leaf}
</span><span>\induct{</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>mode</span><span>=Rule] </span><a class="entity_ref" href="../Semantics/TreeToGraph.html#TreeToGraph.rep.RefNode|fact"><span>rep.RefNode</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>}{rep:ref}</span><span>
</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>preeval</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../Semantics/TreeToGraph.html#TreeToGraph.is_preevaluated.simps|fact"><span>is_preevaluated.simps</span></a><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>deterministic-representation</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>display</span><span>] </span><a class="entity_ref" href="../Semantics/TreeToGraphThms.html#TreeToGraphThms.repDet|fact"><span>repDet</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>
</span><span class="keyword1"><span class="command"><span>thm_oracles</span></span></span><span> </span><a class="entity_ref" href="../Semantics/TreeToGraphThms.html#TreeToGraphThms.repDet|fact"><span>repDet</span></a><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>well-formed-term-graph</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rhs</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/TreeToGraph.html#TreeToGraph.wf_term_graph_def|fact"><span>wf_term_graph_def</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> definition 9 (well-formed graph) no? </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>graph-semantics</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../Semantics/TreeToGraph.html#TreeToGraph.encodeeval_def|fact"><span>encodeeval_def</span></a><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>graph-semantics-deterministic</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../Semantics/TreeToGraphThms.html#TreeToGraphThms.graphDet|fact"><span>graphDet</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>
</span><span class="keyword1"><span class="command"><span>thm_oracles</span></span></span><span> </span><a class="entity_ref" href="../Semantics/TreeToGraphThms.html#TreeToGraphThms.graphDet|fact"><span>graphDet</span></a><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><span class="main"><span>(</span></span><span>latex</span><span class="main"><span>)</span></span><span>
  </span><a class="entity_ref" href="../Semantics/TreeToGraph.html#TreeToGraph.graph_refinement|const"><span>graph_refinement</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span><span class="hidden">\&lt;^</span><span class="control">latex</span><span class="hidden">&gt;</span>‹term-graph-refinement›</span></span><span> </span><span>_</span><span>"</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>graph-refinement</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>display</span><span>, </span><span>margin</span><span>=60] </span><a class="entity_ref" href="../Semantics/TreeToGraph.html#TreeToGraph.graph_refinement_def|fact"><span>graph_refinement_def</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> hide as_set, should treat IRGraph as a set of pairs in paper </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>translations</span></span></span><span>
  </span><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span>"</span></span><span> </span><span class="main"><span>&lt;=</span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>CONST</span></span><span> </span><a class="entity_ref" href="../Graph/IRGraph.html#IRGraph.as_set|const"><span>as_set</span></a><span> </span><span class="free"><span>n</span></span><span>"</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>graph-semantics-preservation</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>display</span><span>, </span><span>margin</span><span>=30] </span><a class="entity_ref" href="../Semantics/TreeToGraphThms.html#TreeToGraphThms.graph_semantics_preservation_subscript|fact"><span>graph_semantics_preservation_subscript</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>
</span><span class="keyword1"><span class="command"><span>thm_oracles</span></span></span><span> </span><a class="entity_ref" href="../Semantics/TreeToGraphThms.html#TreeToGraphThms.graph_semantics_preservation_subscript|fact"><span>graph_semantics_preservation_subscript</span></a><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>maximal-sharing</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>display</span><span>, </span><span>margin</span><span>=50] </span><a class="entity_ref" href="../Semantics/TreeToGraph.html#TreeToGraph.maximal_sharing|fact"><span>maximal_sharing</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>tree-to-graph-rewriting</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>display</span><span>, </span><span>margin</span><span>=30] </span><a class="entity_ref" href="../Semantics/TreeToGraphThms.html#TreeToGraphThms.tree_to_graph_rewriting|fact"><span>tree_to_graph_rewriting</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>
</span><span class="keyword1"><span class="command"><span>thm_oracles</span></span></span><span> </span><a class="entity_ref" href="../Semantics/TreeToGraphThms.html#TreeToGraphThms.tree_to_graph_rewriting|fact"><span>tree_to_graph_rewriting</span></a><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>term-graph-refines-term</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>display</span><span>] </span><a class="entity_ref" href="../Semantics/TreeToGraph.html#TreeToGraph.graph_represents_expression_def|fact"><span>graph_represents_expression_def</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>term-graph-evaluation</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>display</span><span>] </span><a class="entity_ref" href="../Semantics/TreeToGraphThms.html#TreeToGraphThms.term_graph_evaluation|fact"><span>term_graph_evaluation</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>graph-construction</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>display</span><span>, </span><span>margin</span><span>=40] </span><a class="entity_ref" href="../Semantics/TreeToGraphThms.html#TreeToGraphThms.graph_construction|fact"><span>graph_construction</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>
</span><span class="keyword1"><span class="command"><span>thm_oracles</span></span></span><span> </span><a class="entity_ref" href="../Semantics/TreeToGraphThms.html#TreeToGraphThms.graph_construction|fact"><span>graph_construction</span></a><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>term-graph-reconstruction</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>display</span><span>] </span><a class="entity_ref" href="../Semantics/TreeToGraphThms.html#TreeToGraphThms.term_graph_reconstruction|fact"><span>term_graph_reconstruction</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword1"><span class="command"><span>snipbegin</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>refined-insert</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span>[</span><span>display</span><span>, </span><span>margin</span><span>=40] </span><a class="entity_ref" href="../Semantics/TreeToGraphThms.html#TreeToGraphThms.refined_insert|fact"><span>refined_insert</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>no_vars</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>snipend</span></span></span><span> </span><span class="plain_text"><span>-</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>