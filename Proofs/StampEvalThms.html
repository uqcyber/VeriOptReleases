<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory StampEvalThms</title>
</head>


<body>
<div class="head">
<h1>Theory StampEvalThms</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Evaluation Stamp Theorems</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>StampEvalThms</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="../Semantics/IRTreeEvalThms.html"><span>Semantics.IRTreeEvalThms</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Support Lemmas for Stamps and Upper/Lower Bounds</span><span>›</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> these two were weirdly hard to prove given it should be by definition </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.size32|fact"><span class="entity_def" id="StampEvalThms.size32|thm"><span>size32</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>32</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>32</span></span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>size_word.rep_eq</span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>One_nat_def</span><span> </span><span>add.right_neutral</span><span> </span><span>add_Suc_right</span><span> </span><span>len_of_numeral_defs</span><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span>len_of_numeral_defs</span><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span>mult.right_neutral</span><span> </span><span>mult_Suc_right</span><span> </span><span>numeral_2_eq_2</span><span> </span><span>numeral_Bit0</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>mult.commute</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.size64|fact"><span class="entity_def" id="StampEvalThms.size64|thm"><span>size64</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>64</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>64</span></span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>size_word.rep_eq</span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>One_nat_def</span><span> </span><span>add.right_neutral</span><span> </span><span>add_Suc_right</span><span> </span><span>len_of_numeral_defs</span><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span>len_of_numeral_defs</span><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span>mult.right_neutral</span><span> </span><span>mult_Suc_right</span><span> </span><span>numeral_2_eq_2</span><span> </span><span>numeral_Bit0</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>mult.commute</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="operator"><span>show_types</span></span><span class="main"><span class="main"><span>=</span></span></span><span class="quasi_keyword"><span>true</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Nb. sint_ge and sint_lt subsume these lemmas? </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.signed_int_bottom32|fact"><span class="entity_def" id="StampEvalThms.signed_int_bottom32|thm"><span>signed_int_bottom32</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="numeral"><span>31</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Values.html#Values.int32|type"><span>int32</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sint_range_size</span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.size32|fact"><span>size32</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>One_nat_def</span><span> </span><span>Suc_pred</span><span> </span><span>add_Suc</span><span> </span><span>add_Suc_right</span><span> </span><span>eval_nat_numeral</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>nat.inject</span><span> </span><span>numeral_2_eq_2</span><span> </span><span>numeral_Bit0</span><span> </span><span>numeral_Bit1</span><span> </span><span>zero_less_numeral</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.signed_int_top32|fact"><span class="entity_def" id="StampEvalThms.signed_int_top32|thm"><span>signed_int_top32</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="numeral"><span>31</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Values.html#Values.int32|type"><span>int32</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sint_range_size</span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.size32|fact"><span>size32</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>One_nat_def</span><span> </span><span>Suc_pred</span><span> </span><span>add_Suc</span><span> </span><span>add_Suc_right</span><span> </span><span>eval_nat_numeral</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>nat.inject</span><span> </span><span>numeral_2_eq_2</span><span> </span><span>numeral_Bit0</span><span> </span><span>numeral_Bit1</span><span> </span><span>zero_less_numeral</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.lower_bounds_equiv32|fact"><span class="entity_def" id="StampEvalThms.lower_bounds_equiv32|thm"><span>lower_bounds_equiv32</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="numeral"><span>31</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.upper_bounds_equiv32|fact"><span class="entity_def" id="StampEvalThms.upper_bounds_equiv32|thm"><span>upper_bounds_equiv32</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="numeral"><span>31</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.bit_bounds_min32|fact"><span class="entity_def" id="StampEvalThms.bit_bounds_min32|thm"><span>bit_bounds_min32</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>fst</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="numeral"><span>32</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="main"><span>(</span></span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Values.html#Values.int32|type"><span>int32</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds.simps|fact"><span>bit_bounds.simps</span></a><span> </span><span>fst_def</span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.signed_int_bottom32|fact"><span>signed_int_bottom32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.lower_bounds_equiv32|fact"><span>lower_bounds_equiv32</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.bit_bounds_max32|fact"><span class="entity_def" id="StampEvalThms.bit_bounds_max32|thm"><span>bit_bounds_max32</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>snd</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="numeral"><span>32</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span class="main"><span>(</span></span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Values.html#Values.int32|type"><span>int32</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds.simps|fact"><span>bit_bounds.simps</span></a><span> </span><span>fst_def</span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.signed_int_top32|fact"><span>signed_int_top32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.upper_bounds_equiv32|fact"><span>upper_bounds_equiv32</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.signed_int_bottom64|fact"><span class="entity_def" id="StampEvalThms.signed_int_bottom64|thm"><span>signed_int_bottom64</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="numeral"><span>63</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Values.html#Values.int64|type"><span>int64</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sint_range_size</span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.size64|fact"><span>size64</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>One_nat_def</span><span> </span><span>Suc_pred</span><span> </span><span>add_Suc</span><span> </span><span>add_Suc_right</span><span> </span><span>eval_nat_numeral</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>nat.inject</span><span> </span><span>numeral_2_eq_2</span><span> </span><span>numeral_Bit0</span><span> </span><span>numeral_Bit1</span><span> </span><span>zero_less_numeral</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.signed_int_top64|fact"><span class="entity_def" id="StampEvalThms.signed_int_top64|thm"><span>signed_int_top64</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="numeral"><span>63</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Values.html#Values.int64|type"><span>int64</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sint_range_size</span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.size64|fact"><span>size64</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>One_nat_def</span><span> </span><span>Suc_pred</span><span> </span><span>add_Suc</span><span> </span><span>add_Suc_right</span><span> </span><span>eval_nat_numeral</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>nat.inject</span><span> </span><span>numeral_2_eq_2</span><span> </span><span>numeral_Bit0</span><span> </span><span>numeral_Bit1</span><span> </span><span>zero_less_numeral</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.lower_bounds_equiv64|fact"><span class="entity_def" id="StampEvalThms.lower_bounds_equiv64|thm"><span>lower_bounds_equiv64</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="numeral"><span>63</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.upper_bounds_equiv64|fact"><span class="entity_def" id="StampEvalThms.upper_bounds_equiv64|thm"><span>upper_bounds_equiv64</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="numeral"><span>63</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.bit_bounds_min64|fact"><span class="entity_def" id="StampEvalThms.bit_bounds_min64|thm"><span>bit_bounds_min64</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>fst</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="numeral"><span>64</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="main"><span>(</span></span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Values.html#Values.int64|type"><span>int64</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds.simps|fact"><span>bit_bounds.simps</span></a><span> </span><span>fst_def</span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.signed_int_bottom64|fact"><span>signed_int_bottom64</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.lower_bounds_equiv64|fact"><span>lower_bounds_equiv64</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.bit_bounds_max64|fact"><span class="entity_def" id="StampEvalThms.bit_bounds_max64|thm"><span>bit_bounds_max64</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>snd</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="numeral"><span>64</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span class="main"><span>(</span></span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Values.html#Values.int64|type"><span>int64</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds.simps|fact"><span>bit_bounds.simps</span></a><span> </span><span>fst_def</span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.signed_int_top64|fact"><span>signed_int_top64</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.upper_bounds_equiv64|fact"><span>upper_bounds_equiv64</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unrestricted_32bit_always_valid|fact"><span class="entity_def" id="StampEvalThms.unrestricted_32bit_always_valid|thm"><span>unrestricted_32bit_always_valid</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp|const"><span>unrestricted_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="free"><span>lo</span></span><span> </span><span class="free"><span>hi</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.simps|fact"><span>valid_value.simps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.bit_bounds_min32|fact"><span>bit_bounds_min32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.bit_bounds_max32|fact"><span>bit_bounds_max32</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp.simps|fact"><span>unrestricted_stamp.simps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unrestricted_64bit_always_valid|fact"><span class="entity_def" id="StampEvalThms.unrestricted_64bit_always_valid|thm"><span>unrestricted_64bit_always_valid</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp|const"><span>unrestricted_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="free"><span>lo</span></span><span> </span><span class="free"><span>hi</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.simps|fact"><span>valid_value.simps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.bit_bounds_min64|fact"><span>bit_bounds_min64</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.bit_bounds_max64|fact"><span>bit_bounds_max64</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp.simps|fact"><span>unrestricted_stamp.simps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unary_undef|fact"><span class="entity_def" id="StampEvalThms.unary_undef|thm"><span>unary_undef</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval|const"><span>unary_eval</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>op</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unary_obj|fact"><span class="entity_def" id="StampEvalThms.unary_obj|thm"><span>unary_obj</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.ObjRef|const"><span>ObjRef</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval|const"><span>unary_eval</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>op</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>


</span><span class="comment1"><span>(</span><span>*</span><span> MU: try to generalise the above for various bit lengths. </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3605..3610">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.lower_bounds_equiv|fact"><span class="entity_def" id="StampEvalThms.lower_bounds_equiv|thm"><span>lower_bounds_equiv</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_3605..3610"><span>assms</span></a><span> </span><span>int_power_div_base</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3752..3757">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.upper_bounds_equiv|fact"><span class="entity_def" id="StampEvalThms.upper_bounds_equiv|thm"><span>upper_bounds_equiv</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_3752..3757"><span>assms</span></a><span> </span><span>int_power_div_base</span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Next we show that casting a word to a wider word preserves any upper/lower bounds.</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3979..3984">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.scast_max_bound|fact"><span class="entity_def" id="StampEvalThms.scast_max_bound|thm"><span>scast_max_bound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>scast</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>Word.scast_eq</span><span> </span><span>Word.sint_sbintrunc'</span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Bit_Operations.signed_take_bit_int_eq_self_iff</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>One_nat_def</span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_3979..3984"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_3979..3984"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>decr_length_less_iff</span><span> </span><span>linorder_not_le</span><span> </span><span>power_strict_increasing_iff</span><span> </span><span>signed_take_bit_int_less_self_iff</span><span> </span><span>sint_greater_eq</span><span class="main"><span>)</span></span><span> 
</span><span class="comment1"><span>(</span><span>*</span><span> helpful thms?
  Word.scast_eq: scast (?w::?'b word) = word_of_int (sint ?w)
  Word.sint_lt: sint (?x::?'a word) &lt; (2::int) ^ (LENGTH(?'a) - (1::nat)
  Word.sint_uint: sint (w::'a word) = signed_take_bit (LENGTH('a) - Suc (0::nat)) (uint w)
  Word.sint_sbintrunc' :  sint (word_of_int (?bin::int)) = signed_take_bit (LENGTH(?'a) - (1::nat)) ?bin
  Word.int_word_sint   - moves up, takes mod, then moves down
  Bit_Operations.signed_take_bit_int_eq_self_iff:
    (signed_take_bit (?n::nat) (?k::int) = ?k) = (- ((2::int) ^ ?n) ⊑ ?k ∧ ?k &lt; (2::int) ^ ?n)
  Bit_Operations.signed_take_bit_int_eq_self:
    - ((2::int) ^ (?n::nat)) ⊑ (?k::int) ⟹ ?k &lt; (2::int) ^ ?n ⟹ signed_take_bit ?n ?k = ?k
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5099..5104">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.scast_min_bound|fact"><span class="entity_def" id="StampEvalThms.scast_min_bound|thm"><span>scast_min_bound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>scast</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>Word.scast_eq</span><span> </span><span>Word.sint_sbintrunc'</span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Bit_Operations.signed_take_bit_int_eq_self_iff</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>One_nat_def</span><span> </span><span>Suc_pred</span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_5099..5104"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_5099..5104"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>len_gt_0</span><span> </span><span>less_Suc_eq</span><span> </span><span>order_less_le</span><span> </span><span>order_less_le_trans</span><span> </span><span>power_le_imp_le_exp</span><span> </span><span>signed_take_bit_int_greater_eq_self_iff</span><span> </span><span>sint_lt</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5534..5539">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.scast_bigger_max_bound|fact"><span class="entity_def" id="StampEvalThms.scast_bigger_max_bound|thm"><span>scast_bigger_max_bound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>result</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>scast</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sint_lt</span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.upper_bounds_equiv|fact"><span>upper_bounds_equiv</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.scast_max_bound|fact"><span>scast_max_bound</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_5534..5539"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>len_gt_0</span><span> </span><span>signed_scast_eq</span><span> </span><span>signed_take_bit_int_greater_self_iff</span><span> </span><span>sint_ge</span><span> </span><span>sint_less</span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.upper_bounds_equiv|fact"><span>upper_bounds_equiv</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5864..5869">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.scast_bigger_min_bound|fact"><span class="entity_def" id="StampEvalThms.scast_bigger_min_bound|thm"><span>scast_bigger_min_bound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>result</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>scast</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>result</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sint_ge</span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.lower_bounds_equiv|fact"><span>lower_bounds_equiv</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.scast_min_bound|fact"><span>scast_min_bound</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_5864..5869"><span>assms</span></a><span> </span><span>len_gt_0</span><span> </span><span>nat_less_le</span><span> </span><span>not_less</span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.scast_max_bound|fact"><span>scast_max_bound</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6135..6140">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.scast_bigger_bit_bounds|fact"><span class="entity_def" id="StampEvalThms.scast_bigger_bit_bounds|thm"><span>scast_bigger_bit_bounds</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>result</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>scast</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>fst</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>snd</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_6135..6140"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.scast_bigger_min_bound|fact"><span>scast_bigger_min_bound</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.scast_bigger_max_bound|fact"><span>scast_bigger_max_bound</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6406..6411">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unrestricted_stamp32_always_valid|fact"><span class="entity_def" id="StampEvalThms.unrestricted_stamp32_always_valid|thm"><span>unrestricted_stamp32_always_valid</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>fst</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="free"><span>bits</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>snd</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="free"><span>bits</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bits</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>bits</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>16</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>bits</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>8</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>bits</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="free"><span>ival</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp|const"><span>unrestricted_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>bits</span></span><span> </span><span class="free"><span>lo</span></span><span> </span><span class="free"><span>hi</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_6406..6411"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.simps|fact"><span>valid_value.simps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp.simps|fact"><span>unrestricted_stamp.simps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6781..6786">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.larger_stamp32_always_valid|fact"><span class="entity_def" id="StampEvalThms.larger_stamp32_always_valid|thm"><span>larger_stamp32_always_valid</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp|const"><span>unrestricted_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="free"><span>lo</span></span><span> </span><span class="free"><span>hi</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="free"><span>ival</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>16</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>8</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="free"><span>outBits</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp|const"><span>unrestricted_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="free"><span>lo</span></span><span> </span><span class="free"><span>hi</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_6781..6786"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span>  </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds.simps|fact"><span>bit_bounds.simps</span></a><span> </span><span>diff_le_mono</span><span> </span><span>linorder_not_less</span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.lower_bounds_equiv|fact"><span>lower_bounds_equiv</span></a><span> </span><span>not_numeral_le_zero</span><span> </span><span>numerals</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>power_increasing_iff</span><span> </span><span>prod.sel</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>prod.sel</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp.simps|fact"><span>unrestricted_stamp.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.simps|fact"><span>valid_value.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Possibly helpful lemmas about $signed_take_bit$, to help with UnaryNarrow.
</span><span>  Note: we could use signed to convert between bit-widths, instead of 
</span><span>  signed\_take\_bit.  But this has to be done separately for each bit-width type.</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="numeral"><span>7</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>128</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.int8|type"><span>int8</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>ML_val</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span>signed_take_bit_decr_length_iff</span><span class="antiquote"><span>}</span></span></span></span><span>›</span></span><span>
</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="operator"><span>show_types</span></span><span class="main"><span class="main"><span>=</span></span></span><span class="quasi_keyword"><span>true</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>ML_val</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span>signed_take_bit_int_less_exp</span><span class="antiquote"><span>}</span></span></span></span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.signed_take_bit_int_less_exp_word|fact"><span class="entity_def" id="StampEvalThms.signed_take_bit_int_less_exp_word|thm"><span>signed_take_bit_int_less_exp_word</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>transfer</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>not_take_bit_negative</span><span> </span><span>signed_take_bit_eq_take_bit_shift</span><span> 
     </span><span>signed_take_bit_int_less_exp</span><span> </span><span>take_bit_int_greater_self_iff</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.signed_take_bit_int_greater_eq_minus_exp_word|fact"><span class="entity_def" id="StampEvalThms.signed_take_bit_int_greater_eq_minus_exp_word|thm"><span>signed_take_bit_int_greater_eq_minus_exp_word</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>transfer</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>signed_take_bit_int_greater_eq_minus_exp</span><span> 
     </span><span>signed_take_bit_int_greater_eq_self_iff</span><span> </span><span>signed_take_bit_int_less_exp</span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Some important lemmas showing that sign\_extend\_helper produces integer results
</span><span>   whose range is determined by the inBits parameter.</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8501..8506">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.sign_extend_helper_output_range64|fact"><span class="entity_def" id="StampEvalThms.sign_extend_helper_output_range64|thm"><span>sign_extend_helper_output_range64</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.sign_extend_helper|const"><span>sign_extend_helper</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="free"><span>ival</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> or?  "(fst (bit_bounds inBits)) ≤ sint ival ∧ sint ival ≤ (snd (bit_bounds inBits))" </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8830..8834">ival</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>scast</span><span> </span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>val</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_8501..8506"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.sign_extend_helper.simps|fact"><span>sign_extend_helper.simps</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.distinct|fact"><span>Value.distinct</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.inject|fact"><span>Value.inject</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.simps|fact"><span>Value.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>14</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9022..9024">lo</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>val</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.signed_take_bit_int_greater_eq_minus_exp_word|fact"><span>signed_take_bit_int_greater_eq_minus_exp_word</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>diff_le_self</span><span> </span><span>not_less</span><span> </span><span>power_increasing_iff</span><span> </span><span>sint_below_size</span><span> </span><span>wsst_TYs</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9256..9259">lo2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="main"><span>(</span></span><span>scast</span><span> </span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>val</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>diff_less</span><span> </span><span>len_gt_0</span><span> </span><span>less_Suc_eq</span><span> </span><span>power_strict_increasing_iff</span><span> </span><span>signed_scast_eq</span><span> </span><span>signed_take_bit_int_greater_eq_self_iff</span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.signed_take_bit_int_less_exp_word|fact"><span>signed_take_bit_int_less_exp_word</span></a><span> </span><span>sint_range_size</span><span> </span><span>wsst_TYs</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>hi</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>val</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.signed_take_bit_int_less_exp_word|fact"><span>signed_take_bit_int_less_exp_word</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>diff_le_mono</span><span> </span><span>less_imp_diff_less</span><span> </span><span>linorder_not_le</span><span> </span><span>one_le_numeral</span><span> </span><span>power_increasing</span><span> </span><span>sint_above_size</span><span> </span><span>wsst_TYs</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9788..9791">hi2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="main"><span>(</span></span><span>scast</span><span> </span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>val</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>One_nat_def</span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_9022..9024"><span>lo</span></a><span> </span><span>signed_scast_eq</span><span> </span><span>signed_take_bit_int_less_eq_self_iff</span><span> </span><span>sint_lt</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds.simps|fact"><span>bit_bounds.simps</span></a><span> </span><span>fst_def</span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_8830..8834"><span>ival</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_8501..8506"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_9256..9259"><span>lo2</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_9788..9791"><span>hi2</span></a><span> </span><span>order_le_less</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.simps|fact"><span>Value.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>14</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.simps|fact"><span>Value.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>8</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.sign_extend_helper.simps|fact"><span>sign_extend_helper.simps</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10145..10150">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.sign_extend_helper_output_range32|fact"><span class="entity_def" id="StampEvalThms.sign_extend_helper_output_range32|thm"><span>sign_extend_helper_output_range32</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.sign_extend_helper|const"><span>sign_extend_helper</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="free"><span>ival</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> or? "(fst (bit_bounds inBits)) ≤ sint ival ∧ sint ival ≤ (snd (bit_bounds inBits))" </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10473..10477">ival</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ival</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>val</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_10145..10150"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.sign_extend_helper.simps|fact"><span>sign_extend_helper.simps</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.distinct|fact"><span>Value.distinct</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.inject|fact"><span>Value.inject</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.simps|fact"><span>Value.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>14</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>scast_id</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_10145..10150"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10728..10730">ok</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>∧</span></span><span>
        </span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>∧</span></span><span> 
        </span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.valid_int_widths|const"><span>valid_int_widths</span></a><span> </span><span class="main"><span>∧</span></span><span>
        </span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.valid_int_widths|const"><span>valid_int_widths</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_10145..10150"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.sign_extend_helper_ok|fact"><span>sign_extend_helper_ok</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10919..10921">lo</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>val</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.signed_take_bit_int_greater_eq_minus_exp_word|fact"><span>signed_take_bit_int_greater_eq_minus_exp_word</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>diff_le_self</span><span> </span><span>not_less</span><span> </span><span>power_increasing_iff</span><span> </span><span>sint_below_size</span><span> </span><span>wsst_TYs</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_11148..11150">hi</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>val</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.signed_take_bit_int_less_exp_word|fact"><span>signed_take_bit_int_less_exp_word</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>diff_le_mono</span><span> </span><span>less_imp_diff_less</span><span> </span><span>linorder_not_le</span><span> </span><span>one_le_numeral</span><span> </span><span>power_increasing</span><span> </span><span>sint_above_size</span><span> </span><span>wsst_TYs</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds.simps|fact"><span>bit_bounds.simps</span></a><span> </span><span>fst_def</span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_10473..10477"><span>ival</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_10145..10150"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_10473..10477"><span>ival</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_10728..10730"><span>ok</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_10919..10921"><span>lo</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_11148..11150"><span>hi</span></a><span> </span><span>order_le_less</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>




</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Support Lemmas for integer input/output size of unary and binary operators</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>These help us to deduce integer sizes through expressions.  Not used yet.</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11679..11684">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unary_abs_io32|fact"><span class="entity_def" id="StampEvalThms.unary_abs_io32|thm"><span>unary_abs_io32</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval|const"><span>unary_eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryAbs|const"><span>UnaryAbs</span></a><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="free"><span>r32</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>v32</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="bound"><span>v32</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.distinct|fact"><span>Value.distinct</span></a><span class="main"><span class="main"><span>(</span></span></span><span>9</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.simps|fact"><span>Value.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_11679..11684"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_11679..11684"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs.elims|fact"><span>intval_abs.elims</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval.simps|fact"><span>unary_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11929..11934">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unary_abs_io64|fact"><span class="entity_def" id="StampEvalThms.unary_abs_io64|thm"><span>unary_abs_io64</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval|const"><span>unary_eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryAbs|const"><span>UnaryAbs</span></a><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="free"><span>r64</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>v64</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="bound"><span>v64</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.collapse|fact"><span>Value.collapse</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.collapse|fact"><span>Value.collapse</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.collapse|fact"><span>Value.collapse</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.disc|fact"><span>Value.disc</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.exhaust_disc|fact"><span>Value.exhaust_disc</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.simps|fact"><span>Value.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>8</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_11929..11934"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_11929..11934"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs.simps|fact"><span>intval_abs.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs.simps|fact"><span>intval_abs.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32_def|fact"><span>is_IntVal32_def</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval.simps|fact"><span>unary_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unary_obj|fact"><span>unary_obj</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unary_undef|fact"><span>unary_undef</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12297..12302">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unary_neg_io32|fact"><span class="entity_def" id="StampEvalThms.unary_neg_io32|thm"><span>unary_neg_io32</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval|const"><span>unary_eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryNeg|const"><span>UnaryNeg</span></a><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="free"><span>r32</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>v32</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="bound"><span>v32</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.disc|fact"><span>Value.disc</span></a><span class="main"><span class="main"><span>(</span></span></span><span>7</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.distinct|fact"><span>Value.distinct</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_12297..12302"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_12297..12302"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_negate.elims|fact"><span>intval_negate.elims</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64_def|fact"><span>is_IntVal64_def</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval.simps|fact"><span>unary_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12553..12558">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unary_neg_io64|fact"><span class="entity_def" id="StampEvalThms.unary_neg_io64|thm"><span>unary_neg_io64</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval|const"><span>unary_eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryNeg|const"><span>UnaryNeg</span></a><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="free"><span>r64</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>v64</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="bound"><span>v64</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.disc|fact"><span>Value.disc</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.simps|fact"><span>Value.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>8</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_12553..12558"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_12553..12558"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_negate.elims|fact"><span>intval_negate.elims</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32_def|fact"><span>is_IntVal32_def</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval.simps|fact"><span>unary_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>



</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Validity of UnaryAbs</span><span>›</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>A set of lemmas for each evaltree step.
</span><span>   Questions: 
</span><span>   1. do we need separate 32/64 lemmas?  
</span><span>      Yes, I think so, because almost every operator behaves differently on each width.
</span><span>      And it makes the matching more direct, does not need is\_IntVal\_def etc.
</span><span>   2. is this top-down approach (assume the result node evaluation) best?
</span><span>      Maybe.  It seems to be the shortest/simplest trigger?</span><span>
</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13255..13260">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unary_abs_result64|fact"><span class="entity_def" id="StampEvalThms.unary_abs_result64|thm"><span>unary_abs_result64</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryAbs|const"><span>UnaryAbs</span></a><span> </span><span class="free"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>ve</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="free"><span>ve</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span>
           </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>ve</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>-</span></span><span class="free"><span>ve</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="free"><span>ve</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ve</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="skolem"><span>ve</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_13255..13260"><span>assms</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.UnaryExprE|fact"><span>UnaryExprE</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.distinct|fact"><span>Value.distinct</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs.elims|fact"><span>intval_abs.elims</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval.simps|fact"><span>unary_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.UnaryExprE|fact"><span>UnaryExprE</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.sel|fact"><span>Value.sel</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_13255..13260"><span>assms</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs.simps|fact"><span>intval_abs.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_13255..13260"><span>that</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval.simps|fact"><span>unary_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> or backwards proof (for exists version of the rule):
  apply (rule UnaryExprE[OF 1])
  subgoal premises 2 for va
    using 2 apply (cases va; simp)
     apply (metis Value.distinct(9))
    apply (meson Value.inject(2))
    done
  done
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13952..13957">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unary_abs_result32|fact"><span class="entity_def" id="StampEvalThms.unary_abs_result32|thm"><span>unary_abs_result32</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_13988..13989">1</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryAbs|const"><span>UnaryAbs</span></a><span> </span><span class="free"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>ve</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="bound"><span>ve</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span>
           </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="bound"><span>ve</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>-</span></span><span class="bound"><span>ve</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="bound"><span>ve</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ve</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="skolem"><span>ve</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_13988..13989"><span>1</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.UnaryExprE|fact"><span>UnaryExprE</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.distinct|fact"><span>Value.distinct</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs.elims|fact"><span>intval_abs.elims</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval.simps|fact"><span>unary_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.UnaryExprE|fact"><span>UnaryExprE</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.inject|fact"><span>Value.inject</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_13952..13957"><span>assms</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs.simps|fact"><span>intval_abs.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval.simps|fact"><span>unary_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14400..14405">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unary_abs_implies_valid_value|fact"><span class="entity_def" id="StampEvalThms.unary_abs_implies_valid_value|thm"><span>unary_abs_implies_valid_value</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>1</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_14480..14481">2</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval|const"><span>unary_eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryAbs|const"><span>UnaryAbs</span></a><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>3</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_14559..14560">4</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryAbs|const"><span>UnaryAbs</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_14680..14681">5</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryAbs|const"><span>UnaryAbs</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>result</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_14400..14405"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_14764..14765">6</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp|const"><span>is_IntegerStamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_14400..14405"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.elims|fact"><span>valid_value.elims</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span> </span><span class="skolem"><span>v32</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="skolem"><span>v32</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="skolem"><span>v64</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="skolem"><span>v64</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="StampEvalThms.html#offset_14480..14481"><span>2</span></a><span>"</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="StampEvalThms.html#offset_14559..14560"><span>4</span></a><span>"</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.collapse|fact"><span>Stamp.collapse</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs.simps|fact"><span>intval_abs.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs.simps|fact"><span>intval_abs.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval.simps|fact"><span>unary_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid32or64|fact"><span>valid32or64</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>cases</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_15095..15096">1</span><span> </span><span class="comment1"><span>(</span><span>*</span><span> 32 bit </span><span>*</span><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ve</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>ve</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="skolem"><span>ve</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span>
           </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="skolem"><span>ve</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="skolem"><span>ve</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="skolem"><span>ve</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_14680..14681"><span>5</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unary_abs_result32|fact"><span>unary_abs_result32</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_15299..15301">32</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="skolem"><span>ve</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_14400..14405"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
    </span><span class="comment1"><span>(</span><span>*</span><span> now deduce some stamp information </span><span>*</span><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>lo</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>hi</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_15440..15442">se</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>hi</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_14764..14765"><span>6</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp_def|fact"><span>is_IntegerStamp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="skolem"><span>b</span></span><span class="main"><span>=</span></span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>=</span></span><span class="numeral"><span>16</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>=</span></span><span class="numeral"><span>8</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>=</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>lo</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="skolem"><span>ve</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span>sint</span><span> </span><span class="skolem"><span>ve</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="skolem"><span>hi</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_14559..14560"><span>4</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_15299..15301"><span>32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_15440..15442"><span>se</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryAbs|const"><span>UnaryAbs</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp|const"><span>unrestricted_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>hi</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_15440..15442"><span>se</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="StampEvalThms.html#offset_15095..15096"><span>1</span></a><span>"</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unrestricted_32bit_always_valid|fact"><span>unrestricted_32bit_always_valid</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_15860..15861">2</span><span> </span><span class="comment1"><span>(</span><span>*</span><span> 64 bit </span><span>*</span><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ve</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>ve</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="skolem"><span>ve</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span>
           </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="skolem"><span>ve</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="skolem"><span>ve</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="skolem"><span>ve</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_14680..14681"><span>5</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unary_abs_result64|fact"><span>unary_abs_result64</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_16065..16067">64</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="skolem"><span>ve</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_14400..14405"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
    </span><span class="comment1"><span>(</span><span>*</span><span> now deduce some stamp information </span><span>*</span><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>lo</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>hi</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_16206..16208">se</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>hi</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_14764..14765"><span>6</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp_def|fact"><span>is_IntegerStamp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_16307..16314">range64</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b</span></span><span class="main"><span>=</span></span><span class="numeral"><span>64</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>lo</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="skolem"><span>ve</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span>sint</span><span> </span><span class="skolem"><span>ve</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="skolem"><span>hi</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_14559..14560"><span>4</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_16065..16067"><span>64</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_16206..16208"><span>se</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryAbs|const"><span>UnaryAbs</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp|const"><span>unrestricted_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>hi</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_16206..16208"><span>se</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="StampEvalThms.html#offset_15860..15861"><span>2</span></a><span>"</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_16307..16314"><span>range64</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unrestricted_64bit_always_valid|fact"><span>unrestricted_64bit_always_valid</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>



</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Validity of UnaryNeg</span><span>›</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> These lemmas are not needed:

lemma unary_neg_resultE:
  assumes "[m,p] ⊢ (UnaryExpr UnaryNeg e) ↦ v"
  shows "∃ ve. (([m, p] ⊢ e ↦ ve) ∧ (v = intval_negate ve))"
  using assms unary_eval.simps(2) by blast

lemma unary_neg_result64_exists:
  assumes 1: "[m,p] ⊢ (UnaryExpr UnaryNeg e) ↦ IntVal64 v"
  shows "∃ ie. (([m, p] ⊢ e ↦ IntVal64 ie) ∧ (v = -ie))" 
  apply (rule UnaryExprE[OF 1])
  subgoal premises 2 for va
    using 2 by (cases va; simp)
  done

lemma unary_neg_result64_obtains:
  assumes "[m,p] ⊢ (UnaryExpr UnaryNeg e) ↦ IntVal64 v"
  obtains ie where "([m, p] ⊢ e ↦ IntVal64 ie) ∧ (v = -ie)" 
  using assms unary_neg_resultE
  by (metis (no_types, lifting) Value.disc(3) Value.disc(6) Value.discI(2) Value.inject(2) intval_negate.elims is_IntVal32_def) 
or
proof -
  obtain ie where "[m,p] ⊢ e ↦ IntVal64 ie"
    by (metis assms UnaryExprE Value.distinct(9) intval_negate.elims unary_eval.simps(2)) 
  then show ?thesis
    by (metis UnaryExprE Value.inject(2) assms evalDet intval_negate.simps(2) that unary_eval.simps(2))
qed


lemma unary_neg_result32:
  assumes 1:"[m,p] ⊢ (UnaryExpr UnaryNeg e) ↦ IntVal32 v"
  shows "∃ ve. ([m, p] ⊢ e ↦ IntVal32 ve) ∧
           v = (if ve &lt;s 0 then -ve else ve)"
proof -
  obtain ve where "[m,p] ⊢ e ↦ IntVal32 ve"
    by (smt (verit, best) 1 UnaryExprE Value.distinct evalDet intval_abs.elims unary_eval.simps(1))
  then show ?thesis
    by (metis UnaryExprE Value.inject(1) assms evalDet intval_abs.simps(1) unary_eval.simps(1))
qed
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_18137..18142">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unary_neg_implies_valid_value|fact"><span class="entity_def" id="StampEvalThms.unary_neg_implies_valid_value|thm"><span>unary_neg_implies_valid_value</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>1</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>2</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval|const"><span>unary_eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryNeg|const"><span>UnaryNeg</span></a><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>3</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>4</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryNeg|const"><span>UnaryNeg</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_18417..18418">6</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_negate|const"><span>intval_negate</span></a><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_18137..18142"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_18485..18486">7</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp|const"><span>is_IntegerStamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_18137..18142"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.elims|fact"><span>valid_value.elims</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>lo</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>hi</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_18602..18604">se</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>hi</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_18485..18486"><span>7</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_18137..18142"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.elims|fact"><span>valid_value.elims</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp_def|fact"><span>is_IntegerStamp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryNeg|const"><span>UnaryNeg</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp|const"><span>unrestricted_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>=</span></span><span class="numeral"><span>64</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="numeral"><span>32</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>hi</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_18137..18142"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_18137..18142"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_18417..18418"><span>6</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_18602..18604"><span>se</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_negate.simps|fact"><span>intval_negate.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_negate.simps|fact"><span>intval_negate.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unrestricted_32bit_always_valid|fact"><span>unrestricted_32bit_always_valid</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unrestricted_64bit_always_valid|fact"><span>unrestricted_64bit_always_valid</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid32or64|fact"><span>valid32or64</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid_int64|fact"><span>valid_int64</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.simps|fact"><span>valid_value.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Validity of UnaryNot</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_19126..19131">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unary_not_implies_valid_value|fact"><span class="entity_def" id="StampEvalThms.unary_not_implies_valid_value|thm"><span>unary_not_implies_valid_value</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>1</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>2</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval|const"><span>unary_eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryNot|const"><span>UnaryNot</span></a><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>3</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>4</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryNot|const"><span>UnaryNot</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_19406..19407">6</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_not|const"><span>intval_not</span></a><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_19126..19131"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_19471..19472">7</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp|const"><span>is_IntegerStamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_19126..19131"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.elims|fact"><span>valid_value.elims</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>lo</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>hi</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_19588..19590">se</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>hi</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_19471..19472"><span>7</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_19126..19131"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.elims|fact"><span>valid_value.elims</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp_def|fact"><span>is_IntegerStamp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryNot|const"><span>UnaryNot</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp|const"><span>unrestricted_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>=</span></span><span class="numeral"><span>64</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="numeral"><span>32</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>hi</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_19126..19131"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_19126..19131"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_19406..19407"><span>6</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_19588..19590"><span>se</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_not.simps|fact"><span>intval_not.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_not.simps|fact"><span>intval_not.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unrestricted_32bit_always_valid|fact"><span>unrestricted_32bit_always_valid</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unrestricted_64bit_always_valid|fact"><span>unrestricted_64bit_always_valid</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid32or64|fact"><span>valid32or64</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid_int64|fact"><span>valid_int64</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.simps|fact"><span>valid_value.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Validity of UnaryLogicNegation</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20115..20120">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unary_logic_negation_implies_valid_value|fact"><span class="entity_def" id="StampEvalThms.unary_logic_negation_implies_valid_value|thm"><span>unary_logic_negation_implies_valid_value</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>1</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>2</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval|const"><span>unary_eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryLogicNegation|const"><span>UnaryLogicNegation</span></a><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>3</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>4</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryLogicNegation|const"><span>UnaryLogicNegation</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20426..20427">6</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_logic_negation|const"><span>intval_logic_negation</span></a><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_20115..20120"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20502..20503">7</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp|const"><span>is_IntegerStamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_20115..20120"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.elims|fact"><span>valid_value.elims</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>lo</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>hi</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_20619..20621">se</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>hi</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_20502..20503"><span>7</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_20115..20120"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.elims|fact"><span>valid_value.elims</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp_def|fact"><span>is_IntegerStamp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryLogicNegation|const"><span>UnaryLogicNegation</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp|const"><span>unrestricted_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>=</span></span><span class="numeral"><span>64</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="numeral"><span>32</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>hi</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_20115..20120"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_20115..20120"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_20426..20427"><span>6</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_20619..20621"><span>se</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_logic_negation.simps|fact"><span>intval_logic_negation.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_logic_negation.simps|fact"><span>intval_logic_negation.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unrestricted_32bit_always_valid|fact"><span>unrestricted_32bit_always_valid</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unrestricted_64bit_always_valid|fact"><span>unrestricted_64bit_always_valid</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid32or64|fact"><span>valid32or64</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid_int64|fact"><span>valid_int64</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.simps|fact"><span>valid_value.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Validity of UnaryNarrow</span><span>›</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> possibly helpful?
lemma sint_less:
  ‹sint w &lt; 2 ^ (LENGTH('a) - Suc 0)› for w :: ‹'a::len word›

lift_definition word_sless :: ‹'a::len word ⇒ 'a word ⇒ bool›
  is ‹λk l. signed_take_bit (LENGTH('a) - Suc 0) k &lt; signed_take_bit (LENGTH('a) - Suc 0) l›

lemma word_sle_eq [code]:
  ‹a &lt;=s b ⟷ sint a ≤ sint b›

lemma word_sless_alt: "a &lt;s b ⟷ sint a &lt; sint b"

lemma uint_lt2p [iff]: "uint x &lt; 2 ^ LENGTH('a)"
  for x :: "'a::len word"

lemma unsigned_less [simp]:
  ‹unsigned w &lt; 2 ^ LENGTH('b)› for w :: ‹'b::len word›

? lemma word_of_int_2p: "(word_of_int (2 ^ n) :: 'a::len word) = 2 ^ n"

word_of_int_inverse:
    word_of_int ?r = ?a ⟹
    0 ≤ ?r ⟹ 
    ?r &lt; 2 ^ LENGTH(?'a) ⟹ 
    uint ?a = ?r

Word.sint_uint: sint ?w = signed_take_bit (LENGTH(?'a) - Suc 0) (uint ?w)

lemma uint_range_size: "0 ≤ uint w ∧ uint w &lt; 2 ^ size w"
lemma sint_range_size: "- (2 ^ (size w - Suc 0)) ≤ sint w ∧ sint w &lt; 2 ^ (size w - Suc 0)"

lemma int_word_sint:
  ‹sint (word_of_int x :: 'a::len word) 
   = (x + 2 ^ (LENGTH('a) - 1)) mod 2 ^ LENGTH('a) - 2 ^ (LENGTH('a) - 1)›

From Bit_Operations:
lemma signed_take_bit_eq_if_positive:
  ‹signed_take_bit n a = take_bit n a› if ‹¬ bit a n›

(lots of useful mask lemmas around this one)
lemma and_mask_wi: "word_of_int i AND mask n = word_of_int (take_bit n i)"

take_bit_eq_mod: ‹take_bit n a = a mod 2 ^ n

mask_eq_exp_minus_1: ‹mask n = 2 ^ n - 1›


signed_take_bit lemmas
----------------------

lemma signed_take_bit_nonnegative_iff [simp]:
  ‹0 ≤ signed_take_bit n k ⟷ ¬ bit k n›

lemma signed_take_bit_negative_iff [simp]:
  ‹signed_take_bit n k &lt; 0 ⟷ bit k n›

lemma signed_take_bit_int_greater_eq_minus_exp [simp]:
  ‹- (2 ^ n) ≤ signed_take_bit n k›

lemma signed_take_bit_int_less_exp [simp]:
  ‹signed_take_bit n k &lt; 2 ^ n›

lemma signed_take_bit_eq_take_bit_shift:
  ‹signed_take_bit n k = take_bit (Suc n) (k + 2 ^ n) - 2 ^ n›
  for k :: int

MOD lemmas
----------
lemma word_mod_def [code]:
  "a mod b = word_of_int (uint a mod uint b)"

lemma mod_word_less:
  ‹w mod v = w› if ‹w &lt; v› for w v :: ‹'a::len word›

lemma wi_less:
  "(word_of_int n &lt; (word_of_int m :: 'a::len word)) =
    (n mod 2 ^ LENGTH('a) &lt; m mod 2 ^ LENGTH('a))"


</span><span>*</span><span>)</span></span><span> 


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Possibly helpful lemmas about mod - mostly not used now.</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.uint_distr_mod|fact"><span class="entity_def" id="StampEvalThms.uint_distr_mod|thm"><span>uint_distr_mod</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>uint</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>uval</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>uint</span><span> </span><span class="free"><span>uval</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>take_bit_eq_mod</span><span> </span><span>unsigned_take_bit_eq</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.sint_mod_not_sign_bit|fact"><span class="entity_def" id="StampEvalThms.sint_mod_not_sign_bit|thm"><span>sint_mod_not_sign_bit</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>¬</span></span><span> </span><span>bit</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>uval</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_23767..23772">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.sint_mod_upper_bound|fact"><span class="entity_def" id="StampEvalThms.sint_mod_upper_bound|thm"><span>sint_mod_upper_bound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>uval</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_23767..23772"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>signed_take_bit_eq</span><span> </span><span>take_bit_eq_mod</span><span> </span><span>take_bit_int_less_exp</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_23975..23980">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.sint_mod_lower_bound|fact"><span class="entity_def" id="StampEvalThms.sint_mod_lower_bound|thm"><span>sint_mod_lower_bound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>uval</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>sint_uint</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_23975..23980"><span>assms</span></a><span> </span><span>signed_take_bit_eq</span><span> </span><span>sint_uint</span><span> </span><span>take_bit_eq_mod</span><span> </span><span>take_bit_nonnegative</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_24209..24214">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.sint_mod_range|fact"><span class="entity_def" id="StampEvalThms.sint_mod_range|thm"><span>sint_mod_range</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>smaller</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>val</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>smaller</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>smaller</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_24209..24214"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.sint_mod_upper_bound|fact"><span>sint_mod_upper_bound</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.sint_mod_lower_bound|fact"><span>sint_mod_lower_bound</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>le_less</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_24462..24467">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.sint_mod_eq_uint|fact"><span class="entity_def" id="StampEvalThms.sint_mod_eq_uint|thm"><span>sint_mod_eq_uint</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>uval</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>uint</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>uval</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>sint_uint</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Suc_pred</span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_24462..24467"><span>assms</span></a><span> </span><span>le_less</span><span> </span><span>len_gt_0</span><span> </span><span>signed_take_bit_eq</span><span> </span><span>sint_uint</span><span> </span><span>take_bit_eq_mod</span><span>
            </span><span>take_bit_signed_take_bit</span><span> </span><span>unsigned_take_bit_eq</span><span class="main"><span>)</span></span><span>



</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_24775..24780">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unary_narrow_helper32|fact"><span class="entity_def" id="StampEvalThms.unary_narrow_helper32|thm"><span>unary_narrow_helper32</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="free"><span>i32</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>lo</span></span><span> </span><span class="free"><span>hi</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>r32</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i32</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="free"><span>r32</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="numeral"><span>16</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="numeral"><span>8</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryNarrow|const"><span>UnaryNarrow</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span> 
             </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp|const"><span>unrestricted_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="free"><span>lo</span></span><span> </span><span class="free"><span>hi</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryNarrow|const"><span>UnaryNarrow</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_25277..25279">hi</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="free"><span>r32</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="free"><span>outBits</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_24775..24780"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.signed_take_bit_int_less_exp_word|fact"><span>signed_take_bit_int_less_exp_word</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>diff_le_mono</span><span> </span><span>less_imp_diff_less</span><span> </span><span>linorder_not_le</span><span> </span><span>one_le_numeral</span><span> 
          </span><span>power_increasing</span><span> </span><span>sint_above_size</span><span> </span><span>word_size</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_25502..25504">lo</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="free"><span>outBits</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>r32</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_24775..24780"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.signed_take_bit_int_greater_eq_minus_exp_word|fact"><span>signed_take_bit_int_greater_eq_minus_exp_word</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>diff_le_self</span><span> </span><span>less_le_trans</span><span> </span><span>power_less_imp_less_exp</span><span> </span><span>sint_ge</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_24775..24780"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_25502..25504"><span>lo</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_25277..25279"><span>hi</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>int_power_div_base</span><span> </span><span>lessI</span><span> </span><span>zero_less_numeral</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_25802..25807">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unary_narrow_helper64|fact"><span class="entity_def" id="StampEvalThms.unary_narrow_helper64|thm"><span>unary_narrow_helper64</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="free"><span>i64</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>lo</span></span><span> </span><span class="free"><span>hi</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>r32</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>scast</span><span> </span><span class="free"><span>i64</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="free"><span>r32</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="numeral"><span>16</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="numeral"><span>8</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryNarrow|const"><span>UnaryNarrow</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span> 
             </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp|const"><span>unrestricted_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="free"><span>lo</span></span><span> </span><span class="free"><span>hi</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryNarrow|const"><span>UnaryNarrow</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_26312..26314">hi</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="free"><span>r32</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="free"><span>outBits</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_25802..25807"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.signed_take_bit_int_less_exp_word|fact"><span>signed_take_bit_int_less_exp_word</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>diff_le_mono</span><span> </span><span>less_imp_diff_less</span><span> </span><span>linorder_not_le</span><span> </span><span>one_le_numeral</span><span> 
          </span><span>power_increasing</span><span> </span><span>sint_above_size</span><span> </span><span>word_size</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_26537..26539">lo</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="free"><span>outBits</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>r32</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_25802..25807"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.signed_take_bit_int_greater_eq_minus_exp_word|fact"><span>signed_take_bit_int_greater_eq_minus_exp_word</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>diff_le_self</span><span> </span><span>less_le_trans</span><span> </span><span>power_less_imp_less_exp</span><span> </span><span>sint_ge</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_25802..25807"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_26537..26539"><span>lo</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_26312..26314"><span>hi</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>int_power_div_base</span><span> </span><span>lessI</span><span> </span><span>zero_less_numeral</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_26837..26842">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unary_narrow_implies_valid_value|fact"><span class="entity_def" id="StampEvalThms.unary_narrow_implies_valid_value|thm"><span>unary_narrow_implies_valid_value</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval|const"><span>unary_eval</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryNarrow|const"><span>UnaryNarrow</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryNarrow|const"><span>UnaryNarrow</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span> make some deductions about the input stamp of expr </span><span>*</span><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>i</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp|const"><span>is_IntegerStamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_26837..26842"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.elims|fact"><span>valid_value.elims</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>lo</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>hi</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_27329..27331">se</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>hi</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_26837..26842"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.elims|fact"><span>valid_value.elims</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp_def|fact"><span>is_IntegerStamp_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_27456..27457">u</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryNarrow|const"><span>UnaryNarrow</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span> 
             </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp|const"><span>unrestricted_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>hi</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span> make some general deductions about result, then split into 32/64 bit cases </span><span>*</span><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_27684..27685">r</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_narrow|const"><span>intval_narrow</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_26837..26842"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_27772..27774">ok</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>∧</span></span><span> 
        </span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.valid_int_widths|const"><span>valid_int_widths</span></a><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.valid_int_widths|const"><span>valid_int_widths</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_26837..26842"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_narrow_ok|fact"><span>intval_narrow_ok</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span> </span><span class="skolem"><span>i32</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="skolem"><span>i32</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="skolem"><span>i64</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="skolem"><span>i64</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_26837..26842"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_27329..27331"><span>se</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid32or64|fact"><span>valid32or64</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>cases</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_28085..28086">1</span><span> </span><span class="comment1"><span>(</span><span>*</span><span> input is IntVal32 and inBits &lt; 64 </span><span>*</span><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>r1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.narrow_helper|const"><span>narrow_helper</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="skolem"><span>i32</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_26837..26842"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_27684..27685"><span>r</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_narrow.simps|fact"><span>intval_narrow.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>r2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>i32</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_26837..26842"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.narrow_helper.simps|fact"><span>narrow_helper.simps</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>r32</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
      </span><span class="entity_def" id="offset_28402..28405">r32</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="skolem"><span>r32</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="skolem"><span>r32</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>i32</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="numeral"><span>16</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="numeral"><span>8</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_27772..27774"><span>ok</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_28085..28086"><span>1</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_26837..26842"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_27772..27774"><span>ok</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_28085..28086"><span>1</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_26837..26842"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_27456..27457"><span>u</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_28402..28405"><span>r32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_27329..27331"><span>se</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unary_narrow_helper32|fact"><span>unary_narrow_helper32</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span> 
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_28686..28687">2</span><span>  </span><span class="comment1"><span>(</span><span>*</span><span> input is IntVal64 and inBits=64 </span><span>*</span><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_28741..28745">in64</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>64</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_26837..26842"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_27772..27774"><span>ok</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_narrow.simps|fact"><span>intval_narrow.simps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_27684..27685"><span>r</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>64</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_28686..28687"><span>2</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_28741..28745"><span>in64</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_27684..27685"><span>r</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_27456..27457"><span>u</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_narrow.simps|fact"><span>intval_narrow.simps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unrestricted_64bit_always_valid|fact"><span>unrestricted_64bit_always_valid</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_29043..29048">False</span><span>
        </span><span class="comment1"><span>(</span><span>*</span><span> Nb. proof differs from case 1 above by scast, so not easy to combine them. </span><span>*</span><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_29156..29161">out32</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="numeral"><span>16</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="numeral"><span>8</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_27772..27774"><span>ok</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_26837..26842"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span> 
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>r1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.narrow_helper|const"><span>narrow_helper</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>(</span></span><span>scast</span><span> </span><span class="skolem"><span>i64</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_26837..26842"><span>assms</span></a><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="StampEvalThms.html#offset_28686..28687"><span>2</span></a><span>"</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_29043..29048"><span>False</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_28741..28745"><span>in64</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_27684..27685"><span>r</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_27772..27774"><span>ok</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.narrow_takes_64|fact"><span>narrow_takes_64</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>r2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>scast</span><span> </span><span class="skolem"><span>i64</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_26837..26842"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.narrow_helper.simps|fact"><span>narrow_helper.simps</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>r32</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
          </span><span class="entity_def" id="offset_29570..29573">r32</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="skolem"><span>r32</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="skolem"><span>r32</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>scast</span><span> </span><span class="skolem"><span>i64</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_26837..26842"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_28686..28687"><span>2</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_29570..29573"><span>r32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_29156..29161"><span>out32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_27456..27457"><span>u</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_27329..27331"><span>se</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unary_narrow_helper64|fact"><span>unary_narrow_helper64</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>



</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Validity of UnarySignExtend</span><span>›</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>
lemma unary_sign_extend_helper32:
  assumes "[m,p] ⊢ expr ↦ IntVal32 i32"
  assumes "stamp_expr expr = IntegerStamp b lo hi"
  assumes "r32 = signed_take_bit (outBits - 1) i32"
  assumes "result = IntVal32 r32"
  assumes "outBits=32 ∨ outBits=16 ∨ outBits=8 ∨ outBits=1"
  assumes "stamp_expr (UnaryExpr (UnaryNarrow inBits outBits) expr) 
             = unrestricted_stamp (IntegerStamp outBits lo hi)"
  shows "valid_value result (stamp_expr (UnaryExpr (UnaryNarrow inBits outBits) expr))"
proof -
  have hi: "sint r32 &lt; 2^(outBits-1)"
    using assms signed_take_bit_int_less_exp_word
    by (metis diff_le_mono less_imp_diff_less linorder_not_le one_le_numeral 
          power_increasing sint_above_size word_size)
  then have lo: "- (2^(outBits-1)) ≤ sint r32"
    using assms signed_take_bit_int_greater_eq_minus_exp_word
    by (smt (verit, best) diff_le_self less_le_trans power_less_imp_less_exp sint_ge)
  then show ?thesis
    using assms lo hi apply simp
    by (metis int_power_div_base lessI zero_less_numeral) 
qed


lemma sign_extend_range:
  assumes "(result :: int64) = scast (v :: 'a :: len word)"
  shows "fst (bit_bounds LENGTH('a)) ≤ sint result ∧ sint result ≤ snd (bit_bounds LENGTH('a))"
  using scast_bit_bounds
  using assms len_gt_0 by blast 
</span><span>*</span><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31112..31117">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.valid_sign_extend32_or_less|fact"><span class="entity_def" id="StampEvalThms.valid_sign_extend32_or_less|thm"><span>valid_sign_extend32_or_less</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>result</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.int32|type"><span>int32</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>scast</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>16</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>8</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="free"><span>result</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> 
                              </span><span class="main"><span>(</span></span><span>fst</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
                              </span><span class="main"><span>(</span></span><span>snd</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.simps|fact"><span>valid_value.simps</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.scast_bigger_bit_bounds|fact"><span>scast_bigger_bit_bounds</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_31112..31117"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31559..31564">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.valid_sign_extend64|fact"><span class="entity_def" id="StampEvalThms.valid_sign_extend64|thm"><span>valid_sign_extend64</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>result</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.int64|type"><span>int64</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>scast</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="free"><span>result</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> 
                              </span><span class="main"><span>(</span></span><span>fst</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
                              </span><span class="main"><span>(</span></span><span>snd</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.simps|fact"><span>valid_value.simps</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.scast_bigger_bit_bounds|fact"><span>scast_bigger_bit_bounds</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_31559..31564"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span>len_gt_0</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31930..31935">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unary_sign_extend_implies_valid_value|fact"><span class="entity_def" id="StampEvalThms.unary_sign_extend_implies_valid_value|thm"><span>unary_sign_extend_implies_valid_value</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval|const"><span>unary_eval</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnarySignExtend|const"><span>UnarySignExtend</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnarySignExtend|const"><span>UnarySignExtend</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span> make some deductions about the input stamp of expr </span><span>*</span><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>i</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp|const"><span>is_IntegerStamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_31930..31935"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.elims|fact"><span>valid_value.elims</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>lo</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>hi</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_32435..32437">se</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>hi</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_31930..31935"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.elims|fact"><span>valid_value.elims</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp_def|fact"><span>is_IntegerStamp_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_32562..32563">u</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnarySignExtend|const"><span>UnarySignExtend</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span> 
             </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp|const"><span>unrestricted_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>hi</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_31930..31935"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_32562..32563"><span>u</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unrestricted_64bit_always_valid|fact"><span>unrestricted_64bit_always_valid</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64_def|fact"><span>is_IntVal64_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i32</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_32935..32938">i32</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.sign_extend_helper|const"><span>sign_extend_helper</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="skolem"><span>i32</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_31930..31935"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_sign_extend.simps|fact"><span>intval_sign_extend.simps</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64_def|fact"><span>is_IntVal64_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_32435..32437"><span>se</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval.simps|fact"><span>unary_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid32or64|fact"><span>valid32or64</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_33114..33116">ok</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>∧</span></span><span> 
        </span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.valid_int_widths|const"><span>valid_int_widths</span></a><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.valid_int_widths|const"><span>valid_int_widths</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_31930..31935"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.sign_extend_helper_ok|fact"><span>sign_extend_helper_ok</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>outBits</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>64</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_33345..33349">True</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>r64</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="skolem"><span>r64</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_31930..31935"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_32935..32938"><span>i32</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.sign_extend_helper.simps|fact"><span>sign_extend_helper.simps</span></a><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_33345..33349"><span>True</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_32562..32563"><span>u</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unrestricted_64bit_always_valid|fact"><span>unrestricted_64bit_always_valid</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_33571..33576">False</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>r32</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_33605..33608">r32</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="skolem"><span>r32</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_33114..33116"><span>ok</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_32935..32938"><span>i32</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>lohi</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="skolem"><span>r32</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span>sint</span><span> </span><span class="skolem"><span>r32</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>inBits</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.sign_extend_helper_output_range32|fact"><span>sign_extend_helper_output_range32</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_33571..33576"><span>False</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.inject|fact"><span>Value.inject</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_31930..31935"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>diff_le_self</span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_32935..32938"><span>i32</span></a><span> </span><span>linorder_not_le</span><span> </span><span>power_less_imp_less_exp</span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.sign_extend_helper.simps|fact"><span>sign_extend_helper.simps</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.signed_take_bit_int_less_exp_word|fact"><span>signed_take_bit_int_less_exp_word</span></a><span> </span><span>sint_lt</span><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>bnds</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>fst</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="free"><span>inBits</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="skolem"><span>r32</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span>sint</span><span> </span><span class="skolem"><span>r32</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>snd</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds|const"><span>bit_bounds</span></a><span> </span><span class="free"><span>inBits</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.bit_bounds.simps|fact"><span>bit_bounds.simps</span></a><span> </span><span>fst_def</span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_33114..33116"><span>ok</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.lower_bounds_equiv|fact"><span>lower_bounds_equiv</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.upper_bounds_equiv|fact"><span>upper_bounds_equiv</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_34212..34213">v</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp|const"><span>unrestricted_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>inBits</span></span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>hi</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_33114..33116"><span>ok</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_33605..33608"><span>r32</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="numeral"><span>8</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="numeral"><span>16</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>outBits</span></span><span class="main"><span>=</span></span><span class="numeral"><span>32</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_33114..33116"><span>ok</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_33571..33576"><span>False</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_32562..32563"><span>u</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_33114..33116"><span>ok</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_34212..34213"><span>v</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_33605..33608"><span>r32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.larger_stamp32_always_valid|fact"><span>larger_stamp32_always_valid</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Validity of all Unary Operators</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_34589..34594">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.unary_eval_implies_valid_value|fact"><span class="entity_def" id="StampEvalThms.unary_eval_implies_valid_value|thm"><span>unary_eval_implies_valid_value</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval|const"><span>unary_eval</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>op</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>UnaryAbs</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_34589..34594"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unary_abs_implies_valid_value|fact"><span>unary_abs_implies_valid_value</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>UnaryNeg</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_34589..34594"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unary_neg_implies_valid_value|fact"><span>unary_neg_implies_valid_value</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>UnaryNot</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_34589..34594"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unary_not_implies_valid_value|fact"><span>unary_not_implies_valid_value</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>UnaryLogicNegation</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_34589..34594"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unary_logic_negation_implies_valid_value|fact"><span>unary_logic_negation_implies_valid_value</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>UnaryNarrow</span><span> </span><span class="skolem"><span>x51</span></span><span> </span><span class="skolem"><span>x52</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_34589..34594"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unary_narrow_implies_valid_value|fact"><span>unary_narrow_implies_valid_value</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>UnarySignExtend</span><span> </span><span class="skolem"><span>x61</span></span><span> </span><span class="skolem"><span>x62</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_34589..34594"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unary_sign_extend_implies_valid_value|fact"><span>unary_sign_extend_implies_valid_value</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>UnaryZeroExtend</span><span> </span><span class="skolem"><span>x71</span></span><span> </span><span class="skolem"><span>x72</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>



</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Support Lemmas for Binary Operators</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.binary_undef|fact"><span class="entity_def" id="StampEvalThms.binary_undef|thm"><span>binary_undef</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>v2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval|const"><span>bin_eval</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="free"><span>v1</span></span><span> </span><span class="free"><span>v2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>op</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.binary_obj|fact"><span class="entity_def" id="StampEvalThms.binary_obj|thm"><span>binary_obj</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.ObjRef|const"><span>ObjRef</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>v2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.ObjRef|const"><span>ObjRef</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval|const"><span>bin_eval</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="free"><span>v1</span></span><span> </span><span class="free"><span>v2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>op</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Not true any more, now we have 16 and 8 bit stamps.
lemma binary_eval_bits_equal:
  assumes "result = bin_eval op val1 val2"
  assumes "result ≠ UndefVal"
  assumes "valid_value val1 (IntegerStamp b1 lo1 hi1)"
  assumes "valid_value val2 (IntegerStamp b2 lo2 hi2)"
  shows "b1 = b2"
  using assms 
  apply (cases op; cases val1; cases val2; auto) (*slow*)
  sorry
</span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Not true any more, now that the bit-shift operators can take mixed 32/64 bit arguments.
lemma binary_eval_values:
  assumes "∃x y. result = IntVal32 x ∨ result = IntVal64 y"
  assumes "result = bin_eval op val1 val2"
  shows" ∃x32 x64 y32 y64. val1 = IntVal32 x32 ∧ val2 = IntVal32 y32 ∨ val1 = IntVal64 x64 ∧ val2 = IntVal64 y64"
  using assms apply (cases result)
      apply simp apply (cases op; cases val1; cases val2; auto)
    apply (cases op; cases val1; cases val2; auto) by auto+
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_36693..36698">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.binary_eval_implies_valid_value|fact"><span class="entity_def" id="StampEvalThms.binary_eval_implies_valid_value|thm"><span>binary_eval_implies_valid_value</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>expr1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>val1</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>expr2</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>val2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval|const"><span>bin_eval</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="free"><span>val1</span></span><span> </span><span class="free"><span>val2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val1</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val2</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="free"><span>expr1</span></span><span> </span><span class="free"><span>expr2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_37052..37061">is_IntVal</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="bound"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_36693..36698"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>op</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>val1</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>val2</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.bool_to_val.elims|fact"><span>Values.bool_to_val.elims</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_37251..37265">expr1_intstamp</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp|const"><span>is_IntegerStamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_36693..36698"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>,</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid_VoidStamp|fact"><span>valid_VoidStamp</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.binary_undef|fact"><span>binary_undef</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid_ObjStamp|fact"><span>valid_ObjStamp</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.binary_obj|fact"><span>binary_obj</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_36693..36698"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid_ObjStamp|fact"><span>valid_ObjStamp</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.binary_obj|fact"><span>binary_obj</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_36693..36698"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_37052..37061"><span>is_IntVal</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_37542..37556">expr2_intstamp</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp|const"><span>is_IntegerStamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_36693..36698"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>,</span></span><span>6</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid_VoidStamp|fact"><span>valid_VoidStamp</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.binary_undef|fact"><span>binary_undef</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid_ObjStamp|fact"><span>valid_ObjStamp</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.binary_obj|fact"><span>binary_obj</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_36693..36698"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid_ObjStamp|fact"><span>valid_ObjStamp</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.binary_obj|fact"><span>binary_obj</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_36693..36698"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_37251..37265"><span>expr1_intstamp</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>lo1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>hi1</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_37857..37872">stamp_expr1_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="skolem"><span>b1</span></span><span> </span><span class="skolem"><span>lo1</span></span><span> </span><span class="skolem"><span>hi1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp_def|fact"><span>is_IntegerStamp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_37542..37556"><span>expr2_intstamp</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b2</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>lo2</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>hi2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_38005..38020">stamp_expr2_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="skolem"><span>b2</span></span><span> </span><span class="skolem"><span>lo2</span></span><span> </span><span class="skolem"><span>hi2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp_def|fact"><span>is_IntegerStamp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Problem: this is no longer true for the bit-shifting operators:
  have "∃ x32 x64 y32 y64 . (val1 = IntVal32 x32 ∧ val2 = IntVal32 y32) ∨ (val1 = IntVal64 x64 ∧ val2 = IntVal64 y64)"
    using is_IntVal assms(3) binary_eval_values
    by presburger
</span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> TODO: we have a problem here with the 32-bit case, because
   the input stamps could be 32/16/8 bits.
   stamp_binary requires them to be the same, 
   but evaltree does not.
   Solution 1: add a graph invariant and then a tree invariant?
   Solution 2: relax stamp_binary to expand input stamps to 32-bit?
</span><span>*</span><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>b2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_36693..36698"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>,</span></span><span>5</span><span class="main"><span>,</span></span><span>6</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_37857..37872"><span>stamp_expr1_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_38005..38020"><span>stamp_expr2_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_38773..38782">stamp_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="free"><span>expr1</span></span><span> </span><span class="free"><span>expr2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
      </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>op</span></span><span> </span><span class="main"><span>∉</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.fixed_32|const"><span>fixed_32</span></a><span> </span><span class="main"><span>∧</span></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>=</span></span><span class="numeral"><span>64</span></span><span>
             </span><span class="keyword1"><span>then</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp|const"><span>unrestricted_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="skolem"><span>lo1</span></span><span> </span><span class="skolem"><span>hi1</span></span><span class="main"><span>)</span></span><span>
             </span><span class="keyword1"><span>else</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp|const"><span>unrestricted_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="skolem"><span>lo1</span></span><span> </span><span class="skolem"><span>hi1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr.simps|fact"><span>stamp_expr.simps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_binary.simps|fact"><span>stamp_binary.simps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_37857..37872"><span>stamp_expr1_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_38005..38020"><span>stamp_expr2_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>op</span></span><span> </span><span class="main"><span>∉</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.fixed_32|const"><span>fixed_32</span></a><span> </span><span class="main"><span>∧</span></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>=</span></span><span class="numeral"><span>64</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_39164..39168">True</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>bit64</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_37857..37872"><span>stamp_expr1_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_36693..36698"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>op</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>val1</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>val2</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>slow</span><span>*</span><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39164..39168"><span>True</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_38773..38782"><span>stamp_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unrestricted_64bit_always_valid|fact"><span>unrestricted_64bit_always_valid</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_39425..39430">False</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>bit32</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>result</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_36693..36698"><span>assms</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_37857..37872"><span>stamp_expr1_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>op</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>val1</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>val2</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>slow</span><span>*</span><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.bool_to_val.elims|fact"><span>Values.bool_to_val.elims</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39425..39430"><span>False</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_38773..38782"><span>stamp_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unrestricted_32bit_always_valid|fact"><span>unrestricted_32bit_always_valid</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>



</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Validity of Stamp Meet and Join Operators</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_39800..39805">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.stamp_meet_is_valid|fact"><span class="entity_def" id="StampEvalThms.stamp_meet_is_valid|thm"><span>stamp_meet_is_valid</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="free"><span>stamp1</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="free"><span>stamp2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet|const"><span>meet</span></a><span> </span><span class="free"><span>stamp1</span></span><span> </span><span class="free"><span>stamp2</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IllegalStamp|const"><span>IllegalStamp</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet|const"><span>meet</span></a><span> </span><span class="free"><span>stamp1</span></span><span> </span><span class="free"><span>stamp2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>stamp1</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>VoidStamp</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.exhaust|fact"><span>Stamp.exhaust</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>37</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>44</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>51</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>58</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>65</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>66</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>67</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_40238..40250">IntegerStamp</span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>hi</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b2</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>lo2</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>hi2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_40288..40298">stamp2_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>stamp2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="skolem"><span>b2</span></span><span> </span><span class="skolem"><span>lo2</span></span><span> </span><span class="skolem"><span>hi2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40238..40250"><span>IntegerStamp</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>45</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>52</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>59</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>65</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>66</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>67</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp.cases|fact"><span>unrestricted_stamp.cases</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>b2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40238..40250"><span>IntegerStamp</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_40600..40608">meet_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet|const"><span>meet</span></a><span> </span><span class="free"><span>stamp1</span></span><span> </span><span class="free"><span>stamp2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span>min</span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>lo2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>max</span><span> </span><span class="skolem"><span>hi</span></span><span> </span><span class="skolem"><span>hi2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40238..40250"><span>IntegerStamp</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40288..40298"><span>stamp2_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>64</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_40777..40781">True</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_40808..40815">val_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40238..40250"><span>IntegerStamp</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid64|fact"><span>valid64</span></a><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>b2</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40288..40298"><span>stamp2_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_40934..40937">min</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span>min</span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>lo2</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40808..40815"><span>val_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40238..40250"><span>IntegerStamp</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40288..40298"><span>stamp2_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_41065..41068">max</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>max</span><span> </span><span class="skolem"><span>hi</span></span><span> </span><span class="skolem"><span>hi2</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40808..40815"><span>val_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40238..40250"><span>IntegerStamp</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40288..40298"><span>stamp2_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40934..40937"><span>min</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_41065..41068"><span>max</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40777..40781"><span>True</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40600..40608"><span>meet_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40808..40815"><span>val_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_41304..41309">bit32</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>16</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>8</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40238..40250"><span>IntegerStamp</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.simps|fact"><span>valid_value.simps</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid32or64_both|fact"><span>valid32or64_both</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>b2</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40288..40298"><span>stamp2_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_41481..41488">val_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40238..40250"><span>IntegerStamp</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid32|fact"><span>valid32</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid_int16|fact"><span>valid_int16</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid_int8|fact"><span>valid_int8</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.valid_int1|fact"><span>valid_int1</span></a><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>b2</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40288..40298"><span>stamp2_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_41642..41645">min</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span>min</span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>lo2</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_41481..41488"><span>val_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40238..40250"><span>IntegerStamp</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40288..40298"><span>stamp2_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_41773..41776">max</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>max</span><span> </span><span class="skolem"><span>hi</span></span><span> </span><span class="skolem"><span>hi2</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_41481..41488"><span>val_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40238..40250"><span>IntegerStamp</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40288..40298"><span>stamp2_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_41642..41645"><span>min</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_41773..41776"><span>max</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_41304..41309"><span>bit32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_40600..40608"><span>meet_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_41481..41488"><span>val_def</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.simps|fact"><span>valid_value.simps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>KlassPointerStamp</span><span> </span><span class="skolem"><span>x31</span></span><span> </span><span class="skolem"><span>x32</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.elims|fact"><span>valid_value.elims</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>MethodCountersPointerStamp</span><span> </span><span class="skolem"><span>x41</span></span><span> </span><span class="skolem"><span>x42</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.elims|fact"><span>valid_value.elims</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>MethodPointersStamp</span><span> </span><span class="skolem"><span>x51</span></span><span> </span><span class="skolem"><span>x52</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.elims|fact"><span>valid_value.elims</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>ObjectStamp</span><span> </span><span class="skolem"><span>x61</span></span><span> </span><span class="skolem"><span>x62</span></span><span> </span><span class="skolem"><span>x63</span></span><span> </span><span class="skolem"><span>x64</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span>(</span></span><span>34</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>RawPointerStamp</span><span> </span><span class="skolem"><span>x71</span></span><span> </span><span class="skolem"><span>x72</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span>(</span></span><span>35</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>IllegalStamp</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_39800..39805"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span>(</span></span><span>36</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_42703..42708">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.conditional_eval_implies_valid_value|fact"><span class="entity_def" id="StampEvalThms.conditional_eval_implies_valid_value|thm"><span>conditional_eval_implies_valid_value</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>cond</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>condv</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>expr</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.val_to_bool|const"><span>val_to_bool</span></a><span> </span><span class="free"><span>condv</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="free"><span>expr1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="free"><span>expr2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>condv</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>cond</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.compatible|const"><span>compatible</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.ConditionalExpr|const"><span>ConditionalExpr</span></a><span> </span><span class="free"><span>cond</span></span><span> </span><span class="free"><span>expr1</span></span><span> </span><span class="free"><span>expr2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet|const"><span>meet</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IllegalStamp|const"><span>IllegalStamp</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_42703..42708"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.distinct|fact"><span>Stamp.distinct</span></a><span class="main"><span class="main"><span>(</span></span></span><span>13</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.distinct|fact"><span>Stamp.distinct</span></a><span class="main"><span class="main"><span>(</span></span></span><span>25</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.compatible.elims|fact"><span>compatible.elims</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.meet.simps|fact"><span>meet.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.stamp_meet_is_valid|fact"><span>stamp_meet_is_valid</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr.simps|fact"><span>stamp_expr.simps</span></a><span class="main"><span>(</span></span><span>6</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_42703..42708"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_42703..42708"><span>assms</span></a><span class="main"><span>(</span></span><span>6</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>



</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Validity of Whole Expression Tree Evaluation</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>experiment</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_43523..43528">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.experiment22029228.stamp_implies_valid_value|fact"><span class="entity_def" id="StampEvalThms.experiment22029228.stamp_implies_valid_value|thm"><span>stamp_implies_valid_value</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>expr</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>expr</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_43523..43528"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>expr</span></span></span><span> </span><span class="quoted"><span class="free"><span>val</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>UnaryExpr</span><span> </span><span class="skolem"><span>expr</span></span><span> </span><span class="skolem"><span>val</span></span><span> </span><span class="skolem"><span>result</span></span><span> </span><span class="skolem"><span>op</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.unary_eval_implies_valid_value|fact"><span>unary_eval_implies_valid_value</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>BinaryExpr</span><span> </span><span class="skolem"><span>expr1</span></span><span> </span><span class="skolem"><span>val1</span></span><span> </span><span class="skolem"><span>expr2</span></span><span> </span><span class="skolem"><span>val2</span></span><span> </span><span class="skolem"><span>result</span></span><span> </span><span class="skolem"><span>op</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.binary_eval_implies_valid_value|fact"><span>binary_eval_implies_valid_value</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>ConditionalExpr</span><span> </span><span class="skolem"><span>cond</span></span><span> </span><span class="skolem"><span>condv</span></span><span> </span><span class="skolem"><span>expr</span></span><span> </span><span class="skolem"><span>expr1</span></span><span> </span><span class="skolem"><span>expr2</span></span><span> </span><span class="skolem"><span>val</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.conditional_eval_implies_valid_value|fact"><span>conditional_eval_implies_valid_value</span></a><span> </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>ParameterExpr</span><span> </span><span class="skolem"><span>x1</span></span><span> </span><span class="skolem"><span>x2</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>LeafExpr</span><span> </span><span class="skolem"><span>x1</span></span><span> </span><span class="skolem"><span>x2</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>ConstantExpr</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_44230..44235">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.experiment22029228.value_range|fact"><span class="entity_def" id="StampEvalThms.experiment22029228.value_range|thm"><span>value_range</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>val</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="bound"><span>val</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>e</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_44230..44235"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_44354..44359">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.upper_bound_32|fact"><span class="entity_def" id="StampEvalThms.upper_bound_32|thm"><span>upper_bound_32</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>h</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>h</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_upper|const"><span>stpi_upper</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_44354..44359"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_44528..44533">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.upper_bound_64|fact"><span class="entity_def" id="StampEvalThms.upper_bound_64|thm"><span>upper_bound_64</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>h</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>h</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_upper|const"><span>stpi_upper</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_44528..44533"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_44702..44707">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.lower_bound_32|fact"><span class="entity_def" id="StampEvalThms.lower_bound_32|thm"><span>lower_bound_32</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>h</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>h</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_lower|const"><span>stpi_lower</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_44702..44707"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_44876..44881">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.lower_bound_64|fact"><span class="entity_def" id="StampEvalThms.lower_bound_64|thm"><span>lower_bound_64</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>h</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>h</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span>sint</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_lower|const"><span>stpi_lower</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_44876..44881"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> these two proofs should really not be so tricky </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_45106..45111">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.stamp_under_semantics|fact"><span class="entity_def" id="StampEvalThms.stamp_under_semantics|thm"><span>stamp_under_semantics</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.stamp_under|const"><span>stamp_under</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinIntegerLessThan|const"><span>BinIntegerLessThan</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_45260..45266">xvalid</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_45338..45344">yvalid</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.val_to_bool|const"><span>val_to_bool</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xval</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_45458..45466">xval_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="skolem"><span>xval</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45106..45111"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>yval</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_45536..45544">yval_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="skolem"><span>yval</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45106..45111"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.BinaryExprE|fact"><span>BinaryExprE</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.collapse|fact"><span>Value.collapse</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.collapse|fact"><span>Value.collapse</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.exhaust_disc|fact"><span>Value.exhaust_disc</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45106..45111"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.binary_obj|fact"><span>binary_obj</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evaltree_not_undef|fact"><span>evaltree_not_undef</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.simps|fact"><span>valid_value.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>19</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45458..45466"><span>xval_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45260..45266"><span>xvalid</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>yval</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>yval</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.BinaryExprE|fact"><span>BinaryExprE</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.collapse|fact"><span>Value.collapse</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.collapse|fact"><span>Value.collapse</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.exhaust_disc|fact"><span>Value.exhaust_disc</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45106..45111"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.binary_obj|fact"><span>binary_obj</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evaltree_not_undef|fact"><span>evaltree_not_undef</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value.simps|fact"><span>valid_value.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>19</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45536..45544"><span>yval_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45338..45344"><span>yvalid</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>yval</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.BinaryExprE|fact"><span>BinaryExprE</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.collapse|fact"><span>Value.collapse</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>yval</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>yval</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45106..45111"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span>(</span></span><span>11</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_less_than.simps|fact"><span>intval_less_than.simps</span></a><span class="main"><span>(</span></span><span>12</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_less_than.simps|fact"><span>intval_less_than.simps</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32_def|fact"><span>is_IntVal32_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45458..45466"><span>xval_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45536..45544"><span>yval_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>12</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>yval</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>yval</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>yval</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>yval</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_less_than|const"><span>intval_less_than</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="skolem"><span>yval</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45106..45111"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>12</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.unfold_binary|fact"><span>unfold_binary</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45458..45466"><span>xval_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45536..45544"><span>yval_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>(</span><span>*</span><span> using assms(2) binary_eval_bits_equal valid_value.elims(2) xval_def
    by (metis Value.distinct(9) Value.distinct_disc(9) ‹is_IntVal32 yval ∨ is_IntVal64 yval› ‹is_IntVal64 xval = is_IntVal64 yval› is_IntVal32_def xvalid yval_def yvalid)
    </span><span>*</span><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>(</span><span>*</span><span> by (metis (full_types) ‹is_IntVal64 xval = is_IntVal64 yval› is_IntVal64_def stamprange valid_value.simps(2) xval_def xvalid yval_def yvalid)
    </span><span>*</span><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_47364..47370">xvalid</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45260..45266"><span>xvalid</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45458..45466"><span>xval_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_47447..47453">yvalid</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="skolem"><span>yval</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45338..45344"><span>yvalid</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45536..45544"><span>yval_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_47534..47535">c</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span>"</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xxval</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_47579..47582">x32</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="skolem"><span>xxval</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_47534..47535"><span>c</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32_def|fact"><span>is_IntVal32_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>yyval</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_47670..47673">y32</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>yval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="skolem"><span>yyval</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>yval</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_47534..47535"><span>c</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32_def|fact"><span>is_IntVal32_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_47784..47786">xs</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_47534..47535"><span>c</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_47985..47987">ys</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_47534..47535"><span>c</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="skolem"><span>xxval</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_upper|const"><span>stpi_upper</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.upper_bound_32|fact"><span>upper_bound_32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_47579..47582"><span>x32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_47784..47786"><span>xs</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_47364..47370"><span>xvalid</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_lower|const"><span>stpi_lower</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="skolem"><span>yyval</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.lower_bound_32|fact"><span>lower_bound_32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_47670..47673"><span>y32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_47985..47987"><span>ys</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_47447..47453"><span>yvalid</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_upper|const"><span>stpi_upper</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_lower|const"><span>stpi_lower</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45106..45111"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.stamp_under.simps|fact"><span>stamp_under.simps</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xxval</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="skolem"><span>yyval</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45106..45111"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.stamp_under.simps|fact"><span>stamp_under.simps</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span>sint</span><span> </span><span class="skolem"><span>xxval</span></span><span> </span><span class="main"><span>⊑</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_upper|const"><span>stpi_upper</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_lower|const"><span>stpi_lower</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⊑</span></span><span> </span><span>sint</span><span> </span><span class="skolem"><span>yyval</span></span><span>›</span></span></span><span> </span><span>word_sless_alt</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_less_than|const"><span>intval_less_than</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="skolem"><span>yval</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_47579..47582"><span>x32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_47670..47673"><span>y32</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_48806..48807">}</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_48815..48821">case32</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_48806..48807"><span>this</span></a><span>
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_48840..48841">c</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span>"</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xxval</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_48885..48888">x64</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="skolem"><span>xxval</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_48840..48841"><span>c</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64_def|fact"><span>is_IntVal64_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>yyval</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_48976..48979">y64</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>yval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="skolem"><span>yyval</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>yval</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_48840..48841"><span>c</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64_def|fact"><span>is_IntVal64_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_49090..49092">xs</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_48840..48841"><span>c</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_49291..49293">ys</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_48840..48841"><span>c</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="skolem"><span>xxval</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_upper|const"><span>stpi_upper</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.upper_bound_64|fact"><span>upper_bound_64</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_48885..48888"><span>x64</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_49090..49092"><span>xs</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_47364..47370"><span>xvalid</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_lower|const"><span>stpi_lower</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="skolem"><span>yyval</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.lower_bound_64|fact"><span>lower_bound_64</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_48976..48979"><span>y64</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_49291..49293"><span>ys</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_47447..47453"><span>yvalid</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_upper|const"><span>stpi_upper</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_lower|const"><span>stpi_lower</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45106..45111"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.stamp_under.simps|fact"><span>stamp_under.simps</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xxval</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="skolem"><span>yyval</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45106..45111"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.stamp_under.simps|fact"><span>stamp_under.simps</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span>sint</span><span> </span><span class="skolem"><span>xxval</span></span><span> </span><span class="main"><span>⊑</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_upper|const"><span>stpi_upper</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_lower|const"><span>stpi_lower</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⊑</span></span><span> </span><span>sint</span><span> </span><span class="skolem"><span>yyval</span></span><span>›</span></span></span><span> </span><span>word_sless_alt</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_less_than|const"><span>intval_less_than</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="skolem"><span>yval</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_48885..48888"><span>x64</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_48976..48979"><span>y64</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_50112..50113">}</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_50121..50127">case64</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50112..50113"><span>this</span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_less_than|const"><span>intval_less_than</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="skolem"><span>yval</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_48815..48821"><span>case32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50121..50127"><span>case64</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.EvalTreeE|fact"><span>EvalTreeE</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45106..45111"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>12</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.val_to_bool.simps|fact"><span>val_to_bool.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45458..45466"><span>xval_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_45536..45544"><span>yval_def</span></a><span> </span><span>zero_neq_one</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_50402..50407">lemma</span></span></span><span> </span><span class="entity_def" id="StampEvalThms.stamp_under_semantics_inversed|fact"><span class="entity_def" id="StampEvalThms.stamp_under_semantics_inversed|thm"><span>stamp_under_semantics_inversed</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.stamp_under|const"><span>stamp_under</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinIntegerLessThan|const"><span>BinIntegerLessThan</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_50565..50571">xvalid</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_50643..50649">yvalid</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>¬</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.val_to_bool|const"><span>val_to_bool</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xval</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_50766..50774">xval_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="skolem"><span>xval</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50402..50407"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>yval</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_50844..50852">yval_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="skolem"><span>yval</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50402..50407"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.BinaryExprE|fact"><span>BinaryExprE</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.discI|fact"><span>Value.discI</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.discI|fact"><span>Value.discI</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50402..50407"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>12</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.binary_obj|fact"><span>binary_obj</span></a><span> 
       </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.constantAsStamp.elims|fact"><span>constantAsStamp.elims</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evaltree_not_undef|fact"><span>evaltree_not_undef</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_less_than.simps|fact"><span>intval_less_than.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>9</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50766..50774"><span>xval_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>yval</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>yval</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.BinaryExprE|fact"><span>BinaryExprE</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.discI|fact"><span>Value.discI</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.discI|fact"><span>Value.discI</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50402..50407"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>12</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#StampEvalThms.binary_obj|fact"><span>binary_obj</span></a><span> 
        </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.constantAsStamp.elims|fact"><span>constantAsStamp.elims</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evaltree_not_undef|fact"><span>evaltree_not_undef</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_less_than.simps|fact"><span>intval_less_than.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>16</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50844..50852"><span>yval_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>yval</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.BinaryExprE|fact"><span>BinaryExprE</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.collapse|fact"><span>Value.collapse</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>yval</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>yval</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50402..50407"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>12</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_less_than.simps|fact"><span>intval_less_than.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>12</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_less_than.simps|fact"><span>intval_less_than.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32_def|fact"><span>is_IntVal32_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50766..50774"><span>xval_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50844..50852"><span>yval_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>yval</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>yval</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>yval</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>yval</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_less_than|const"><span>intval_less_than</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="skolem"><span>yval</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50402..50407"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.BinaryExprE|fact"><span>BinaryExprE</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>12</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50766..50774"><span>xval_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50844..50852"><span>yval_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>(</span><span>*</span><span> by (smt (verit) BinaryExprE Value.discI(2) Value.distinct_disc(9) assms(2) binary_eval_bits_equal xvalid yvalid valid_value.elims(2) xval_def)
    </span><span>*</span><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>(</span><span>*</span><span> by (smt (verit, best) BinaryExprE ‹intval_less_than xval yval ≠ UndefVal› assms(2) binary_eval_bits_equal intval_less_than.simps(5) is_IntVal64_def xvalid yvalid valid_value.elims(2) yval_def)
    </span><span>*</span><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_52624..52630">xvalid</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50565..50571"><span>xvalid</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50766..50774"><span>xval_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_52707..52713">yvalid</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="skolem"><span>yval</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50643..50649"><span>yvalid</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50844..50852"><span>yval_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_52794..52795">c</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span>"</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xxval</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_52839..52842">x32</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="skolem"><span>xxval</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_52794..52795"><span>c</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32_def|fact"><span>is_IntVal32_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>yyval</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_52930..52933">y32</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>yval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="skolem"><span>yyval</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>yval</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_52794..52795"><span>c</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32_def|fact"><span>is_IntVal32_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_53044..53046">xs</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_52794..52795"><span>c</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_53245..53247">ys</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_52794..52795"><span>c</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="skolem"><span>yyval</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_upper|const"><span>stpi_upper</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_52930..52933"><span>y32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_53245..53247"><span>ys</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_52707..52713"><span>yvalid</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_lower|const"><span>stpi_lower</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="skolem"><span>xxval</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_52839..52842"><span>x32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_53044..53046"><span>xs</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_52624..52630"><span>xvalid</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_upper|const"><span>stpi_upper</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_lower|const"><span>stpi_lower</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50402..50407"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.stamp_under.simps|fact"><span>stamp_under.simps</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>yyval</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="skolem"><span>xxval</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50402..50407"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.stamp_under.simps|fact"><span>stamp_under.simps</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span>sint</span><span> </span><span class="skolem"><span>yyval</span></span><span> </span><span class="main"><span>⊑</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_upper|const"><span>stpi_upper</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_lower|const"><span>stpi_lower</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⊑</span></span><span> </span><span>sint</span><span> </span><span class="skolem"><span>xxval</span></span><span>›</span></span></span><span> </span><span>word_sless_alt</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_less_than|const"><span>intval_less_than</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="skolem"><span>yval</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>signed.less_not_sym</span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_52839..52842"><span>x32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_52930..52933"><span>y32</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_54050..54051">}</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_54059..54065">case32</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_54050..54051"><span>this</span></a><span>
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_54084..54085">c</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span>"</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xxval</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_54129..54132">x64</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="skolem"><span>xxval</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_54084..54085"><span>c</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64_def|fact"><span>is_IntVal64_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>yyval</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_54220..54223">y64</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>yval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal64|const"><span>IntVal64</span></a><span> </span><span class="skolem"><span>yyval</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>yval</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_54084..54085"><span>c</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64_def|fact"><span>is_IntVal64_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_54334..54336">xs</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_54084..54085"><span>c</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_54535..54537">ys</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_54084..54085"><span>c</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="skolem"><span>yyval</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_upper|const"><span>stpi_upper</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_54220..54223"><span>y64</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_54535..54537"><span>ys</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_52707..52713"><span>yvalid</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_lower|const"><span>stpi_lower</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span>sint</span><span> </span><span class="skolem"><span>xxval</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_54129..54132"><span>x64</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_54334..54336"><span>xs</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_52624..52630"><span>xvalid</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_upper|const"><span>stpi_upper</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_lower|const"><span>stpi_lower</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50402..50407"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.stamp_under.simps|fact"><span>stamp_under.simps</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>yyval</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="skolem"><span>xxval</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50402..50407"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.stamp_under.simps|fact"><span>stamp_under.simps</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span>sint</span><span> </span><span class="skolem"><span>yyval</span></span><span> </span><span class="main"><span>⊑</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_upper|const"><span>stpi_upper</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stpi_lower|const"><span>stpi_lower</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⊑</span></span><span> </span><span>sint</span><span> </span><span class="skolem"><span>xxval</span></span><span>›</span></span></span><span> </span><span>word_sless_alt</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_less_than|const"><span>intval_less_than</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="skolem"><span>yval</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>signed.less_imp_triv</span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_54129..54132"><span>x64</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_54220..54223"><span>y64</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_55341..55342">}</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_55350..55356">case64</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_55341..55342"><span>this</span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_less_than|const"><span>intval_less_than</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="skolem"><span>yval</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal32|const"><span>IntVal32</span></a><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal32|const"><span>is_IntVal32</span></a><span> </span><span class="skolem"><span>xval</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal64|const"><span>is_IntVal64</span></a><span> </span><span class="skolem"><span>xval</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_54059..54065"><span>case32</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_55350..55356"><span>case64</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.BinaryExprE|fact"><span>BinaryExprE</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50402..50407"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>12</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.val_to_bool.simps|fact"><span>val_to_bool.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50766..50774"><span>xval_def</span></a><span> </span><a class="entity_ref" href="StampEvalThms.html#offset_50844..50852"><span>yval_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre>
</body>

</html>