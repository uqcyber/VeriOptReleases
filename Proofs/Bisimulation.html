<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Bisimulation</title>
</head>


<body>
<div class="head">
<h1>Theory Bisimulation</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Proof Infrastructure›</span></span>
<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹Bisimulation›</span></span>

<span class="keyword1"><span class="command">theory</span></span> Bisimulation
<span class="keyword2"><span class="keyword">imports</span></span>
  <a href="Stuttering.html">Stuttering</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="comment1">(* WIP strong bisimilar
fun strongly_bisimilar :: "
(IRGraph × ID × MapState × FieldRefHeap) rel
⇒ (IRGraph × ID × MapState × FieldRefHeap)
⇒ (IRGraph × ID × MapState × FieldRefHeap)
⇒ bool"
  where
  "strongly_bisimilar ℛ (g1, nid1, m1, h1) (g2, nid2, m2, h2) =
    ((((g1, nid1, m1, h1), (g2, nid2, m2, h2)) ∈ ℛ) ⟶
    ((∀P'. (g1 ⊢ (nid1, m1, h1) → P') ⟶ (∃Q' . (g2 ⊢ (nid2, m2, h2) → Q') ∧ ((g1,P'), (g2,Q')) ∈ ℛ)) ∧
    (∀Q'. (g2 ⊢ (nid2, m2, h2) → Q') ⟶ (∃P' . (g1 ⊢ (nid1, m1, h1) → P') ∧ ((g1,P'), (g2,Q')) ∈ ℛ))))"
*)</span>

<span class="keyword1"><span class="command">inductive</span></span> <span class="entity">weak_bisimilar</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ID <span class="main">⇒</span> IRGraph <span class="main">⇒</span> IRGraph <span class="main">⇒</span> bool"</span></span>
  <span class="main">(</span><span class="quoted">"_ <span class="keyword1">.</span> _ <span class="keyword1">∼</span> _"</span><span class="main">)</span> <span class="keyword2"><span class="keyword">for</span></span> <span class="entity">nid</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="main">⟦</span><span class="main">∀</span><span class="bound">P'</span><span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="free"><span class="bound"><span class="entity">m</span></span></span> <span class="free"><span class="bound"><span class="entity">h</span></span></span> <span class="main">⊢</span> <span class="free">nid</span> <span class="main">↝</span> <span class="bound">P'</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">Q'</span> <span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">g'</span></span></span> <span class="free"><span class="bound"><span class="entity">m</span></span></span> <span class="free"><span class="bound"><span class="entity">h</span></span></span> <span class="main">⊢</span> <span class="free">nid</span> <span class="main">↝</span> <span class="bound">Q'</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">P'</span> <span class="main">=</span> <span class="bound">Q'</span><span class="main">)</span><span class="main">;</span>
    <span class="main">∀</span><span class="bound">Q'</span><span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">g'</span></span></span> <span class="free"><span class="bound"><span class="entity">m</span></span></span> <span class="free"><span class="bound"><span class="entity">h</span></span></span> <span class="main">⊢</span> <span class="free">nid</span> <span class="main">↝</span> <span class="bound">Q'</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">P'</span> <span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="free"><span class="bound"><span class="entity">m</span></span></span> <span class="free"><span class="bound"><span class="entity">h</span></span></span> <span class="main">⊢</span> <span class="free">nid</span> <span class="main">↝</span> <span class="bound">P'</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">P'</span> <span class="main">=</span> <span class="bound">Q'</span><span class="main">)</span><span class="main">⟧</span>
  <span class="main">⟹</span> <span class="free">nid</span> <span class="main"><span class="free">.</span></span> <span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="main"><span class="free">∼</span></span> <span class="free"><span class="bound"><span class="entity">g'</span></span></span>"</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹A strong bisimilution between no-op transitions›</span></span>
<span class="keyword1"><span class="command">inductive</span></span> <span class="entity">strong_noop_bisimilar</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ID <span class="main">⇒</span> IRGraph <span class="main">⇒</span> IRGraph <span class="main">⇒</span> bool"</span></span>
  <span class="main">(</span><span class="quoted">"_ <span class="keyword1">|</span> _ <span class="keyword1">∼</span> _"</span><span class="main">)</span> <span class="keyword2"><span class="keyword">for</span></span> <span class="entity">nid</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="main">⟦</span><span class="main">∀</span><span class="bound">P'</span><span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="main">⊢</span> <span class="main">(</span><span class="free">nid</span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">m</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">h</span></span></span><span class="main">)</span> <span class="main">→</span> <span class="bound">P'</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">Q'</span> <span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">g'</span></span></span> <span class="main">⊢</span> <span class="main">(</span><span class="free">nid</span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">m</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">h</span></span></span><span class="main">)</span> <span class="main">→</span> <span class="bound">Q'</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">P'</span> <span class="main">=</span> <span class="bound">Q'</span><span class="main">)</span><span class="main">;</span>
    <span class="main">∀</span><span class="bound">Q'</span><span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">g'</span></span></span> <span class="main">⊢</span> <span class="main">(</span><span class="free">nid</span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">m</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">h</span></span></span><span class="main">)</span> <span class="main">→</span> <span class="bound">Q'</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">P'</span> <span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="main">⊢</span> <span class="main">(</span><span class="free">nid</span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">m</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">h</span></span></span><span class="main">)</span> <span class="main">→</span> <span class="bound">P'</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">P'</span> <span class="main">=</span> <span class="bound">Q'</span><span class="main">)</span><span class="main">⟧</span>
  <span class="main">⟹</span> <span class="free">nid</span> <span class="main"><span class="free">|</span></span> <span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="main"><span class="free">∼</span></span> <span class="free"><span class="bound"><span class="entity">g'</span></span></span>"</span></span>

<span class="keyword1"><span class="command">lemma</span></span> lockstep_strong_bisimilulation<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">g'</span> <span class="main">=</span> replace_node <span class="free">nid</span> <span class="free">node</span> <span class="free">g</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span> <span class="main">⊢</span> <span class="main">(</span><span class="free">nid</span><span class="main">,</span> <span class="free">m</span><span class="main">,</span> <span class="free">h</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="free">nid'</span><span class="main">,</span> <span class="free">m</span><span class="main">,</span> <span class="free">h</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">g'</span> <span class="main">⊢</span> <span class="main">(</span><span class="free">nid</span><span class="main">,</span> <span class="free">m</span><span class="main">,</span> <span class="free">h</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="free">nid'</span><span class="main">,</span> <span class="free">m</span><span class="main">,</span> <span class="free">h</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">nid</span> <span class="main">|</span> <span class="free">g</span> <span class="main">∼</span> <span class="free">g'</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> stepDet strong_noop_bisimilar.simps <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">lemma</span></span> no_step_bisimulation<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">m</span> <span class="bound">h</span> <span class="bound">nid'</span> <span class="bound">m'</span> <span class="bound">h'</span><span class="main">.</span> <span class="main">¬</span><span class="main">(</span><span class="free">g</span> <span class="main">⊢</span> <span class="main">(</span><span class="free">nid</span><span class="main">,</span> <span class="bound">m</span><span class="main">,</span> <span class="bound">h</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="bound">nid'</span><span class="main">,</span> <span class="bound">m'</span><span class="main">,</span> <span class="bound">h'</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">m</span> <span class="bound">h</span> <span class="bound">nid'</span> <span class="bound">m'</span> <span class="bound">h'</span><span class="main">.</span> <span class="main">¬</span><span class="main">(</span><span class="free">g'</span> <span class="main">⊢</span> <span class="main">(</span><span class="free">nid</span><span class="main">,</span> <span class="bound">m</span><span class="main">,</span> <span class="bound">h</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="bound">nid'</span><span class="main">,</span> <span class="bound">m'</span><span class="main">,</span> <span class="bound">h'</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">nid</span> <span class="main">|</span> <span class="free">g</span> <span class="main">∼</span> <span class="free">g'</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> strong_noop_bisimilar.intros<span class="main">)</span>

<span class="keyword2"><span class="keyword">end</span></span></pre>
</body>

</html>