<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory CanonicalizationSyntax</title>
</head>


<body>
<div class="head">
<h1>Theory CanonicalizationSyntax</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>CanonicalizationSyntax</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> 
    </span><a href="../OptimizationDSL/Canonicalization.html"><span>OptimizationDSL.Canonicalization</span></a><span>
    </span><a href="CanonicalizationTreeProofs.html"><span>CanonicalizationTreeProofs</span></a><span> 
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> TODO: rename this to a more general name now it is not 32-bit specific. </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.arity_typerep_i32exp|fact"><span class="entity_def" id="CanonicalizationSyntax.typerep_i32exp_def|fact"><span class="entity_def" id="CanonicalizationSyntax.typerep_i32exp_inst.typerep_i32exp|fact"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Abs_i32exp_induct|fact"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Rep_i32exp_induct|fact"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Abs_i32exp_cases|fact"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Rep_i32exp_cases|fact"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Abs_i32exp_inject|fact"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Rep_i32exp_inject|fact"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Abs_i32exp_inverse|fact"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Rep_i32exp_inverse|fact"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Rep_i32exp|fact"><span class="entity_def" id="CanonicalizationSyntax.i32exp.type_definition_i32exp|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_type_i32exp|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_typerep_i32exp|thm"><span class="entity_def" id="CanonicalizationSyntax.typerep_i32exp_def|thm"><span class="entity_def" id="CanonicalizationSyntax.typerep_i32exp_inst.typerep_i32exp|thm"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Abs_i32exp_induct|thm"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Rep_i32exp_induct|thm"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Abs_i32exp_cases|thm"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Rep_i32exp_cases|thm"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Abs_i32exp_inject|thm"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Rep_i32exp_inject|thm"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Abs_i32exp_inverse|thm"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Rep_i32exp_inverse|thm"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Rep_i32exp|thm"><span class="entity_def" id="CanonicalizationSyntax.i32exp.type_definition_i32exp|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_type_i32exp|thm"><span class="entity_def" id="CanonicalizationSyntax.typerep_i32exp_def_raw|axiom"><span class="entity_def" id="CanonicalizationSyntax.typerep_i32exp_inst.typerep_i32exp_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.i32exp.type_definition_i32exp|axiom"><span class="entity_def" id="CanonicalizationSyntax.arity_type_i32exp|axiom"><span class="entity_def" id="CanonicalizationSyntax.typerep_i32exp_inst.typerep_i32exp|const"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Abs_i32exp|const"><span class="entity_def" id="CanonicalizationSyntax.i32exp.Rep_i32exp|const"><span>typedef</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.i32exp|type"><span>i32exp</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>e</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal|const"><span>is_IntVal</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.i32e_eval|fact"><span class="entity_def" id="CanonicalizationSyntax.i32e_eval|thm"><span>i32e_eval</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>vv</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.i32exp.Rep_i32exp|const"><span>Rep_i32exp</span></a><span> </span><span class="free"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.i32exp.Rep_i32exp|const"><span>Rep_i32exp</span></a><span> </span><span class="free"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>vv</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.i32exp.Rep_i32exp|fact"><span>Rep_i32exp</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal_def|fact"><span>is_IntVal_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_427..432">lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.int32_binary|fact"><span class="entity_def" id="CanonicalizationSyntax.int32_binary|thm"><span>int32_binary</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.i32exp.Rep_i32exp|const"><span>Rep_i32exp</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.i32exp.Rep_i32exp|const"><span>Rep_i32exp</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>xv</span></span><span> </span><span class="bound"><span>yv</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval|const"><span>bin_eval</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>xv</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>yv</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_427..432"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.i32exp.Rep_i32exp|fact"><span>Rep_i32exp</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal_def|fact"><span>is_IntVal_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> WAS:
  by (metis (mono_tags, lifting) mem_Collect_eq)
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.arity_typerep_intexp|fact"><span class="entity_def" id="CanonicalizationSyntax.typerep_intexp_def|fact"><span class="entity_def" id="CanonicalizationSyntax.typerep_intexp_inst.typerep_intexp|fact"><span class="entity_def" id="CanonicalizationSyntax.intexp.Abs_intexp_induct|fact"><span class="entity_def" id="CanonicalizationSyntax.intexp.Rep_intexp_induct|fact"><span class="entity_def" id="CanonicalizationSyntax.intexp.Abs_intexp_cases|fact"><span class="entity_def" id="CanonicalizationSyntax.intexp.Rep_intexp_cases|fact"><span class="entity_def" id="CanonicalizationSyntax.intexp.Abs_intexp_inject|fact"><span class="entity_def" id="CanonicalizationSyntax.intexp.Rep_intexp_inject|fact"><span class="entity_def" id="CanonicalizationSyntax.intexp.Abs_intexp_inverse|fact"><span class="entity_def" id="CanonicalizationSyntax.intexp.Rep_intexp_inverse|fact"><span class="entity_def" id="CanonicalizationSyntax.intexp.Rep_intexp|fact"><span class="entity_def" id="CanonicalizationSyntax.intexp.type_definition_intexp|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_type_intexp|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_typerep_intexp|thm"><span class="entity_def" id="CanonicalizationSyntax.typerep_intexp_def|thm"><span class="entity_def" id="CanonicalizationSyntax.typerep_intexp_inst.typerep_intexp|thm"><span class="entity_def" id="CanonicalizationSyntax.intexp.Abs_intexp_induct|thm"><span class="entity_def" id="CanonicalizationSyntax.intexp.Rep_intexp_induct|thm"><span class="entity_def" id="CanonicalizationSyntax.intexp.Abs_intexp_cases|thm"><span class="entity_def" id="CanonicalizationSyntax.intexp.Rep_intexp_cases|thm"><span class="entity_def" id="CanonicalizationSyntax.intexp.Abs_intexp_inject|thm"><span class="entity_def" id="CanonicalizationSyntax.intexp.Rep_intexp_inject|thm"><span class="entity_def" id="CanonicalizationSyntax.intexp.Abs_intexp_inverse|thm"><span class="entity_def" id="CanonicalizationSyntax.intexp.Rep_intexp_inverse|thm"><span class="entity_def" id="CanonicalizationSyntax.intexp.Rep_intexp|thm"><span class="entity_def" id="CanonicalizationSyntax.intexp.type_definition_intexp|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_type_intexp|thm"><span class="entity_def" id="CanonicalizationSyntax.typerep_intexp_def_raw|axiom"><span class="entity_def" id="CanonicalizationSyntax.typerep_intexp_inst.typerep_intexp_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.intexp.type_definition_intexp|axiom"><span class="entity_def" id="CanonicalizationSyntax.arity_type_intexp|axiom"><span class="entity_def" id="CanonicalizationSyntax.typerep_intexp_inst.typerep_intexp|const"><span class="entity_def" id="CanonicalizationSyntax.intexp.Abs_intexp|const"><span class="entity_def" id="CanonicalizationSyntax.intexp.Rep_intexp|const"><span>typedef</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.intexp|type"><span>intexp</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>e</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal|const"><span>is_IntVal</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="operator"><span>coercion_enabled</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>
  </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="operator"><span>coercion</span></span><span> </span><span class="quoted"><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.intexp.Rep_intexp|const"><span>Rep_intexp</span></a></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>coercion</span></span><span> </span><span class="quoted"><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.i32exp.Rep_i32exp|const"><span>Rep_i32exp</span></a></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.size.elims|fact"><span class="entity_def" id="CanonicalizationSyntax.size.induct|fact"><span class="entity_def" id="CanonicalizationSyntax.size.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.size.pelims|fact"><span class="entity_def" id="CanonicalizationSyntax.size.cases|fact"><span class="entity_def" id="CanonicalizationSyntax.size.termination|fact"><span class="entity_def" id="CanonicalizationSyntax.size.pinduct|fact"><span class="entity_def" id="CanonicalizationSyntax.size.psimps|fact"><span class="entity_def" id="CanonicalizationSyntax.size_rel.inducts|fact"><span class="entity_def" id="CanonicalizationSyntax.size_rel.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.size_rel.induct|fact"><span class="entity_def" id="CanonicalizationSyntax.size_rel.cases|fact"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros|fact"><span class="entity_def" id="CanonicalizationSyntax.size_graph.inducts|fact"><span class="entity_def" id="CanonicalizationSyntax.size_graph.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.size_graph.induct|fact"><span class="entity_def" id="CanonicalizationSyntax.size_graph.cases|fact"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros|fact"><span class="entity_def" id="CanonicalizationSyntax.size.elims|thm"><span class="entity_def" id="CanonicalizationSyntax.size.induct|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(20)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(19)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(18)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(17)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(16)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(15)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(14)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(13)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(12)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(11)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(10)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(9)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(8)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(7)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(6)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(5)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(4)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.simps(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.pelims|thm"><span class="entity_def" id="CanonicalizationSyntax.size.cases|thm"><span class="entity_def" id="CanonicalizationSyntax.size.termination|thm"><span class="entity_def" id="CanonicalizationSyntax.size.pinduct|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(20)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(19)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(18)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(17)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(16)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(15)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(14)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(13)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(12)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(11)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(10)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(9)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(8)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(7)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(6)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(5)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(4)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.size.psimps(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.inducts|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.simps|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.induct|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.cases|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(30)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(29)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(28)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(27)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(26)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(25)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(24)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(23)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(22)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(21)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(20)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(19)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(18)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(17)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(16)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(15)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(14)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(13)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(12)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(11)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(10)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(9)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(8)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(7)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(6)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(5)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(4)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_rel.intros(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.inducts|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.simps|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.induct|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.cases|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(20)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(19)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(18)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(17)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(16)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(15)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(14)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(13)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(12)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(11)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(10)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(9)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(8)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(7)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(6)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(5)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(4)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_graph.intros(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.size_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.size_rel_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.size_sumC_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.size_graph_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.size_dom|const"><span class="entity_def" id="CanonicalizationSyntax.size_rel|const"><span class="entity_def" id="CanonicalizationSyntax.size_sumC|const"><span class="entity_def" id="CanonicalizationSyntax.size_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="CanonicalizationSyntax.size|const"><span>size</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>size</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.UnaryExpr|const"><span>UnaryExpr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>op</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>e</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>size</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>e</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>size</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinAdd|const"><span>BinAdd</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>size</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>size</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>size</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>op</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>size</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>size</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>size</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.ConditionalExpr|const"><span>ConditionalExpr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cond</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>size</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cond</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>size</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>size</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>size</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.ConstantExpr|const"><span>ConstantExpr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>size</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.ParameterExpr|const"><span>ParameterExpr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>ind</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>size</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.LeafExpr|const"><span>LeafExpr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>nid</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>size</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.ConstantVar|const"><span>ConstantVar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>size</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.VariableExpr|const"><span>VariableExpr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.size_gt_0|fact"><span class="entity_def" id="CanonicalizationSyntax.size_gt_0|thm"><span>size_gt_0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size|const"><span>size</span></a><span> </span><span class="free"><span>e</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>e</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>UnaryExpr</span><span> </span><span class="skolem"><span>x1</span></span><span> </span><span class="skolem"><span>e</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
</span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>BinaryExpr</span><span> </span><span class="skolem"><span>x1</span></span><span> </span><span class="skolem"><span>e1</span></span><span> </span><span class="skolem"><span>e2</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="skolem"><span>x1</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>ConditionalExpr</span><span> </span><span class="skolem"><span>e1</span></span><span> </span><span class="skolem"><span>e2</span></span><span> </span><span class="skolem"><span>e3</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>ParameterExpr</span><span> </span><span class="skolem"><span>x1</span></span><span> </span><span class="skolem"><span>x2</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>LeafExpr</span><span> </span><span class="skolem"><span>x1</span></span><span> </span><span class="skolem"><span>x2</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>ConstantExpr</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>ConstantVar</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>VariableExpr</span><span> </span><span class="skolem"><span>x1</span></span><span> </span><span class="skolem"><span>x2</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.binary_expr_size_gte_2|fact"><span class="entity_def" id="CanonicalizationSyntax.binary_expr_size_gte_2|thm"><span>binary_expr_size_gte_2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>op</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size_gt_0|fact"><span>size_gt_0</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>Suc_leI</span><span> </span><span>trans_le_add2</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Suc_leI</span><span> </span><span>add_2_eq_Suc'</span><span> </span><span>add_Suc_shift</span><span> </span><span>add_mono</span><span> </span><span>numeral_2_eq_2</span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size_gt_0|fact"><span>size_gt_0</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.size_eq_1|fact"><span class="entity_def" id="CanonicalizationSyntax.size_eq_1|thm"><span>size_eq_1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size|const"><span>size</span></a><span> </span><span class="free"><span>e</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.is_ConstantExpr|const"><span>is_ConstantExpr</span></a><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>e</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size_gt_0|fact"><span>size_gt_0</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size_gt_0|fact"><span>size_gt_0</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.binary_expr_size_gte_2|fact"><span>binary_expr_size_gte_2</span></a><span> </span><span>lessI</span><span> </span><span>not_less</span><span> </span><span>numeral_2_eq_2</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.nonconstants_gt_one|fact"><span class="entity_def" id="CanonicalizationSyntax.nonconstants_gt_one|thm"><span>nonconstants_gt_one</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>¬</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.is_ConstantExpr|const"><span>is_ConstantExpr</span></a><span> </span><span class="free"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size|const"><span>size</span></a><span> </span><span class="free"><span>e</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>e</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size_gt_0|fact"><span>size_gt_0</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size_gt_0|fact"><span>size_gt_0</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Suc_le_eq</span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.binary_expr_size_gte_2|fact"><span>binary_expr_size_gte_2</span></a><span> </span><span>numeral_2_eq_2</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.size_det|fact"><span class="entity_def" id="CanonicalizationSyntax.size_det|thm"><span>size_det</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size|const"><span>size</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size|const"><span>size</span></a><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.size_non_add|fact"><span class="entity_def" id="CanonicalizationSyntax.size_non_add|thm"><span>size_non_add</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>op</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinAdd|const"><span>BinAdd</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size|const"><span>size</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size|const"><span>size</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>op</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>exp[</span></span><span>abs</span><span> </span><span class="free"><span>e</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>ML_val</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span>abs</span><span> </span><span class="free"><span>e</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>
</span><span class="keyword1"><span class="command"><span>ML_val</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&amp;</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>
</span><span class="keyword1"><span class="command"><span>ML_val</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>cond</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConditionalNotation|const"><span>?</span></a></span><span> </span><span class="free"><span>tv</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConditionalNotation|const"><span>:</span></a></span><span> </span><span class="free"><span>fv</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>
</span><span class="keyword1"><span class="command"><span>ML_val</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>
</span><span class="keyword1"><span class="command"><span>ML_val</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>
</span><span class="keyword1"><span class="command"><span>ML_val</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>
</span><span class="keyword1"><span class="command"><span>ML_val</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Graph/Values.html#Values.shiftl|const"><span>&lt;&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>exp[</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="free"><span>v1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.arity_full_exhaustive_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.full_exhaustive_Type.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.full_exhaustive_Type_inst.full_exhaustive_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_narrowing_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.narrowing_Type.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.narrowing_Type_inst.narrowing_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_random_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.random_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.random_Type_inst.random_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.random_aux.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.random_aux_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.size_gen|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.size|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_size_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.size_Type_overloaded_def|fact"><span class="entity_def" id="CanonicalizationSyntax.size_Type_inst.size_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.size_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.rec_transfer|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.rec|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.induct|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.case_transfer|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.splits|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.split_asm|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.split|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.nchotomy|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.exhaust|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.distinct|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.case_distrib|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.case_cong_weak|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.case_cong|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.case|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.refl|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_equal_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.equal_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.equal_Type_inst.equal_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_partial_term_of_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.partial_term_of_Type_triv|fact"><span class="entity_def" id="CanonicalizationSyntax.partial_term_of_Type_inst.partial_term_of_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_term_of_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.term_of_Type_triv|fact"><span class="entity_def" id="CanonicalizationSyntax.term_of_Type_inst.term_of_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.case_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.ctor_rec_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.dtor_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.ctor_fold_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.ctor_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_typerep_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.typerep_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.typerep_Type_inst.typerep_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Abs_Type_induct|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Rep_Type_induct|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Abs_Type_cases|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Rep_Type_cases|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Abs_Type_inject|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Rep_Type_inject|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Abs_Type_inverse|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Rep_Type_inverse|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Rep_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.type_definition_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_type_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.str_init_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.arity_typerep_Type_IITN_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.typerep_Type_IITN_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.typerep_Type_IITN_Type_inst.typerep_Type_IITN_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Abs_Type_IITN_Type_induct|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Rep_Type_IITN_Type_induct|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Abs_Type_IITN_Type_cases|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Rep_Type_IITN_Type_cases|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Abs_Type_IITN_Type_inject|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Rep_Type_IITN_Type_inject|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Abs_Type_IITN_Type_inverse|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Rep_Type_IITN_Type_inverse|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Rep_Type_IITN_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.type_definition_Type_IITN_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_type_Type_IITN_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.min_alg_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.mor_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.alg_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.pre_Type.Type.set_pre_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.pre_Type.Type.rel_pre_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.pre_Type.Type.map_pre_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.arity_typerep_Type_pre_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.typerep_Type_pre_Type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.typerep_Type_pre_Type_inst.typerep_Type_pre_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Abs_Type_pre_Type_induct|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Rep_Type_pre_Type_induct|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Abs_Type_pre_Type_cases|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Rep_Type_pre_Type_cases|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Abs_Type_pre_Type_inject|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Rep_Type_pre_Type_inject|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Abs_Type_pre_Type_inverse|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Rep_Type_pre_Type_inverse|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Rep_Type_pre_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.type_definition_Type_pre_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_type_Type_pre_Type|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_full_exhaustive_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.full_exhaustive_Type.simps|thm"><span class="entity_def" id="CanonicalizationSyntax.full_exhaustive_Type_inst.full_exhaustive_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_narrowing_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.narrowing_Type.simps|thm"><span class="entity_def" id="CanonicalizationSyntax.narrowing_Type_inst.narrowing_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_random_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.random_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.random_Type_inst.random_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.random_aux.simps|thm"><span class="entity_def" id="CanonicalizationSyntax.random_aux_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.size_gen(4)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.size_gen(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.size_gen(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.size_gen(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.size(8)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.size(7)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.size(6)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.size(5)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.size(4)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.size(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.size(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.size(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_size_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.size_Type_overloaded_def|thm"><span class="entity_def" id="CanonicalizationSyntax.size_Type_inst.size_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.size_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(20)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(19)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(18)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(17)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(16)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(15)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(14)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(13)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(12)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(11)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(10)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(9)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(8)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(7)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(6)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(5)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(4)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.simps(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.rec_transfer|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.rec(4)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.rec(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.rec(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.rec(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.induct|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.case_transfer|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.splits(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.splits(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.split_asm|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.split|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.nchotomy|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.exhaust|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.distinct(12)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.distinct(11)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.distinct(10)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.distinct(9)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.distinct(8)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.distinct(7)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.distinct(6)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.distinct(5)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.distinct(4)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.distinct(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.distinct(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.distinct(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.case_distrib|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.case_cong_weak|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.case_cong|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.case(4)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.case(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.case(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.case(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(28)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(27)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(26)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(25)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(24)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(23)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(22)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(21)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(20)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(19)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(18)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(17)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(16)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(15)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(14)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(13)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(12)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(11)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(10)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(9)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(8)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(7)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(6)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(5)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(4)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.simps(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.eq.refl|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_equal_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.equal_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.equal_Type_inst.equal_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_partial_term_of_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.partial_term_of_Type_triv|thm"><span class="entity_def" id="CanonicalizationSyntax.partial_term_of_Type_inst.partial_term_of_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_term_of_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.term_of_Type_triv|thm"><span class="entity_def" id="CanonicalizationSyntax.term_of_Type_inst.term_of_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.case_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.ctor_rec_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.dtor_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.ctor_fold_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.ctor_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_typerep_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.typerep_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.typerep_Type_inst.typerep_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Abs_Type_induct|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Rep_Type_induct|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Abs_Type_cases|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Rep_Type_cases|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Abs_Type_inject|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Rep_Type_inject|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Abs_Type_inverse|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Rep_Type_inverse|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Rep_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.type_definition_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_type_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.str_init_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.arity_typerep_Type_IITN_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.typerep_Type_IITN_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.typerep_Type_IITN_Type_inst.typerep_Type_IITN_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Abs_Type_IITN_Type_induct|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Rep_Type_IITN_Type_induct|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Abs_Type_IITN_Type_cases|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Rep_Type_IITN_Type_cases|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Abs_Type_IITN_Type_inject|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Rep_Type_IITN_Type_inject|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Abs_Type_IITN_Type_inverse|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Rep_Type_IITN_Type_inverse|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Rep_Type_IITN_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.type_definition_Type_IITN_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_type_Type_IITN_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.min_alg_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.mor_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.alg_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.pre_Type.Type.set_pre_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.pre_Type.Type.rel_pre_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.pre_Type.Type.map_pre_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.arity_typerep_Type_pre_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.typerep_Type_pre_Type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.typerep_Type_pre_Type_inst.typerep_Type_pre_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Abs_Type_pre_Type_induct|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Rep_Type_pre_Type_induct|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Abs_Type_pre_Type_cases|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Rep_Type_pre_Type_cases|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Abs_Type_pre_Type_inject|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Rep_Type_pre_Type_inject|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Abs_Type_pre_Type_inverse|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Rep_Type_pre_Type_inverse|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Rep_Type_pre_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.type_definition_Type_pre_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_type_Type_pre_Type|thm"><span class="entity_def" id="CanonicalizationSyntax.full_exhaustive_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.full_exhaustive_Type_inst.full_exhaustive_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.narrowing_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.narrowing_Type_inst.narrowing_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.random_Type_def_raw|axiom"><span class="entity_def" id="CanonicalizationSyntax.random_Type_inst.random_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.random_aux_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.size_Type_overloaded_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.size_Type_inst.size_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.size_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.rec_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.equal_Type_def_raw|axiom"><span class="entity_def" id="CanonicalizationSyntax.equal_Type_inst.equal_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.partial_term_of_Type_triv_raw|axiom"><span class="entity_def" id="CanonicalizationSyntax.partial_term_of_Type_inst.partial_term_of_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.term_of_Type_triv_raw|axiom"><span class="entity_def" id="CanonicalizationSyntax.term_of_Type_inst.term_of_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.case_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.Unknown_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.Object_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.Float_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.Integer_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.ctor_rec_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.dtor_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.ctor_fold_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.ctor_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.typerep_Type_def_raw|axiom"><span class="entity_def" id="CanonicalizationSyntax.typerep_Type_inst.typerep_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.type_definition_Type|axiom"><span class="entity_def" id="CanonicalizationSyntax.arity_type_Type|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.str_init_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.typerep_Type_IITN_Type_def_raw|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.typerep_Type_IITN_Type_inst.typerep_Type_IITN_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.type_definition_Type_IITN_Type|axiom"><span class="entity_def" id="CanonicalizationSyntax.arity_type_Type_IITN_Type|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.min_alg_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.mor_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.alg_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.pre_Type.Type.wit_pre_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.pre_Type.Type.pred_pre_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.pre_Type.Type.rel_pre_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.pre_Type.Type.set_pre_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.pre_Type.Type.map_pre_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.typerep_Type_pre_Type_def_raw|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.typerep_Type_pre_Type_inst.typerep_Type_pre_Type_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.type_definition_Type_pre_Type|axiom"><span class="entity_def" id="CanonicalizationSyntax.arity_type_Type_pre_Type|axiom"><span class="entity_def" id="CanonicalizationSyntax.full_exhaustive_Type_inst.full_exhaustive_Type|const"><span class="entity_def" id="CanonicalizationSyntax.narrowing_Type_inst.narrowing_Type|const"><span class="entity_def" id="CanonicalizationSyntax.random_Type_inst.random_Type|const"><span class="entity_def" id="CanonicalizationSyntax.random_aux_Type|const"><span class="entity_def" id="CanonicalizationSyntax.size_Type_inst.size_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.size_Type|const"><span class="entity_def" id="CanonicalizationSyntax.equal_Type_inst.equal_Type|const"><span class="entity_def" id="CanonicalizationSyntax.partial_term_of_Type_inst.partial_term_of_Type|const"><span class="entity_def" id="CanonicalizationSyntax.term_of_Type_inst.term_of_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.case_Type|const"><span class="entity_def" id="CanonicalizationSyntax.typerep_Type_inst.typerep_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.Abs_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.Rep_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.typerep_Type_IITN_Type_inst.typerep_Type_IITN_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Abs_Type_IITN_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type.Rep_Type_IITN_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.mor_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.alg_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.typerep_Type_pre_Type_inst.typerep_Type_pre_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Abs_Type_pre_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type.Rep_Type_pre_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_IITN_Type|type"><span>datatype</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.Type.rec_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.ctor_rec_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.dtor_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.ctor_fold_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.ctor_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.str_init_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type.min_alg_Type|const"><span class="entity_def" id="CanonicalizationSyntax.pre_Type.Type.wit_pre_Type|const"><span class="entity_def" id="CanonicalizationSyntax.pre_Type.Type.pred_pre_Type|const"><span class="entity_def" id="CanonicalizationSyntax.pre_Type.Type.rel_pre_Type|const"><span class="entity_def" id="CanonicalizationSyntax.pre_Type.Type.set_pre_Type|const"><span class="entity_def" id="CanonicalizationSyntax.pre_Type.Type.map_pre_Type|const"><span class="entity_def" id="CanonicalizationSyntax.Type|type"><span class="entity_def" id="CanonicalizationSyntax.Type.Type_pre_Type|type"><span>Type</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="entity_def" id="CanonicalizationSyntax.Type.Integer|const"><span>Integer</span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="entity_def" id="CanonicalizationSyntax.Type.Float|const"><span>Float</span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="entity_def" id="CanonicalizationSyntax.Type.Object|const"><span>Object</span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="entity_def" id="CanonicalizationSyntax.Type.Unknown|const"><span>Unknown</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.type_def|fact"><span class="entity_def" id="CanonicalizationSyntax.type_def|thm"><span class="entity_def" id="CanonicalizationSyntax.type_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="CanonicalizationSyntax.type|const"><span>type</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.Type|type"><span>Type</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>type</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>e</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>e</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>of</span></span><span>
    IntegerStamp </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.Type.Integer|const"><span>Integer</span></a><span>
    </span><span class="main"><span>|</span></span><span> ObjectStamp </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.Type.Object|const"><span>Object</span></a><span>
    </span><span class="main"><span>|</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.Type.Unknown|const"><span>Unknown</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.unfold_type|fact"><span class="entity_def" id="CanonicalizationSyntax.unfold_type|thm"><span>unfold_type</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type|const"><span>type</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.Type.Integer|const"><span>Integer</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp|const"><span>is_IntegerStamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type_def|fact"><span>type_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp_def|fact"><span>is_IntegerStamp_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.case_eq_if|fact"><span>Stamp.case_eq_if</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.disc|fact"><span>Stamp.disc</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.Type.distinct|fact"><span>Type.distinct</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.Type.distinct|fact"><span>Type.distinct</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.case_eq_if|fact"><span>Stamp.case_eq_if</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.type_safe_def|fact"><span class="entity_def" id="CanonicalizationSyntax.type_safe_def|thm"><span class="entity_def" id="CanonicalizationSyntax.type_safe_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="CanonicalizationSyntax.type_safe|const"><span>type_safe</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>bool</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>type_safe</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>e1</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>e2</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type|const"><span>type</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>e1</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type|const"><span>type</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>e2</span></span></span></span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp|const"><span>is_IntegerStamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>e1</span></span></span></span><span class="main"><span>)</span></span><span> 
        </span><span class="main"><span>⟶</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stp_bits|const"><span>stp_bits</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>e1</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stp_bits|const"><span>stp_bits</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>e2</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.elims|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.induct|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.pelims|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.cases|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.termination|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.pinduct|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.psimps|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_rel.inducts|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_rel.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_rel.induct|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_rel.cases|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_rel.intros|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph.inducts|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph.induct|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph.cases|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph.intros|fact"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.elims(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.elims(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.elims(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.induct|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.simps(7)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.simps(6)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.simps(5)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.simps(4)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.simps(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.simps(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.simps(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.pelims(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.pelims(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.pelims(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.cases|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.termination|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.pinduct|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.psimps(7)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.psimps(6)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.psimps(5)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.psimps(4)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.psimps(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.psimps(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits.psimps(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_rel.inducts|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_rel.simps|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_rel.induct|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_rel.cases|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph.inducts|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph.simps|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph.induct|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph.cases|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph.intros(7)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph.intros(6)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph.intros(5)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph.intros(4)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph.intros(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph.intros(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph.intros(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_rel_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_sumC_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_dom|const"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_rel|const"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_sumC|const"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="CanonicalizationSyntax.int_and_equal_bits|const"><span>int_and_equal_bits</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value|type"><span>Value</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value|type"><span>Value</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>bool</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>int_and_equal_bits</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b1</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>e1</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b2</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>e2</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>b1</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b2</span></span></span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b1</span></span></span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b1</span></span></span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="numeral"><span>64</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>int_and_equal_bits</span></span><span> </span><span class="main"><span class="bound"><span class="entity"><span>_</span></span></span></span><span> </span><span class="main"><span class="bound"><span class="entity"><span>_</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>False</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3728..3733">lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.unfold_int_typesafe|fact"><span class="entity_def" id="CanonicalizationSyntax.unfold_int_typesafe|thm"><span>unfold_int_typesafe</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type|const"><span>type</span></a><span> </span><span class="free"><span>e1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.Type.Integer|const"><span>Integer</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type_safe|const"><span>type_safe</span></a><span> </span><span class="free"><span>e1</span></span><span> </span><span class="free"><span>e2</span></span><span> </span><span class="main"><span>=</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type|const"><span>type</span></a><span> </span><span class="free"><span>e1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type|const"><span>type</span></a><span> </span><span class="free"><span>e2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span>
    </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stp_bits|const"><span>stp_bits</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>e1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stp_bits|const"><span>stp_bits</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>e2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp|const"><span>is_IntegerStamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>e1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_3728..3733"><span>assms</span></a><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.unfold_type|fact"><span>unfold_type</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type_safe_def|fact"><span>type_safe_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4052..4057">lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.uminus_intstamp_prop|fact"><span class="entity_def" id="CanonicalizationSyntax.uminus_intstamp_prop|thm"><span>uminus_intstamp_prop</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type|const"><span>type</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.Type.Integer|const"><span>Integer</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type|const"><span>type</span></a><span> </span><span class="keyword1"><span>exp[</span></span><span class="main"><span>-</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.Type.Integer|const"><span>Integer</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>lo</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>hi</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>lo</span></span><span> </span><span class="skolem"><span>hi</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_4052..4057"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp_def|fact"><span>is_IntegerStamp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_4052..4057"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type_def|fact"><span>type_def</span></a><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type_safe_def|fact"><span>type_safe_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size|const"><span>size</span></a><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size|const"><span>size</span></a><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size.simps|fact"><span>size.simps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.arity_full_exhaustive_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.full_exhaustive_RewriteResult.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.full_exhaustive_RewriteResult_inst.full_exhaustive_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_random_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.random_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.random_RewriteResult_inst.random_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.random_aux.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.random_aux_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.size_gen|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.size|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_size_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.size_RewriteResult_overloaded_def|fact"><span class="entity_def" id="CanonicalizationSyntax.size_RewriteResult_inst.size_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.size_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.rec_transfer|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.rec|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.induct|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.case_transfer|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.splits|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.split_asm|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.split|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.nchotomy|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.inject|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.exhaust|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.distinct|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.case_distrib|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.case_cong_weak|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.case_cong|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.case|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.eq.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.eq.refl|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_equal_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.equal_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.equal_RewriteResult_inst.equal_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_partial_term_of_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.partial_term_of_RewriteResult_triv|fact"><span class="entity_def" id="CanonicalizationSyntax.partial_term_of_RewriteResult_inst.partial_term_of_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_term_of_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.term_of_RewriteResult_triv|fact"><span class="entity_def" id="CanonicalizationSyntax.term_of_RewriteResult_inst.term_of_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.case_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.ctor_rec_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.dtor_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.ctor_fold_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.ctor_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_typerep_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.typerep_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.typerep_RewriteResult_inst.typerep_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Abs_RewriteResult_induct|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Rep_RewriteResult_induct|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Abs_RewriteResult_cases|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Rep_RewriteResult_cases|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Abs_RewriteResult_inject|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Rep_RewriteResult_inject|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Abs_RewriteResult_inverse|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Rep_RewriteResult_inverse|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Rep_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.type_definition_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_type_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.str_init_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.arity_typerep_RewriteResult_IITN_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.typerep_RewriteResult_IITN_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.typerep_RewriteResult_IITN_RewriteResult_inst.typerep_RewriteResult_IITN_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Abs_RewriteResult_IITN_RewriteResult_induct|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Rep_RewriteResult_IITN_RewriteResult_induct|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Abs_RewriteResult_IITN_RewriteResult_cases|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Rep_RewriteResult_IITN_RewriteResult_cases|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Abs_RewriteResult_IITN_RewriteResult_inject|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Rep_RewriteResult_IITN_RewriteResult_inject|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Abs_RewriteResult_IITN_RewriteResult_inverse|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Rep_RewriteResult_IITN_RewriteResult_inverse|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Rep_RewriteResult_IITN_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.type_definition_RewriteResult_IITN_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_type_RewriteResult_IITN_RewriteResult|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.min_alg_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.mor_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.alg_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.pre_RewriteResult.RewriteResult.set_pre_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.pre_RewriteResult.RewriteResult.rel_pre_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.pre_RewriteResult.RewriteResult.map_pre_RewriteResult_def|fact"><span class="entity_def" id="CanonicalizationSyntax.arity_full_exhaustive_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.full_exhaustive_RewriteResult.simps|thm"><span class="entity_def" id="CanonicalizationSyntax.full_exhaustive_RewriteResult_inst.full_exhaustive_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_random_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.random_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.random_RewriteResult_inst.random_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.random_aux.simps|thm"><span class="entity_def" id="CanonicalizationSyntax.random_aux_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.size_gen(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.size_gen(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.size(4)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.size(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.size(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.size(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_size_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.size_RewriteResult_overloaded_def|thm"><span class="entity_def" id="CanonicalizationSyntax.size_RewriteResult_inst.size_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.size_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.simps(7)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.simps(6)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.simps(5)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.simps(4)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.simps(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.simps(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.simps(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.rec_transfer|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.rec(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.rec(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.induct|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.case_transfer|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.splits(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.splits(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.split_asm|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.split|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.nchotomy|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.inject|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.exhaust|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.distinct(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.distinct(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.case_distrib|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.case_cong_weak|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.case_cong|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.case(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.case(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.eq.simps(6)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.eq.simps(5)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.eq.simps(4)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.eq.simps(3)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.eq.simps(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.eq.simps(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.eq.refl|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_equal_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.equal_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.equal_RewriteResult_inst.equal_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_partial_term_of_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.partial_term_of_RewriteResult_triv|thm"><span class="entity_def" id="CanonicalizationSyntax.partial_term_of_RewriteResult_inst.partial_term_of_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_term_of_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.term_of_RewriteResult_triv|thm"><span class="entity_def" id="CanonicalizationSyntax.term_of_RewriteResult_inst.term_of_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.case_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.ctor_rec_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.dtor_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.ctor_fold_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.ctor_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_typerep_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.typerep_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.typerep_RewriteResult_inst.typerep_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Abs_RewriteResult_induct|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Rep_RewriteResult_induct|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Abs_RewriteResult_cases|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Rep_RewriteResult_cases|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Abs_RewriteResult_inject|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Rep_RewriteResult_inject|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Abs_RewriteResult_inverse|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Rep_RewriteResult_inverse|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Rep_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.type_definition_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_type_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.str_init_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.arity_typerep_RewriteResult_IITN_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.typerep_RewriteResult_IITN_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.typerep_RewriteResult_IITN_RewriteResult_inst.typerep_RewriteResult_IITN_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Abs_RewriteResult_IITN_RewriteResult_induct|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Rep_RewriteResult_IITN_RewriteResult_induct|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Abs_RewriteResult_IITN_RewriteResult_cases|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Rep_RewriteResult_IITN_RewriteResult_cases|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Abs_RewriteResult_IITN_RewriteResult_inject|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Rep_RewriteResult_IITN_RewriteResult_inject|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Abs_RewriteResult_IITN_RewriteResult_inverse|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Rep_RewriteResult_IITN_RewriteResult_inverse|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Rep_RewriteResult_IITN_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.type_definition_RewriteResult_IITN_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.arity_type_RewriteResult_IITN_RewriteResult|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.min_alg_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.mor_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.alg_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.pre_RewriteResult.RewriteResult.set_pre_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.pre_RewriteResult.RewriteResult.rel_pre_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.pre_RewriteResult.RewriteResult.map_pre_RewriteResult_def|thm"><span class="entity_def" id="CanonicalizationSyntax.full_exhaustive_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.full_exhaustive_RewriteResult_inst.full_exhaustive_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.random_RewriteResult_def_raw|axiom"><span class="entity_def" id="CanonicalizationSyntax.random_RewriteResult_inst.random_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.random_aux_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.size_RewriteResult_overloaded_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.size_RewriteResult_inst.size_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.size_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.rec_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.equal_RewriteResult_def_raw|axiom"><span class="entity_def" id="CanonicalizationSyntax.equal_RewriteResult_inst.equal_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.partial_term_of_RewriteResult_triv_raw|axiom"><span class="entity_def" id="CanonicalizationSyntax.partial_term_of_RewriteResult_inst.partial_term_of_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.term_of_RewriteResult_triv_raw|axiom"><span class="entity_def" id="CanonicalizationSyntax.term_of_RewriteResult_inst.term_of_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.case_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.fail_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.success_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.ctor_rec_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.dtor_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.ctor_fold_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.ctor_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.typerep_RewriteResult_def_raw|axiom"><span class="entity_def" id="CanonicalizationSyntax.typerep_RewriteResult_inst.typerep_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.type_definition_RewriteResult|axiom"><span class="entity_def" id="CanonicalizationSyntax.arity_type_RewriteResult|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.str_init_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.typerep_RewriteResult_IITN_RewriteResult_def_raw|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.typerep_RewriteResult_IITN_RewriteResult_inst.typerep_RewriteResult_IITN_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.type_definition_RewriteResult_IITN_RewriteResult|axiom"><span class="entity_def" id="CanonicalizationSyntax.arity_type_RewriteResult_IITN_RewriteResult|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.min_alg_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.mor_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.alg_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.pre_RewriteResult.RewriteResult.wit_pre_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.pre_RewriteResult.RewriteResult.pred_pre_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.pre_RewriteResult.RewriteResult.rel_pre_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.pre_RewriteResult.RewriteResult.set_pre_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.pre_RewriteResult.RewriteResult.map_pre_RewriteResult_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.full_exhaustive_RewriteResult_inst.full_exhaustive_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.random_RewriteResult_inst.random_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.random_aux_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.size_RewriteResult_inst.size_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.size_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.equal_RewriteResult_inst.equal_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.partial_term_of_RewriteResult_inst.partial_term_of_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.term_of_RewriteResult_inst.term_of_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.case_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.typerep_RewriteResult_inst.typerep_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Abs_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.Rep_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.typerep_RewriteResult_IITN_RewriteResult_inst.typerep_RewriteResult_IITN_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Abs_RewriteResult_IITN_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult.Rep_RewriteResult_IITN_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.mor_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.alg_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.RewriteResult_IITN_RewriteResult|type"><span>datatype</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.rec_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.ctor_rec_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.dtor_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.ctor_fold_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.ctor_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.str_init_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.min_alg_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.pre_RewriteResult.RewriteResult.wit_pre_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.pre_RewriteResult.RewriteResult.pred_pre_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.pre_RewriteResult.RewriteResult.rel_pre_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.pre_RewriteResult.RewriteResult.set_pre_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.pre_RewriteResult.RewriteResult.map_pre_RewriteResult|const"><span class="entity_def" id="CanonicalizationSyntax.RewriteResult|type"><span>RewriteResult</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.success|const"><span>success</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="entity_def" id="CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></span><span>

</span><span class="keyword1"><span class="command"><span>ML_val</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><span>of</span></span><span>
    </span><span class="main"><span>(</span></span><span>BinaryExpr BinAdd </span><span class="main"><span>(</span></span><span>ConstantExpr </span><span class="bound"><span>c_val</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span>
      </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>¬</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.is_ConstantExpr|const"><span>is_ConstantExpr</span></a><span> </span><span class="bound"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type|const"><span>type</span></a><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.Type.Integer|const"><span>Integer</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span>
        </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.success|const"><span>success</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinAdd|const"><span>BinAdd</span></a><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.ConstantExpr|const"><span>ConstantExpr</span></a><span> </span><span class="bound"><span>c_val</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span>else</span></span><span>
        </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span> </span><span class="main"><span>|</span></span><span>
    </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>


</span><span class="comment1"><span>(</span><span>*</span><span>(app "_case_syntax"
            (Ast.Variable "x",
             foldr1 (app <span class="hidden">\&lt;^</span><span class="control">syntax_const</span><span class="hidden">&gt;</span>‹_case2›) (map_index (case1 constraint authentic) spec)),
           capp (capps (case_constant, map_index arg1 spec), Ast.Variable "x"))</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>ML</span></span></span><span> </span><span class="quoted"><span>‹</span><span>
</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>test</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Conditional</span></span><span>
            </span><span class="main"><span>(</span></span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>‹</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinAdd|const"><span>BinAdd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.ConstantExpr|const"><span>ConstantExpr</span></a><span> </span><span class="free"><span>c_val</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e</span></span><span>›</span></span><span class="antiquote"><span>}</span></span></span><span class="main"><span>,</span></span><span>
            </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>‹</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinAdd|const"><span>BinAdd</span></a><span> </span><span class="free"><span>e</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.ConstantExpr|const"><span>ConstantExpr</span></a><span> </span><span class="free"><span>c_val</span></span><span class="main"><span>)</span></span><span>›</span></span><span class="antiquote"><span>}</span></span></span><span class="main"><span>,</span></span><span>
            </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>‹</span><span class="main"><span>¬</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.is_ConstantExpr|const"><span>is_ConstantExpr</span></a><span> </span><span class="free"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type|const"><span>type</span></a><span> </span><span class="free"><span>e</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.Type.Integer|const"><span>Integer</span></a><span>›</span></span><span class="antiquote"><span>}</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>generate_cases</span></span><span> </span><span class="entity"><span>p</span></span><span> </span><span class="entity"><span>e</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span>
    </span><span>Free</span><span> </span><span class="main"><span>(</span></span><span>singleton</span><span> </span><span class="main"><span>(</span></span><span>Name.variant_list</span><span> </span><span class="main"><span>(</span></span><span>fold</span><span> </span><span>Term.add_free_names</span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>p</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>e</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="inner_quoted"><span>"x"</span></span><span class="main"><span>,</span></span><span> </span><span>dummyT</span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
  
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>NilC</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Syntax.const</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const_name</span></span><span> "</span><span>Nil</span><span>"</span><span class="antiquote"><span>}</span></span></span><span class="main"><span>;</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>ConsC</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Syntax.const</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const_name</span></span><span> "</span><span>Cons</span><span>"</span><span class="antiquote"><span>}</span></span></span><span class="main"><span>;</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>dummyC</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Syntax.const</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const_name</span></span><span> "</span><span>Pure.dummy_pattern</span><span>"</span><span class="antiquote"><span>}</span></span></span><span class="main"><span>;</span></span><span>
  
  </span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>single</span></span><span> </span><span class="entity"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>ConsC</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>x</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>NilC</span></span><span class="main"><span>;</span></span><span>
  
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>case1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Syntax.const</span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">syntax_const</span><span class="hidden">&gt;</span></span></span><span>‹_case1›</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>p</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>single</span></span><span> </span><span class="entity"><span>e</span></span><span class="main"><span>;</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>case2</span></span><span> </span><span class="main"><span>=</span></span><span>
    </span><span>Syntax.const</span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">syntax_const</span><span class="hidden">&gt;</span></span></span><span>‹_case1›</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>dummyC</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>NilC</span></span><span class="main"><span>;</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>cs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Syntax.const</span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">syntax_const</span><span class="hidden">&gt;</span></span></span><span>‹_case2›</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>case1</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>case2</span></span><span class="main"><span>;</span></span><span>
  
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>res</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Case_Translation.case_tr</span></span><span> </span><span>false</span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>cs</span></span><span class="main"><span>]</span></span><span class="main"><span>;</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="entity"><span class="entity"><span class="entity"><span class="entity"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>print</span></span><span class="antiquote"><span>}</span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span>res</span></span><span class="main"><span>;</span></span><span>

  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>plz</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Syntax.const</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>syntax_const</span></span><span> "_case_syntax"</span><span class="antiquote"><span>}</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span>             
    </span><span class="entity"><span>single</span></span><span> </span><span class="entity"><span>e</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>dummyC</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span class="main"><span>;</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>rewrite_to_code</span></span><span> </span><span class="entity"><span>bind</span></span><span> </span><span class="entity"><span>rewrite</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>case</span></span></span><span> </span><span class="entity"><span>rewrite</span></span><span> </span><span class="keyword2"><span class="keyword"><span>of</span></span></span><span>
    </span><span class="entity"><span>Conditional</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>pre</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>post</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>cond</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> 
        </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><span>Trueprop</span><span class="antiquote"><span>}</span></span></span><span> </span><span>$</span><span>
        </span><span class="main"><span>(</span></span><span>Const</span><span> </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"HOL.eq"</span></span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>typ</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult|type"><span>RewriteResult</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult|type"><span>RewriteResult</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>bool</span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span class="main"><span>)</span></span><span>
        </span><span>$</span><span> </span><span class="main"><span>(</span></span><span>Free</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>bind</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"_code"</span></span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>typ</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult|type"><span>RewriteResult</span></a><span>"</span></span><span class="antiquote"><span>}</span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
        </span><span>$</span><span> </span><span class="main"><span>(</span></span><span>Const</span><span> </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"IRTreeEval.IRExpr.case_IRExpr"</span></span><span class="main"><span>,</span></span><span>
          </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>typ</span></span><span> </span><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp|type"><span>IRUnaryOp</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult|type"><span>RewriteResult</span></a><span class="main"><span>)</span></span><span>
           </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp|type"><span>IRBinaryOp</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult|type"><span>RewriteResult</span></a><span class="main"><span>)</span></span><span>
              </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult|type"><span>RewriteResult</span></a><span class="main"><span>)</span></span><span>
                 </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span>nat</span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult|type"><span>RewriteResult</span></a><span class="main"><span>)</span></span><span>
                    </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span>nat</span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult|type"><span>RewriteResult</span></a><span class="main"><span>)</span></span><span>
                       </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value|type"><span>Value</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult|type"><span>RewriteResult</span></a><span class="main"><span>)</span></span><span>
                          </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span>char</span><span> </span><span>list</span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult|type"><span>RewriteResult</span></a><span class="main"><span>)</span></span><span>
                             </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span>char</span><span> </span><span>list</span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult|type"><span>RewriteResult</span></a><span class="main"><span>)</span></span><span>
                                </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult|type"><span>RewriteResult</span></a><span>›</span></span><span class="antiquote"><span>}</span></span></span><span class="main"><span>)</span></span><span>
        </span><span>$</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp|type"><span>IRUnaryOp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>
        </span><span>$</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp|type"><span>IRBinaryOp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>
        </span><span>$</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>
        </span><span>$</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>
        </span><span>$</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.ID|type"><span>ID</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>
        </span><span>$</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value|type"><span>Value</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>
        </span><span>$</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><span>string</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>
        </span><span>$</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><span>string</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
 </span><span class="main"><span>|</span></span><span>
   </span><span class="comment1"><span>(* Transform (pre, post) =&gt; 
        @{const Trueprop}
        $ (Const ("HOL.eq", @{typ "(IRExpr ⇒ RewriteResult) ⇒ (IRExpr ⇒ RewriteResult) ⇒ bool"})
           $ Free (bind ^ "_code", @{typ "IRExpr ⇒ RewriteResult"})
           $ generate_cases pre post ctxt
          )
 | *)</span></span><span>
    </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><span>Trueprop</span><span class="antiquote"><span>}</span></span></span><span> </span><span>$</span><span> 
        </span><span class="main"><span>(</span></span><span>Const</span><span> </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"HOL.eq"</span></span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>typ</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult|type"><span>RewriteResult</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult|type"><span>RewriteResult</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>bool</span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span class="main"><span>)</span></span><span>
        </span><span>$</span><span> </span><span class="main"><span>(</span></span><span>Free</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>bind</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"_code"</span></span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>typ</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult|type"><span>RewriteResult</span></a><span>"</span></span><span class="antiquote"><span>}</span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
        </span><span>$</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>‹</span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span>›</span></span><span class="antiquote"><span>}</span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
</span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.bad_trm.elims|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm.induct|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm.pelims|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm.cases|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm.termination|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm.pinduct|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm.psimps|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_rel.inducts|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_rel.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_rel.induct|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_rel.cases|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_rel.intros|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_graph.inducts|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_graph.simps|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_graph.induct|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_graph.cases|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_graph.intros|fact"><span class="entity_def" id="CanonicalizationSyntax.bad_trm.elims|thm"><span class="entity_def" id="CanonicalizationSyntax.bad_trm.induct|thm"><span class="entity_def" id="CanonicalizationSyntax.bad_trm.simps|thm"><span class="entity_def" id="CanonicalizationSyntax.bad_trm.pelims|thm"><span class="entity_def" id="CanonicalizationSyntax.bad_trm.cases|thm"><span class="entity_def" id="CanonicalizationSyntax.bad_trm.termination|thm"><span class="entity_def" id="CanonicalizationSyntax.bad_trm.pinduct|thm"><span class="entity_def" id="CanonicalizationSyntax.bad_trm.psimps|thm"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_rel.inducts|thm"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_rel.simps|thm"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_rel.induct|thm"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_rel.cases|thm"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_graph.inducts|thm"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_graph.simps|thm"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_graph.induct|thm"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_graph.cases|thm"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_graph.intros|thm"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_rel_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_sumC_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_graph_def|axiom"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_dom|const"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_rel|const"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_sumC|const"><span class="entity_def" id="CanonicalizationSyntax.bad_trm_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="CanonicalizationSyntax.bad_trm|const"><span>bad_trm</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bad_trm</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.test_def|fact"><span class="entity_def" id="CanonicalizationSyntax.test_def|thm"><span class="entity_def" id="CanonicalizationSyntax.test_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="CanonicalizationSyntax.test|const"><span>test</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>test</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="keyword1"><span>of</span></span><span>
    </span><span class="main"><span>(</span></span><span>BinaryExpr BinAdd </span><span class="main"><span>(</span></span><span>ConstantExpr </span><span class="bound"><span>c_val</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span>
      </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>¬</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.is_ConstantExpr|const"><span>is_ConstantExpr</span></a><span> </span><span class="bound"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type|const"><span>type</span></a><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.Type.Integer|const"><span>Integer</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span>
        </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.success|const"><span>success</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinAdd|const"><span>BinAdd</span></a><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.ConstantExpr|const"><span>ConstantExpr</span></a><span> </span><span class="bound"><span>c_val</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span>else</span></span><span>
        </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span> </span><span class="main"><span>|</span></span><span>
    </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>ML_val</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><span>of</span></span><span>
    </span><span class="main"><span>(</span></span><span>BinaryExpr BinAdd </span><span class="main"><span>(</span></span><span>ConstantExpr </span><span class="bound"><span>c_val</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span>
      </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>¬</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.is_ConstantExpr|const"><span>is_ConstantExpr</span></a><span> </span><span class="bound"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type|const"><span>type</span></a><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.Type.Integer|const"><span>Integer</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span>
        </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.success|const"><span>success</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinAdd|const"><span>BinAdd</span></a><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.ConstantExpr|const"><span>ConstantExpr</span></a><span> </span><span class="bound"><span>c_val</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span>else</span></span><span>
        </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span> </span><span class="main"><span>|</span></span><span>
    </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>print_phases</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>ML_val</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.case_IRExpr|const"><span>case_IRExpr</span></a><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>
        </span><span>$</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp|type"><span>IRUnaryOp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>
        </span><span>$</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp|type"><span>IRBinaryOp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>
        </span><span>$</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>
        </span><span>$</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>
        </span><span>$</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.ID|type"><span>ID</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>
        </span><span>$</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value|type"><span>Value</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>
        </span><span>$</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><span>string</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>
        </span><span>$</span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><span>string</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>ML_val</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>hello</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.case_IRExpr|const"><span>case_IRExpr</span></a><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.RewriteResult.fail|const"><span>fail</span></a><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>


</span><span class="keyword1"><span class="command"><span>phase</span></span></span><span> </span><span>Canonicalization</span><span>
  </span><span class="keyword2"><span class="keyword"><span>terminating</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size|const"><span>size</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>
optimization constant_fold:
  "(const(c<span class="hidden">⇩</span><sub>1</sub>) ⊕<span class="hidden">⇩</span><sub>x</sub> const(c<span class="hidden">⇩</span><sub>2</sub>)) ↦ (bin_eval c<span class="hidden">⇩</span><sub>1</sub> x c<span class="hidden">⇩</span><sub>2</sub>)"

optimization constant_add:
  "(e1 + e2) ↦ r when (e1 = ConstantExpr v1 ∧ e2 = ConstantExpr v2 ∧ r = ConstantExpr (intval_add v1 v2))"
  unfolding le_expr_def apply (cases; auto) using evaltree.ConstantExpr defer
   apply simp
  sorry
</span><span>*</span><span>)</span></span><span>


</span><span class="comment1"><span>(</span><span>*</span><span>
value "constant_add_code (BinaryExpr BinAdd (ConstantExpr (IntVal32 0)) (ConstantExpr (IntVal32 0)))"
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>print_context</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.constant_shift_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.constant_shift|fact"><span class="entity_def" id="CanonicalizationSyntax.constant_shift_code|fact"><span class="entity_def" id="CanonicalizationSyntax.constant_shift(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.constant_shift(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.constant_shift_code|thm"><span class="entity_def" id="CanonicalizationSyntax.constant_shift_code_raw|axiom"><span class="entity_def" id="offset_9478..9492">constant_shift</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>e</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.intexp|type"><span>intexp</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>⟼</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>when</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>¬</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.is_ConstantExpr|const"><span>is_ConstantExpr</span></a><span> </span><span class="free"><span>e</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.nonconstants_gt_one|fact"><span>nonconstants_gt_one</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> WAS:
   by (smt (verit, ccfv_SIG) BinaryExprE add.commute bin_eval.simps(1) evaltree.intros(5) le_expr_def)
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>print_context</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_9478..9492"><span>constant_shift</span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.neutral_zero_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.neutral_zero|fact"><span class="entity_def" id="CanonicalizationSyntax.neutral_zero_code|fact"><span class="entity_def" id="CanonicalizationSyntax.neutral_zero(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.neutral_zero(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.neutral_zero_code|thm"><span class="entity_def" id="CanonicalizationSyntax.neutral_zero_code_raw|axiom"><span>neutral_zero</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>e</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.i32exp|type"><span>i32exp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.i32exp.Rep_i32exp|fact"><span>Rep_i32exp</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal_def|fact"><span>is_IntVal_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> WAS: by fastforce </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>ML_val</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>e1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>e2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>e2</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>e1</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9963..9968">lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.neutral_left_add_sub_val|fact"><span class="entity_def" id="CanonicalizationSyntax.neutral_left_add_sub_val|thm"><span class="entity_def" id="offset_9969..9993">neutral_left_add_sub_val</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="main"><span>(</span></span><span class="free"><span>e1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>e2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>e2</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="main"><span>(</span></span><span class="free"><span>e1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>e2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>e2</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>e1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_9963..9968"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>e1</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>e2</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> TODO: need to derive information about the values being well-formed? </span><span>*</span><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.neutral_left_add_sub_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.neutral_left_add_sub|fact"><span class="entity_def" id="CanonicalizationSyntax.neutral_left_add_sub_code|fact"><span class="entity_def" id="CanonicalizationSyntax.neutral_left_add_sub(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.neutral_left_add_sub(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.neutral_left_add_sub_code|thm"><span class="entity_def" id="CanonicalizationSyntax.neutral_left_add_sub_code_raw|axiom"><span>neutral_left_add_sub</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>e1</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.intexp|type"><span>intexp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>e2</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.intexp|type"><span>intexp</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>e2</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>e1</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>defer</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_9969..9993"><span>neutral_left_add_sub_val</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.unfold_binary|fact"><span>unfold_binary</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size_gt_0|fact"><span>size_gt_0</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10457..10462">lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.neutral_right_add_sub_val|fact"><span class="entity_def" id="CanonicalizationSyntax.neutral_right_add_sub_val|thm"><span class="entity_def" id="offset_10463..10488">neutral_right_add_sub_val</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="free"><span>e1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>e2</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>e1</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="free"><span>e1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>e2</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>e1</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>e2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_10457..10462"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>e1</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>e2</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> TODO: need to derive information about the values being well-formed? </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.neutral_right_add_sub_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.neutral_right_add_sub|fact"><span class="entity_def" id="CanonicalizationSyntax.neutral_right_add_sub_code|fact"><span class="entity_def" id="CanonicalizationSyntax.neutral_right_add_sub(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.neutral_right_add_sub(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.neutral_right_add_sub_code|thm"><span class="entity_def" id="CanonicalizationSyntax.neutral_right_add_sub_code_raw|axiom"><span>neutral_right_add_sub</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>e1</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.intexp|type"><span>intexp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>e2</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.intexp|type"><span>intexp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>e1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>e2</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>defer</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_10463..10488"><span>neutral_right_add_sub_val</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.BinaryExprE|fact"><span>BinaryExprE</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size_gt_0|fact"><span>size_gt_0</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.add_ynegate_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.add_ynegate|fact"><span class="entity_def" id="CanonicalizationSyntax.add_ynegate_code|fact"><span class="entity_def" id="CanonicalizationSyntax.add_ynegate(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.add_ynegate(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.add_ynegate_code|thm"><span class="entity_def" id="CanonicalizationSyntax.add_ynegate_code_raw|axiom"><span>add_ynegate</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.i32exp|type"><span>i32exp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.i32exp|type"><span>i32exp</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>defer</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Groups.group_add_class.add_uminus_conv_diff</span><span> </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span>by (metis BinaryExpr bin_eval.simps(3) evalDet i32e_eval intval_add.simps(1) intval_negate.simps(1) intval_sub.simps(1))</span><span>*</span><span>)</span></span><span>
  
</span><span class="keyword1"><span class="command"><span>print_context</span></span></span><span>


</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>print_context</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>phase</span></span></span><span> DirectTranslationTest
  </span><span class="keyword2"><span class="keyword"><span>terminating</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size|const"><span>size</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>
value "intval_abs (IntVal32 (0))"
value "intval_abs (intval_abs (IntVal32 (0)))"
value "intval_abs (IntVal32 (2147483648))"
value "intval_abs (intval_abs (IntVal32 (2147483648)))"
value "intval_abs (IntVal32 (-2147483648))"
value "intval_abs (intval_abs (IntVal32 (-2147483648)))"
value "intval_abs (IntVal32 (4294967295))"
value "intval_abs (intval_abs (IntVal32 (4294967295)))"

lemma helper: "intval_abs (IntVal32 e) = intval_abs (intval_abs (IntVal32 e))" (is ?thesis)
  sorry

optimization AbsIdempotence: "abs(abs(Rep_int32 e)) ↦ abs(Rep_int32 e)"
  apply auto using helper
  using Rep_int32
  by (metis UnaryExpr evalDet int32_eval unary_eval.simps(1))

optimization AbsNegate: "abs(-e) ↦ abs(e) when is_IntegerStamp (stamp_expr e)"
  apply auto
  by (metis UnaryExpr abs_neg_is_neg stamp_implies_valid_value is_IntegerStamp_def unary_eval.simps(1))
</span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> NOTE: I had to add assms 2-3 to this.  It is similar to validDefIntConst. </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12251..12256">lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.int_constants_valid|fact"><span class="entity_def" id="CanonicalizationSyntax.int_constants_valid|thm"><span>int_constants_valid</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal|const"><span>is_IntVal</span></a><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_bits|const"><span>intval_bits</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_bits|const"><span>intval_bits</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="numeral"><span>64</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>take_bit</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_bits|const"><span>intval_bits</span></a><span> </span><span class="free"><span>val</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_word|const"><span>intval_word</span></a><span> </span><span class="free"><span>val</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_word|const"><span>intval_word</span></a><span> </span><span class="free"><span>val</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.constantAsStamp|const"><span>constantAsStamp</span></a><span> </span><span class="free"><span>val</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ival</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>ival</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_bits|const"><span>intval_bits</span></a><span> </span><span class="free"><span>val</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>ival</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_12251..12256"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal_def|fact"><span>is_IntVal_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_12251..12256"><span>assms</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.validStampIntConst|fact"><span>validStampIntConst</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_word.simps|fact"><span>intval_word.simps</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.validDefIntConst|fact"><span>validDefIntConst</span></a><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>  

</span><span class="comment1"><span>(</span><span>*</span><span>
lemma unary_eval_preserves_validity:
  assumes "is_int_val c"
  shows "valid_value (unary_eval op c) (constantAsStamp (unary_eval op c))"
  using assms apply (cases c) apply simp
     defer defer apply simp+
  apply (cases op)
  using int_constants_valid intval_abs.simps(1) is_int_val.simps(1) unary_eval.simps(1) apply presburger
  using int_constants_valid intval_negate.simps(1) is_int_val.simps(1) unary_eval.simps(2) apply presburger
  using int_constants_valid intval_not.simps(1) is_int_val.simps(1) unary_eval.simps(3) apply presburger
  using int_constants_valid intval_logic_negation.simps(1) is_int_val.simps(1) unary_eval.simps(4) apply presburger
     defer defer defer
     apply (cases op)
  using int_constants_valid intval_abs.simps(2) is_int_val.simps(2) unary_eval.simps(1) apply presburger
  using int_constants_valid intval_negate.simps(2) is_int_val.simps(2) unary_eval.simps(2) apply presburger
  using int_constants_valid intval_not.simps(2) is_int_val.simps(2) unary_eval.simps(3) apply presburger
  sorry (* WARNING: TODO: WARNING: a whole bunch of unary operations aren't implemented making this false *)

optimization UnaryConstantFold: "UnaryExpr op c ↦ ConstantExpr (unary_eval op val_c) when is_int_val val_c"
  apply (auto simp: int_constants_valid)
  using evaltree.ConstantExpr int_constants_valid unary_eval_preserves_validity by simp
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.AndEqual_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.AndEqual|fact"><span class="entity_def" id="CanonicalizationSyntax.AndEqual_code|fact"><span class="entity_def" id="CanonicalizationSyntax.AndEqual(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.AndEqual(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.AndEqual_code|thm"><span class="entity_def" id="CanonicalizationSyntax.AndEqual_code_raw|axiom"><span>AndEqual</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.intexp|type"><span>intexp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>&amp;</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> WAS:
   defer apply auto
  using evalDet int_constants_valid demorgans_rewrites_helper(3)
  apply (metis constantAsStamp.elims intval_and.simps)
  by (simp add: size_gt_0)
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.AndShiftConstantRight_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.AndShiftConstantRight|fact"><span class="entity_def" id="CanonicalizationSyntax.AndShiftConstantRight_code|fact"><span class="entity_def" id="CanonicalizationSyntax.AndShiftConstantRight(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.AndShiftConstantRight(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.AndShiftConstantRight_code|thm"><span class="entity_def" id="CanonicalizationSyntax.AndShiftConstantRight_code_raw|axiom"><span>AndShiftConstantRight</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>⟼</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>when</span></a></span><span> </span><span class="main"><span>~</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.is_ConstantExpr|const"><span>is_ConstantExpr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>defer</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.BinaryExprE|fact"><span>BinaryExprE</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree.simps|fact"><span>evaltree.simps</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_add_sym|fact"><span>intval_add_sym</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size.simps|fact"><span>size.simps</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.nonconstants_gt_one|fact"><span>nonconstants_gt_one</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>
optimization AndRightFallthrough: "x &amp; y ↦ y when (canBeZero x.stamp &amp; canBeOne y.stamp) = 0" sorry
optimization AndLeftFallthrough: "x &amp; y ↦ x when (canBeZero y.stamp &amp; canBeOne x.stamp) = 0" sorry
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14804..14809">lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.neutral_and|fact"><span class="entity_def" id="CanonicalizationSyntax.neutral_and|thm"><span class="entity_def" id="offset_14810..14821">neutral_and</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="free"><span>lox</span></span><span> </span><span class="free"><span>hix</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval|const"><span>bin_eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinAnd|const"><span>BinAnd</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.neg_one|const"><span>neg_one</span></a><span> </span><span class="numeral"><span>32</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_14804..14809"><span>assms</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Proofs/StampEvalThms.html#StampEvalThms.valid_int_gives|fact"><span>valid_int_gives</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>take_bit_eq_mask</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>


</span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>includes</span></span></span><span> </span><span>bit_operations_syntax</span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.AndNeutral_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.AndNeutral|fact"><span class="entity_def" id="CanonicalizationSyntax.AndNeutral_code|fact"><span class="entity_def" id="CanonicalizationSyntax.AndNeutral(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.AndNeutral(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.AndNeutral_code|thm"><span class="entity_def" id="CanonicalizationSyntax.AndNeutral_code_raw|axiom"><span>AndNeutral</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.i32exp|type"><span>i32exp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>&amp;</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.neg_one|const"><span>neg_one</span></a><span> </span><span class="numeral"><span>32</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Proofs/StampEvalThms.html#StampEvalThms.unrestricted_stamp_valid_value|fact"><span>unrestricted_stamp_valid_value</span></a><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_14810..14821"><span>neutral_and</span></a><span>
  </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> WAS:
  by (smt (z3) Value.distinct(9) bin_eval.simps(4) intval_and.elims neutral_and unrestricted_stamp_valid_value unrestricted_stamp.simps(2))
</span><span>*</span><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.ConditionalEqualBranches_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.ConditionalEqualBranches|fact"><span class="entity_def" id="CanonicalizationSyntax.ConditionalEqualBranches_code|fact"><span class="entity_def" id="CanonicalizationSyntax.ConditionalEqualBranches(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.ConditionalEqualBranches(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.ConditionalEqualBranches_code|thm"><span class="entity_def" id="CanonicalizationSyntax.ConditionalEqualBranches_code_raw|axiom"><span>ConditionalEqualBranches</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConditionalNotation|const"><span>?</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConditionalNotation|const"><span>:</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.ConditionalEqualIsRHS_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.ConditionalEqualIsRHS|fact"><span class="entity_def" id="CanonicalizationSyntax.ConditionalEqualIsRHS_code|fact"><span class="entity_def" id="CanonicalizationSyntax.ConditionalEqualIsRHS(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.ConditionalEqualIsRHS(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.ConditionalEqualIsRHS_code|thm"><span class="entity_def" id="CanonicalizationSyntax.ConditionalEqualIsRHS_code_raw|axiom"><span>ConditionalEqualIsRHS</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.EqualsNotation|const"><span>eq</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConditionalNotation|const"><span>?</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConditionalNotation|const"><span>:</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>⟼</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>when</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type|const"><span>type</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.Type.Integer|const"><span>Integer</span></a><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.type_safe|const"><span>type_safe</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> WAS:
  by (smt (z3) bool_to_val.simps(2) evalDet intval_equals.elims val_to_bool.simps(1))
</span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>
optimization ConditionalEliminateKnownLess: "(x &lt; y ? x : y) ↦ x when (x.stamp.upper &lt;= y.stamp.lower)" sorry
optimization ConditionalEliminateKnownLess: "(x &lt; y ? y : x) ↦ y when (x.stamp.upper &lt;= y.stamp.lower)" sorry
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.bool_is_int_val|fact"><span class="entity_def" id="CanonicalizationSyntax.bool_is_int_val|thm"><span class="entity_def" id="offset_15932..15947">bool_is_int_val</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal|const"><span>is_IntVal</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.bool_to_val|const"><span>bool_to_val</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.bool_to_val.simps|fact"><span>bool_to_val.simps</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal_def|fact"><span>is_IntVal_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>full_types</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Not all binary operators require equal bits, but these results hold for those that do.</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16139..16144">lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.bin_eval_defined|fact"><span class="entity_def" id="CanonicalizationSyntax.bin_eval_defined|thm"><span class="entity_def" id="offset_16145..16161">bin_eval_defined</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.int_and_equal_bits|const"><span>int_and_equal_bits</span></a><span> </span><span class="free"><span>c1</span></span><span> </span><span class="free"><span>c2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval|const"><span>bin_eval</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="free"><span>c1</span></span><span> </span><span class="free"><span>c2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal|const"><span>is_IntVal</span></a><span> </span><span class="free"><span>val</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_16139..16144"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>c1</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>c2</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>op</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_15932..15947"><span>bool_is_int_val</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.disc|fact"><span>Value.disc</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.distinct|fact"><span>Value.distinct</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int.simps|fact"><span>new_int.simps</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_15932..15947"><span>bool_is_int_val</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> TODO: this needs refining, as there are three groups of binary operators,
  each with different resulting bit widths.  Maybe we need lemmas about the
  result size for each group? 
</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16662..16667">lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.bin_eval_preserves_validity|fact"><span class="entity_def" id="CanonicalizationSyntax.bin_eval_preserves_validity|thm"><span class="entity_def" id="offset_16668..16695">bin_eval_preserves_validity</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.int_and_equal_bits|const"><span>int_and_equal_bits</span></a><span> </span><span class="free"><span>c1</span></span><span> </span><span class="free"><span>c2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval|const"><span>bin_eval</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="free"><span>c1</span></span><span> </span><span class="free"><span>c2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>val</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.constantAsStamp|const"><span>constantAsStamp</span></a><span> </span><span class="free"><span>val</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ival</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>ival</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_16145..16161"><span>bin_eval_defined</span></a><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_16662..16667"><span>assms</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal_def|fact"><span>is_IntVal_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_stamp|const"><span>valid_stamp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.constantAsStamp|const"><span>constantAsStamp</span></a><span> </span><span class="free"><span>val</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_16662..16667"><span>assms</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.validStampIntConst|fact"><span>validStampIntConst</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.BinaryFoldConstant_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.BinaryFoldConstant|fact"><span class="entity_def" id="CanonicalizationSyntax.BinaryFoldConstant_code|fact"><span class="entity_def" id="CanonicalizationSyntax.BinaryFoldConstant(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.BinaryFoldConstant(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.BinaryFoldConstant_code|thm"><span class="entity_def" id="CanonicalizationSyntax.BinaryFoldConstant_code_raw|axiom"><span>BinaryFoldConstant</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.BinaryExpr|const"><span>BinaryExpr</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="free"><span>e1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="free"><span>e2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>⟼</span></a></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.ConstantExpr|const"><span>ConstantExpr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval|const"><span>bin_eval</span></a><span> </span><span class="free"><span>op</span></span><span> </span><span class="free"><span>e1</span></span><span> </span><span class="free"><span>e2</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>when</span></a></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.int_and_equal_bits|const"><span>int_and_equal_bits</span></a><span> </span><span class="free"><span>e1</span></span><span> </span><span class="free"><span>e2</span></span><span> </span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>defer</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree.ConstantExpr|fact"><span>ConstantExpr</span></a><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_16668..16695"><span>bin_eval_preserves_validity</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.nonconstants_gt_one|fact"><span>nonconstants_gt_one</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.AddShiftConstantRight_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.AddShiftConstantRight|fact"><span class="entity_def" id="CanonicalizationSyntax.AddShiftConstantRight_code|fact"><span class="entity_def" id="CanonicalizationSyntax.AddShiftConstantRight(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.AddShiftConstantRight(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.AddShiftConstantRight_code|thm"><span class="entity_def" id="CanonicalizationSyntax.AddShiftConstantRight_code_raw|axiom"><span>AddShiftConstantRight</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>⟼</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>when</span></a></span><span> </span><span class="main"><span>~</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.is_ConstantExpr|const"><span>is_ConstantExpr</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>defer</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.BinaryExprE|fact"><span>BinaryExprE</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree.simps|fact"><span>evaltree.simps</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_add_sym|fact"><span>intval_add_sym</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size.simps|fact"><span>size.simps</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.nonconstants_gt_one|fact"><span>nonconstants_gt_one</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>
optimization RedundantSubAdd: "isAssociative + =&gt; (a - b) + b ↦ a" sorry
optimization RedundantAddSub: "isAssociative + =&gt; (b + a) - b ↦ a" sorry
</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17730..17735">lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.neutral_add|fact"><span class="entity_def" id="CanonicalizationSyntax.neutral_add|thm"><span>neutral_add</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="free"><span>lox</span></span><span> </span><span class="free"><span>hix</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval|const"><span>bin_eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinAdd|const"><span>BinAdd</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_17730..17735"><span>assms</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> TODO: this one can be false if e is malformed.  E.g. 32-bits but with upper bits set. </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_18005..18010">lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.AddNeutralVal|fact"><span class="entity_def" id="CanonicalizationSyntax.AddNeutralVal|thm"><span class="entity_def" id="offset_18011..18024">AddNeutralVal</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_18005..18010"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>e</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.AddNeutral_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.AddNeutral|fact"><span class="entity_def" id="CanonicalizationSyntax.AddNeutral_code|fact"><span class="entity_def" id="CanonicalizationSyntax.AddNeutral(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.AddNeutral(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.AddNeutral_code|thm"><span class="entity_def" id="CanonicalizationSyntax.AddNeutral_code_raw|axiom"><span>AddNeutral</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>⟼</span></a></span><span> </span><span class="free"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>when</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>e</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>impI</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>allI</span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>impI</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_18011..18024"><span>AddNeutralVal</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.intval_negateadd_equals_sub_left|fact"><span class="entity_def" id="CanonicalizationSyntax.intval_negateadd_equals_sub_left|thm"><span class="entity_def" id="offset_18356..18388">intval_negateadd_equals_sub_left</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval|const"><span>bin_eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinAdd|const"><span>BinAdd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval|const"><span>unary_eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryNeg|const"><span>UnaryNeg</span></a><span> </span><span class="free"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval|const"><span>bin_eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinSub|const"><span>BinSub</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>e</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.intval_negateadd_equals_sub_right|fact"><span class="entity_def" id="CanonicalizationSyntax.intval_negateadd_equals_sub_right|thm"><span class="entity_def" id="offset_18499..18532">intval_negateadd_equals_sub_right</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval|const"><span>bin_eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinAdd|const"><span>BinAdd</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval|const"><span>unary_eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRUnaryOp.UnaryNeg|const"><span>UnaryNeg</span></a><span> </span><span class="free"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval|const"><span>bin_eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRBinaryOp.BinSub|const"><span>BinSub</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>e</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.AddLeftNegateToSub_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.AddLeftNegateToSub|fact"><span class="entity_def" id="CanonicalizationSyntax.AddLeftNegateToSub_code|fact"><span class="entity_def" id="CanonicalizationSyntax.AddLeftNegateToSub(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.AddLeftNegateToSub(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.AddLeftNegateToSub_code|thm"><span class="entity_def" id="CanonicalizationSyntax.AddLeftNegateToSub_code_raw|axiom"><span>AddLeftNegateToSub</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>defer</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_18356..18388"><span>intval_negateadd_equals_sub_left</span></a><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree.BinaryExpr|fact"><span>BinaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.BinaryExprE|fact"><span>BinaryExprE</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.UnaryExprE|fact"><span>UnaryExprE</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size.simps|fact"><span>size.simps</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.AddRightNegateToSub_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.AddRightNegateToSub|fact"><span class="entity_def" id="CanonicalizationSyntax.AddRightNegateToSub_code|fact"><span class="entity_def" id="CanonicalizationSyntax.AddRightNegateToSub(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.AddRightNegateToSub(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.AddRightNegateToSub_code|thm"><span class="entity_def" id="CanonicalizationSyntax.AddRightNegateToSub_code_raw|axiom"><span>AddRightNegateToSub</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>-</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>defer</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#offset_18499..18532"><span>intval_negateadd_equals_sub_right</span></a><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree.BinaryExpr|fact"><span>BinaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.BinaryExprE|fact"><span>BinaryExprE</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.UnaryExprE|fact"><span>UnaryExprE</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.size.simps|fact"><span>size.simps</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.MulEliminator_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.MulEliminator|fact"><span class="entity_def" id="CanonicalizationSyntax.MulEliminator_code|fact"><span class="entity_def" id="CanonicalizationSyntax.MulEliminator(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.MulEliminator(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.MulEliminator_code|thm"><span class="entity_def" id="CanonicalizationSyntax.MulEliminator_code_raw|axiom"><span>MulEliminator</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="CanonicalizationSyntax.html#CanonicalizationSyntax.i32exp|type"><span>i32exp</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>defer</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Rings.mult_zero_class.mult_zero_right</span><span>
  </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> WAS:
  apply (metis (no_types, opaque_lifting) ConstantExpr bin_eval.simps(3) bin_eval_preserves_validity cancel_comm_monoid_add_class.diff_cancel evalDet i32e_eval int_and_equal_bits.simps(1) intval_mul.simps(1) intval_sub.simps(1))
    unfolding size.simps
    by (simp add: size_gt_0)
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>::</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>len</span><span class="main"><span>)</span></span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="CanonicalizationSyntax.MulNeutral_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="CanonicalizationSyntax.MulNeutral|fact"><span class="entity_def" id="CanonicalizationSyntax.MulNeutral_code|fact"><span class="entity_def" id="CanonicalizationSyntax.MulNeutral(2)|thm"><span class="entity_def" id="CanonicalizationSyntax.MulNeutral(1)|thm"><span class="entity_def" id="CanonicalizationSyntax.MulNeutral_code|thm"><span class="entity_def" id="CanonicalizationSyntax.MulNeutral_code_raw|axiom"><span>MulNeutral</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Groups.comm_monoid_mult_class.mult.comm_neutral</span><span>
  </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> WAS:
  by (smt (z3) Value.distinct(9) intval_mul.elims neutral_rewrite_helper(1) unrestricted_stamp_valid_value unrestricted_stamp.simps(2))
</span><span>*</span><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>
optimization MulNegate: "(x * const (-1) ) ↦ -x when (stamp_expr x = IntegerStamp 32 l u)"
  apply simp
  apply (metis BinaryExprE ConstantExprE bin_eval.simps(2) neutral_rewrite_helper(1) stamp_implies_valid_value)
  unfolding size.simps by simp
</span><span>*</span><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>
experiment begin
value "(3::32 word) mod 32"

lemma "(x::nat) ≥ 0 ∧ x &lt; base ⟹ x mod base = x"
  by simp

lemma word_mod_less: "(x::('a::len) word) &lt; base ⟹ x mod base = x"
  by (metis mod_less not_le unat_arith_simps(2) unat_arith_simps(7) unat_mono word_le_less_eq)

value "4294967298::32 word"

lemma shift_equality: "((v1::32 word) &lt;&lt; unat ((v2::32 word) mod 32)) = v1 * ((2 ^ (unat v2))::32 word)"
proof -
  have "size_class.size (2 ^ (unat v2)) = 32" sorry
  then have "(2 ^ (unat v2)) &lt; 2 ^ 32"
    using uint_range_size sorry
  then have "unat v2 &lt; 32"
    using nat_power_less_imp_less zero_less_numeral by blast
  then show ?thesis
    using ‹2 ^ unat v2 &lt; 2 ^ 32› numeral_Bit0 power2_eq_square power_add sorry
qed
end
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>