<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory AbsPhase</title>
</head>


<body>
<div class="head">
<h1>Theory AbsPhase</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>AbsNode Phase</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>AbsPhase</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span>
    </span><a href="Common.html"><span>Common</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>phase</span></span></span><span> AbsNode
  </span><span class="keyword2"><span class="keyword"><span>terminating</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.size|const"><span>size</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>


</span><span class="comment1"><span>(</span><span>*</span><span> Marks' lemmas </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_135..140">lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.abs_pos|fact"><span class="entity_def" id="AbsPhase.abs_pos|thm"><span class="entity_def" id="offset_141..148">abs_pos</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>≤s</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_135..140"><span>assms</span></a><span> </span><span>signed.leD</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_278..283">lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.abs_neg|fact"><span class="entity_def" id="AbsPhase.abs_neg|thm"><span class="entity_def" id="offset_284..291">abs_neg</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span>Nat.size</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> changed size func used</span><span>*</span><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="main"><span>-</span></span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_278..283"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_278..283"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>signed_take_bit_int_greater_eq_minus_exp</span><span> 
     </span><span>signed_take_bit_int_greater_eq_self_iff</span><span> </span><span>sint_0</span><span> </span><span>sint_word_ariths</span><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>word_sless_alt</span><span class="main"><span>)</span></span><span>
 
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_645..650">lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.abs_max_neg|fact"><span class="entity_def" id="AbsPhase.abs_max_neg|thm"><span class="entity_def" id="offset_651..662">abs_max_neg</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span>Nat.size</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> changed size func used </span><span>*</span><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_645..650"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>One_nat_def</span><span> </span><span>add.inverse_neutral</span><span> </span><span>double_eq_zero_iff</span><span> </span><span>mult_minus_right</span><span> </span><span>size_word.rep_eq</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_915..920">lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.final_abs|fact"><span class="entity_def" id="AbsPhase.final_abs|thm"><span>final_abs</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>take_bit</span><span> </span><span class="main"><span>(</span></span><span>Nat.size</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span>Nat.size</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> changed size func used </span><span>*</span><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>≤s</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>-</span></span><span class="free"><span>v</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span>Nat.size</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> changed size func used </span><span>*</span><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_651..662"><span>abs_max_neg</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_915..920"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span>Nat.size</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> changed size func used </span><span>*</span><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>word_sless_def</span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>signed_take_bit_int_greater_self_iff</span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>One_nat_def</span><span> </span><span>diff_less</span><span> </span><span>double_eq_zero_iff</span><span> </span><span>len_gt_0</span><span> </span><span>lessI</span><span> </span><span>less_irrefl</span><span> 
          </span><span>mult_minus_right</span><span> </span><span>neg_equal_0_iff_equal</span><span> </span><span>signed.rep_eq</span><span> </span><span>signed_of_int</span><span> 
          </span><span>signed_take_bit_int_greater_eq_self_iff</span><span> </span><span>signed_word_eqI</span><span> </span><span>sint_0</span><span> </span><span>sint_range_size</span><span> 
          </span><span>sint_sbintrunc'</span><span> </span><span>sint_word_ariths</span><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>size_word.rep_eq</span><span> </span><span>unsigned_0</span><span> </span><span>word_2p_lem</span><span> 
          </span><span>word_sless.rep_eq</span><span> </span><span>word_sless_def</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_284..291"><span>abs_neg</span></a><span> </span><a class="entity_ref" href="AbsPhase.html#offset_141..148"><span>abs_pos</span></a><span> </span><span>signed.nless_le</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_141..148"><span>abs_pos</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> 

</span><span class="comment1"><span>(</span><span>*</span><span> end </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.wf_abs|fact"><span class="entity_def" id="AbsPhase.wf_abs|thm"><span>wf_abs</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal|const"><span>is_IntVal</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs.simps|fact"><span>intval_abs.simps</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int.simps|fact"><span>new_int.simps</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal_def|fact"><span>is_IntVal_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="AbsPhase.bin_abs.elims|fact"><span class="entity_def" id="AbsPhase.bin_abs.induct|fact"><span class="entity_def" id="AbsPhase.bin_abs.simps|fact"><span class="entity_def" id="AbsPhase.bin_abs.pelims|fact"><span class="entity_def" id="AbsPhase.bin_abs.cases|fact"><span class="entity_def" id="AbsPhase.bin_abs.termination|fact"><span class="entity_def" id="AbsPhase.bin_abs.pinduct|fact"><span class="entity_def" id="AbsPhase.bin_abs.psimps|fact"><span class="entity_def" id="AbsPhase.bin_abs_rel.inducts|fact"><span class="entity_def" id="AbsPhase.bin_abs_rel.simps|fact"><span class="entity_def" id="AbsPhase.bin_abs_rel.induct|fact"><span class="entity_def" id="AbsPhase.bin_abs_rel.cases|fact"><span class="entity_def" id="AbsPhase.bin_abs_rel.intros|fact"><span class="entity_def" id="AbsPhase.bin_abs_graph.inducts|fact"><span class="entity_def" id="AbsPhase.bin_abs_graph.simps|fact"><span class="entity_def" id="AbsPhase.bin_abs_graph.induct|fact"><span class="entity_def" id="AbsPhase.bin_abs_graph.cases|fact"><span class="entity_def" id="AbsPhase.bin_abs_graph.intros|fact"><span class="entity_def" id="AbsPhase.bin_abs.elims|thm"><span class="entity_def" id="AbsPhase.bin_abs.induct|thm"><span class="entity_def" id="AbsPhase.bin_abs.simps|thm"><span class="entity_def" id="AbsPhase.bin_abs.pelims|thm"><span class="entity_def" id="AbsPhase.bin_abs.cases|thm"><span class="entity_def" id="AbsPhase.bin_abs.termination|thm"><span class="entity_def" id="AbsPhase.bin_abs.pinduct|thm"><span class="entity_def" id="AbsPhase.bin_abs.psimps|thm"><span class="entity_def" id="AbsPhase.bin_abs_rel.inducts|thm"><span class="entity_def" id="AbsPhase.bin_abs_rel.simps|thm"><span class="entity_def" id="AbsPhase.bin_abs_rel.induct|thm"><span class="entity_def" id="AbsPhase.bin_abs_rel.cases|thm"><span class="entity_def" id="AbsPhase.bin_abs_graph.inducts|thm"><span class="entity_def" id="AbsPhase.bin_abs_graph.simps|thm"><span class="entity_def" id="AbsPhase.bin_abs_graph.induct|thm"><span class="entity_def" id="AbsPhase.bin_abs_graph.cases|thm"><span class="entity_def" id="AbsPhase.bin_abs_graph.intros|thm"><span class="entity_def" id="AbsPhase.bin_abs_def|axiom"><span class="entity_def" id="AbsPhase.bin_abs_rel_def|axiom"><span class="entity_def" id="AbsPhase.bin_abs_sumC_def|axiom"><span class="entity_def" id="AbsPhase.bin_abs_graph_def|axiom"><span class="entity_def" id="AbsPhase.bin_abs_dom|const"><span class="entity_def" id="AbsPhase.bin_abs_rel|const"><span class="entity_def" id="AbsPhase.bin_abs_sumC|const"><span class="entity_def" id="AbsPhase.bin_abs_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="AbsPhase.bin_abs|const"><span>bin_abs</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span>len</span><span> </span><span>word</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span>len</span><span> </span><span>word</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bin_abs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>


</span><span class="comment1"><span>(</span><span>*</span><span> Helpers - Value level </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.val_abs_zero|fact"><span class="entity_def" id="AbsPhase.val_abs_zero|thm"><span class="entity_def" id="offset_2331..2343">val_abs_zero</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2399..2404">lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.less_eq_zero|fact"><span class="entity_def" id="AbsPhase.less_eq_zero|thm"><span class="entity_def" id="offset_2405..2417">less_eq_zero</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.val_to_bool|const"><span>val_to_bool</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>val[</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.int_signed_value|const"><span>int_signed_value</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_2399..2404"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_less_than.simps|fact"><span>intval_less_than.simps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.bool_to_val.elims|fact"><span>bool_to_val.elims</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.val_to_bool.simps|fact"><span>val_to_bool.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2627..2632">lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.val_abs_pos|fact"><span class="entity_def" id="AbsPhase.val_abs_pos|thm"><span class="entity_def" id="offset_2633..2644">val_abs_pos</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.val_to_bool|const"><span>val_to_bool</span></a><span class="main"><span>(</span></span><span class="keyword1"><span>val[</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_2627..2632"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_2405..2417"><span>less_eq_zero</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs.simps|fact"><span>intval_abs.simps</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int.simps|fact"><span>new_int.simps</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2844..2849">lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.val_abs_neg|fact"><span class="entity_def" id="AbsPhase.val_abs_neg|thm"><span class="entity_def" id="offset_2850..2861">val_abs_neg</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.val_to_bool|const"><span>val_to_bool</span></a><span class="main"><span>(</span></span><span class="keyword1"><span>val[</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_negate|const"><span>intval_negate</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_2844..2849"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_2405..2417"><span>less_eq_zero</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs.simps|fact"><span>intval_abs.simps</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int.simps|fact"><span>new_int.simps</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.val_bool_unwrap|fact"><span class="entity_def" id="AbsPhase.val_bool_unwrap|thm"><span class="entity_def" id="offset_3081..3096">val_bool_unwrap</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.val_to_bool|const"><span>val_to_bool</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.bool_to_val|const"><span>bool_to_val</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.bool_to_val.elims|fact"><span>bool_to_val.elims</span></a><span> </span><span>one_neq_zero</span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.val_to_bool.simps|fact"><span>val_to_bool.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.take_bit_unwrap|fact"><span class="entity_def" id="AbsPhase.take_bit_unwrap|thm"><span class="entity_def" id="offset_3206..3221">take_bit_unwrap</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v1</span></span><span class="main"><span>::</span></span><span class="numeral"><span>64</span></span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>v1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Graph/ValueThms.html#ValueThms.size64|fact"><span>size64</span></a><span> </span><span>size_word.rep_eq</span><span> </span><span>take_bit_length_eq</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3323..3328">lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.bit_less_eq_def|fact"><span class="entity_def" id="AbsPhase.bit_less_eq_def|thm"><span class="entity_def" id="offset_3329..3344">bit_less_eq_def</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>v1</span></span><span> </span><span class="free"><span>v2</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>64</span></span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="numeral"><span>64</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sint</span><span> </span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>&lt;</span></span><span> </span><span>sint</span><span> </span><span class="main"><span>(</span></span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟷</span></span><span>
    </span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>63</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>Word.rep</span><span> </span><span class="free"><span>v1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>signed_take_bit</span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>63</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>Word.rep</span><span> </span><span class="free"><span>v2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_3323..3328"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span> likely untrue but is a very useful simplification temporarily during merging </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.less_eq_def|fact"><span class="entity_def" id="AbsPhase.less_eq_def|thm"><span class="entity_def" id="offset_3723..3734">less_eq_def</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span>assumes "0 &lt; b ∧ b ≤ 64"</span><span>*</span><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.val_to_bool|const"><span>val_to_bool</span></a><span class="main"><span>(</span></span><span class="keyword1"><span>val[</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v2</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟷</span></span><span> </span><span class="free"><span>v1</span></span><span> </span><span class="keyword1"><span>&lt;s</span></span><span> </span><span class="free"><span>v2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int.simps|fact"><span>new_int.simps</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_less_than.simps|fact"><span>intval_less_than.simps</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.bool_to_val_bin.simps|fact"><span>bool_to_val_bin.simps</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.bool_to_val.simps|fact"><span>bool_to_val.simps</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.int_signed_value.simps|fact"><span>int_signed_value.simps</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_3081..3096"><span>val_bool_unwrap</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>word_sless_def</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>signed_def</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_3329..3344"><span>bit_less_eq_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>bot_nat_0.extremum</span><span> </span><span>take_bit_0</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_3329..3344"><span>bit_less_eq_def</span></a><span> </span><span>bot_nat_0.extremum</span><span> </span><span>take_bit_0</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4195..4200">lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.val_abs_always_pos|fact"><span class="entity_def" id="AbsPhase.val_abs_always_pos|thm"><span class="entity_def" id="offset_4201..4219">val_abs_always_pos</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>≤s</span></span><span> </span><span class="free"><span>v'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_4195..4200"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_2331..2343"><span>val_abs_zero</span></a><span> </span><a class="entity_ref" href="AbsPhase.html#offset_4195..4200"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>Suc_diff_1</span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_3329..3344"><span>bit_less_eq_def</span></a><span> </span><span>bot_nat_0.extremum</span><span> </span><span>diff_is_0_eq</span><span> </span><span>len_gt_0</span><span> </span><span>len_of_numeral_defs</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>order_le_less</span><span> </span><span>signed_eq_0_iff</span><span> </span><span>take_bit_0</span><span> </span><span>take_bit_signed_take_bit</span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_3206..3221"><span>take_bit_unwrap</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_4641..4645">neq0</span><span class="main"><span>:</span></span><span> </span><span>False</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.val_to_bool|const"><span>val_to_bool</span></a><span class="main"><span>(</span></span><span class="keyword1"><span>val[</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_3723..3734"><span>less_eq_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_4195..4200"><span>assms</span></a><span> </span><a class="entity_ref" href="AbsPhase.html#offset_2633..2644"><span>val_abs_pos</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>One_nat_def</span><span> </span><span>Suc_leI</span><span> </span><span>bit.compl_one</span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_3329..3344"><span>bit_less_eq_def</span></a><span> </span><span>cancel_comm_monoid_add_class.diff_cancel</span><span> </span><span>diff_zero</span><span> </span><span>len_gt_0</span><span> </span><span>len_of_numeral_defs</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>mask_0</span><span> </span><span>mask_1</span><span> </span><span>one_le_numeral</span><span> </span><span>one_neq_zero</span><span> </span><span>signed_word_eqI</span><span> </span><a class="entity_ref" href="../Graph/ValueThms.html#ValueThms.take_bit_dist_subL|fact"><span>take_bit_dist_subL</span></a><span> </span><span>take_bit_minus_one_eq_mask</span><span> </span><span>take_bit_not_eq_mask_diff</span><span> </span><span>take_bit_signed_take_bit</span><span> </span><span>zero_le_numeral</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.val_to_bool|const"><span>val_to_bool</span></a><span class="main"><span>(</span></span><span class="keyword1"><span>val[</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_4641..4645"><span>neq0</span></a><span> </span><a class="entity_ref" href="AbsPhase.html#offset_3723..3734"><span>less_eq_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>signed.neqE</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_2850..2861"><span>val_abs_neg</span></a><span> </span><a class="entity_ref" href="AbsPhase.html#offset_3723..3734"><span>less_eq_def</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int.simps|fact"><span>new_int.simps</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_negate.simps|fact"><span>intval_negate.simps</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>signed.nless_le</span><span> </span><span>take_bit_0</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5459..5464">lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.intval_abs_elims|fact"><span class="entity_def" id="AbsPhase.intval_abs_elims|thm"><span class="entity_def" id="offset_5465..5481">intval_abs_elims</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>t</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.int_signed_value|const"><span>int_signed_value</span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_5459..5464"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs.elims|fact"><span>intval_abs.elims</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5669..5674">lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.wf_abs_new_int|fact"><span class="entity_def" id="AbsPhase.wf_abs_new_int|thm"><span>wf_abs_new_int</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>∨</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_5669..5674"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs.simps|fact"><span>intval_abs.simps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5886..5891">lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.mono_undef_abs|fact"><span class="entity_def" id="AbsPhase.mono_undef_abs|thm"><span class="entity_def" id="offset_5892..5906">mono_undef_abs</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_5886..5891"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Value level proofs </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6042..6047">lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.val_abs_idem|fact"><span class="entity_def" id="AbsPhase.val_abs_idem|thm"><span class="entity_def" id="offset_6048..6060">val_abs_idem</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_6042..6047"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>v</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_6203..6209">in_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_6042..6047"><span>assms</span></a><span> </span><a class="entity_ref" href="AbsPhase.html#offset_5465..5481"><span>intval_abs_elims</span></a><span> </span><a class="entity_ref" href="AbsPhase.html#offset_5892..5906"><span>mono_undef_abs</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.val_to_bool|const"><span>val_to_bool</span></a><span class="main"><span>(</span></span><span class="keyword1"><span>val[</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_6392..6396">True</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>nested</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_2850..2861"><span>val_abs_neg</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_negate.simps|fact"><span>intval_negate.simps</span></a><span> </span><a class="entity_ref" href="AbsPhase.html#offset_6203..6209"><span>in_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_6203..6209"><span>in_def</span></a><span> </span><a class="entity_ref" href="AbsPhase.html#offset_6392..6396"><span>True</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int.simps|fact"><span>new_int.simps</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs.simps|fact"><span>intval_abs.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_3723..3734"><span>less_eq_def</span></a><span> </span><a class="entity_ref" href="AbsPhase.html#offset_2405..2417"><span>less_eq_zero</span></a><span> </span><span>less_numeral_extra</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> 
          </span><span>mask_1</span><span> </span><span>mask_eq_take_bit_minus_one</span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.neg_one.elims|fact"><span>neg_one.elims</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.neg_one_signed|fact"><span>neg_one_signed</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int.simps|fact"><span>new_int.simps</span></a><span> 
          </span><span>one_le_numeral</span><span> </span><span>one_neq_zero</span><span> </span><span>signed.neqE</span><span> </span><span>signed.not_less</span><span> </span><span>take_bit_of_0</span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_4201..4219"><span>val_abs_always_pos</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_4201..4219"><span>val_abs_always_pos</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_6392..6396"><span>True</span></a><span> </span><a class="entity_ref" href="AbsPhase.html#offset_6203..6209"><span>in_def</span></a><span> </span><a class="entity_ref" href="AbsPhase.html#offset_3723..3734"><span>less_eq_def</span></a><span> </span><span>signed.leD</span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>signed.nless_le</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_6203..6209"><span>in_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7114..7119">lemma</span></span></span><span> </span><span class="entity_def" id="AbsPhase.val_abs_negate|fact"><span class="entity_def" id="AbsPhase.val_abs_negate|thm"><span class="entity_def" id="offset_7120..7134">val_abs_negate</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_negate|const"><span>intval_negate</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_negate|const"><span>intval_negate</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.intval_negate|const"><span>intval_negate</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs|const"><span>intval_abs</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_7114..7119"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_3723..3734"><span>less_eq_def</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int.simps|fact"><span>new_int.simps</span></a><span> </span><span>signed.dual_order.strict_iff_not</span><span> </span><span>signed.less_linear</span><span> 
          </span><span>take_bit_0</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>add.inverse_neutral</span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_abs.simps|fact"><span>intval_abs.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_3723..3734"><span>less_eq_def</span></a><span> </span><a class="entity_ref" href="AbsPhase.html#offset_2405..2417"><span>less_eq_zero</span></a><span> 
      </span><span>less_numeral_extra</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>mask_1</span><span> </span><span>mask_eq_take_bit_minus_one</span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.neg_one.elims|fact"><span>neg_one.elims</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.neg_one_signed|fact"><span>neg_one_signed</span></a><span> 
      </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int.simps|fact"><span>new_int.simps</span></a><span> </span><span>one_le_numeral</span><span> </span><span>one_neq_zero</span><span> </span><span>signed.order.order_iff_strict</span><span> </span><span>take_bit_of_0</span><span> 
      </span><a class="entity_ref" href="AbsPhase.html#offset_4201..4219"><span>val_abs_always_pos</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Optimisations</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="AbsPhase.AbsIdempotence_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="AbsPhase.AbsIdempotence|fact"><span class="entity_def" id="AbsPhase.AbsIdempotence_code|fact"><span class="entity_def" id="AbsPhase.AbsIdempotence(2)|thm"><span class="entity_def" id="AbsPhase.AbsIdempotence(1)|thm"><span class="entity_def" id="AbsPhase.AbsIdempotence_code|thm"><span class="entity_def" id="AbsPhase.AbsIdempotence_code_raw|axiom"><span>AbsIdempotence</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>abs</span><span class="main"><span>(</span></span><span>abs</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span>  </span><span>abs</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree.UnaryExpr|fact"><span>UnaryExpr</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval.simps|fact"><span>unary_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_6048..6060"><span>val_abs_idem</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="AbsPhase.AbsNegate_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="AbsPhase.AbsNegate|fact"><span class="entity_def" id="AbsPhase.AbsNegate_code|fact"><span class="entity_def" id="AbsPhase.AbsNegate(2)|thm"><span class="entity_def" id="AbsPhase.AbsNegate(1)|thm"><span class="entity_def" id="AbsPhase.AbsNegate_code|thm"><span class="entity_def" id="AbsPhase.AbsNegate_code_raw|axiom"><span>AbsNegate</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>abs</span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span>  </span><span>abs</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="AbsPhase.html#offset_7120..7134"><span>val_abs_negate</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evaltree_not_undef|fact"><span>evaltree_not_undef</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval.simps|fact"><span>unary_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.unfold_unary|fact"><span>unfold_unary</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> End of AbsPhase </span><span>*</span><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> End of file </span><span>*</span><span>)</span></span></pre>
</body>

</html>