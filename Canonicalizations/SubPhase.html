<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory SubPhase</title>
</head>


<body>
<div class="head">
<h1>Theory SubPhase</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>SubNode Phase</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>SubPhase</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span>
    </span><a href="Common.html"><span>Common</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>phase</span></span></span><span> SubNode
  </span><span class="keyword2"><span class="keyword"><span>terminating</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.size|const"><span>size</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Word level proofs </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.bin_sub_after_right_add|fact"><span class="entity_def" id="SubPhase.bin_sub_after_right_add|thm"><span class="entity_def" id="offset_143..166">bin_sub_after_right_add</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>::</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>len</span><span class="main"><span>)</span></span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span class="main"><span>::</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>len</span><span class="main"><span>)</span></span><span> </span><span>word</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.sub_self_is_zero|fact"><span class="entity_def" id="SubPhase.sub_self_is_zero|thm"><span>sub_self_is_zero</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>::</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>len</span><span class="main"><span>)</span></span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.bin_sub_then_left_add|fact"><span class="entity_def" id="SubPhase.bin_sub_then_left_add|thm"><span>bin_sub_then_left_add</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>::</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>len</span><span class="main"><span>)</span></span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span class="main"><span>::</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>len</span><span class="main"><span>)</span></span><span> </span><span>word</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.bin_sub_then_left_sub|fact"><span class="entity_def" id="SubPhase.bin_sub_then_left_sub|thm"><span>bin_sub_then_left_sub</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>::</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>len</span><span class="main"><span>)</span></span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span class="main"><span>::</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>len</span><span class="main"><span>)</span></span><span> </span><span>word</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.bin_subtract_zero|fact"><span class="entity_def" id="SubPhase.bin_subtract_zero|thm"><span>bin_subtract_zero</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.bin_sub_negative_value|fact"><span class="entity_def" id="SubPhase.bin_sub_negative_value|thm"><span>bin_sub_negative_value</span></span></span><span class="main"><span>:</span></span><span>
 </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>len</span><span class="main"><span>)</span></span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>len</span><span class="main"><span>)</span></span><span> </span><span>word</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.bin_sub_self_is_zero|fact"><span class="entity_def" id="SubPhase.bin_sub_self_is_zero|thm"><span>bin_sub_self_is_zero</span></span></span><span class="main"><span>:</span></span><span>
 </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>len</span><span class="main"><span>)</span></span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.bin_sub_negative_const|fact"><span class="entity_def" id="SubPhase.bin_sub_negative_const|thm"><span>bin_sub_negative_const</span></span></span><span class="main"><span>:</span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span>len</span><span> </span><span>word</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Value level proofs </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_905..910">lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.val_sub_after_right_add_2|fact"><span class="entity_def" id="SubPhase.val_sub_after_right_add_2|thm"><span class="entity_def" id="offset_911..936">val_sub_after_right_add_2</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>val[</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_143..166"><span>bin_sub_after_right_add</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_905..910"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>full_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_sub.simps|fact"><span>intval_sub.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1169..1174">lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.val_sub_after_left_sub|fact"><span class="entity_def" id="SubPhase.val_sub_after_left_sub|thm"><span class="entity_def" id="offset_1175..1197">val_sub_after_left_sub</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>val[</span></span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_1169..1174"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_sub.elims|fact"><span>intval_sub.elims</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1362..1367">lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.val_sub_then_left_sub|fact"><span class="entity_def" id="SubPhase.val_sub_then_left_sub|thm"><span class="entity_def" id="offset_1368..1389">val_sub_then_left_sub</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>val[</span></span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_1362..1367"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_sub.simps|fact"><span>intval_sub.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1588..1593">lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.val_subtract_zero|fact"><span class="entity_def" id="SubPhase.val_subtract_zero|thm"><span>val_subtract_zero</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.intval_sub|const"><span>intval_sub</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span> </span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.intval_sub|const"><span>intval_sub</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>val[</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_1588..1593"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1776..1781">lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.val_zero_subtract_value|fact"><span class="entity_def" id="SubPhase.val_zero_subtract_value|thm"><span>val_zero_subtract_value</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.intval_sub|const"><span>intval_sub</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span> </span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Values.html#Values.intval_sub|const"><span>intval_sub</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>val[</span></span><span class="main"><span>-</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_1776..1781"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1971..1976">lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.val_sub_then_left_add|fact"><span class="entity_def" id="SubPhase.val_sub_then_left_add|thm"><span class="entity_def" id="offset_1977..1998">val_sub_then_left_add</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>val[</span></span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_1971..1976"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_sub.simps|fact"><span>intval_sub.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2179..2184">lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.val_sub_negative_value|fact"><span class="entity_def" id="SubPhase.val_sub_negative_value|thm"><span class="entity_def" id="offset_2185..2207">val_sub_negative_value</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>val[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_2179..2184"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2328..2333">lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.val_sub_self_is_zero|fact"><span class="entity_def" id="SubPhase.val_sub_self_is_zero|thm"><span>val_sub_self_is_zero</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="keyword1"><span>val[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_2328..2333"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2479..2484">lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.val_sub_negative_const|fact"><span class="entity_def" id="SubPhase.val_sub_negative_const|thm"><span>val_sub_negative_const</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int|const"><span>new_int</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="keyword1"><span>val[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>val[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_2479..2484"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Exp level proofs </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.exp_sub_after_right_add|fact"><span class="entity_def" id="SubPhase.exp_sub_after_right_add|thm"><span class="entity_def" id="offset_2673..2696">exp_sub_after_right_add</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>exp[</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_911..936"><span>val_sub_after_right_add_2</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.eval_unused_bits_zero|fact"><span>eval_unused_bits_zero</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_add.elims|fact"><span>intval_add.elims</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int.simps|fact"><span>new_int.simps</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.exp_sub_after_right_add2|fact"><span class="entity_def" id="SubPhase.exp_sub_after_right_add2|thm"><span class="entity_def" id="offset_2875..2899">exp_sub_after_right_add2</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>exp[</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_2673..2696"><span>exp_sub_after_right_add</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_add_sym|fact"><span>intval_add_sym</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.unfold_binary|fact"><span>unfold_binary</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.inject|fact"><span>Value.inject</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>diff_eq_eq</span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.eval_unused_bits_zero|fact"><span>eval_unused_bits_zero</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_add.elims|fact"><span>intval_add.elims</span></a><span> 
      </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_sub.elims|fact"><span>intval_sub.elims</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int.simps|fact"><span>new_int.simps</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int_bin.simps|fact"><span>new_int_bin.simps</span></a><span> </span><a class="entity_ref" href="../Graph/ValueThms.html#ValueThms.take_bit_dist_subL|fact"><span>take_bit_dist_subL</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.exp_sub_negative_value|fact"><span class="entity_def" id="SubPhase.exp_sub_negative_value|thm"><span class="entity_def" id="offset_3226..3248">exp_sub_negative_value</span></span></span><span class="main"><span>:</span></span><span>
 </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_2185..2207"><span>val_sub_negative_value</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evaltree_not_undef|fact"><span>evaltree_not_undef</span></a><span> 
      </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval.simps|fact"><span>unary_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.unfold_binary|fact"><span>unfold_binary</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.unfold_unary|fact"><span>unfold_unary</span></a><span class="main"><span>)</span></span><span>


</span><span class="comment1"><span>(</span><span>*</span><span> wf_stamp definition borrowed from ConditionalPhase </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="SubPhase.wf_stamp_def|fact"><span class="entity_def" id="SubPhase.wf_stamp_def|thm"><span class="entity_def" id="SubPhase.wf_stamp_def_raw|axiom"><span class="entity_def" id="offset_3509..3519">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="SubPhase.wf_stamp|const"><span>wf_stamp</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>bool</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>wf_stamp</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>e</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>e</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟶</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>e</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.exp_sub_then_left_sub|fact"><span class="entity_def" id="SubPhase.exp_sub_then_left_sub|thm"><span class="entity_def" id="offset_3636..3657">exp_sub_then_left_sub</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_1368..1389"><span>val_sub_then_left_sub</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_3757..3758">p</span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> m p xa xaa ya</span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="operator"><span>-</span></span><span> 
      </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xa</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_3811..3813">xa</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="skolem"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="skolem"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="skolem"><span>xa</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_3757..3758"><span>p</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
      </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ya</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_3883..3885">ya</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="skolem"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="skolem"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="skolem"><span>ya</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_3757..3758"><span>p</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xaa</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_3955..3958">xaa</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="skolem"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="skolem"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="skolem"><span>xaa</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_3757..3758"><span>p</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4018..4019">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="skolem"><span>xa</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>xaa</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>ya</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_3757..3758"><span>p</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_3757..3758"><span>p</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_3757..3758"><span>p</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_3757..3758"><span>p</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_3811..3813"><span>xa</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_3955..3958"><span>xaa</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_3883..3885"><span>ya</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>val[</span></span><span class="skolem"><span>xaa</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>ya</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="skolem"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span class="skolem"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="keyword1"><span>val[</span></span><span class="skolem"><span>xa</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>xaa</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>ya</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="SubPhase.html#offset_4018..4019"><span>1</span></a><span>"</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.exhaust|fact"><span>Value.exhaust</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.eval_unused_bits_zero|fact"><span>eval_unused_bits_zero</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evaltree_not_undef|fact"><span>evaltree_not_undef</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_sub.simps|fact"><span>intval_sub.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_sub.simps|fact"><span>intval_sub.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>7</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int.simps|fact"><span>new_int.simps</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_3757..3758"><span>p</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_1368..1389"><span>val_sub_then_left_sub</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_3811..3813"><span>xa</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_3955..3958"><span>xaa</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_3883..3885"><span>ya</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_3757..3758"><span>p</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_3757..3758"><span>p</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_3757..3758"><span>p</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_3811..3813"><span>xa</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_3955..3958"><span>xaa</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_3883..3885"><span>ya</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>thm_oracles</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_3636..3657"><span>exp_sub_then_left_sub</span></a><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Optimisations</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="SubPhase.SubAfterAddRight_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="SubPhase.SubAfterAddRight|fact"><span class="entity_def" id="SubPhase.SubAfterAddRight_code|fact"><span class="entity_def" id="SubPhase.SubAfterAddRight(2)|thm"><span class="entity_def" id="SubPhase.SubAfterAddRight(1)|thm"><span class="entity_def" id="SubPhase.SubAfterAddRight_code|thm"><span class="entity_def" id="SubPhase.SubAfterAddRight_code_raw|axiom"><span>SubAfterAddRight</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span>  </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_2673..2696"><span>exp_sub_after_right_add</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="SubPhase.SubAfterAddLeft_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="SubPhase.SubAfterAddLeft|fact"><span class="entity_def" id="SubPhase.SubAfterAddLeft_code|fact"><span class="entity_def" id="SubPhase.SubAfterAddLeft(2)|thm"><span class="entity_def" id="SubPhase.SubAfterAddLeft(1)|thm"><span class="entity_def" id="SubPhase.SubAfterAddLeft_code|thm"><span class="entity_def" id="SubPhase.SubAfterAddLeft_code_raw|axiom"><span>SubAfterAddLeft</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span>  </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_2875..2899"><span>exp_sub_after_right_add2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="SubPhase.SubAfterSubLeft_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="SubPhase.SubAfterSubLeft|fact"><span class="entity_def" id="SubPhase.SubAfterSubLeft_code|fact"><span class="entity_def" id="SubPhase.SubAfterSubLeft(2)|thm"><span class="entity_def" id="SubPhase.SubAfterSubLeft(1)|thm"><span class="entity_def" id="SubPhase.SubAfterSubLeft_code|thm"><span class="entity_def" id="SubPhase.SubAfterSubLeft_code_raw|axiom"><span>SubAfterSubLeft</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span>  </span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Suc_lessI</span><span> </span><span>add_2_eq_Suc'</span><span> </span><span>add_less_cancel_right</span><span> </span><span>less_trans_Suc</span><span> </span><span>not_add_less1</span><span> </span><a class="entity_ref" href="Common.html#Common.size_binary_const|fact"><span>size_binary_const</span></a><span> </span><a class="entity_ref" href="Common.html#Common.size_binary_lhs|fact"><span>size_binary_lhs</span></a><span> </span><a class="entity_ref" href="Common.html#Common.size_binary_rhs|fact"><span>size_binary_rhs</span></a><span> </span><a class="entity_ref" href="Common.html#Common.size_non_add|fact"><span>size_non_add</span></a><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval.simps|fact"><span>unary_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.unfold_unary|fact"><span>unfold_unary</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_1175..1197"><span>val_sub_after_left_sub</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="SubPhase.SubThenAddLeft_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="SubPhase.SubThenAddLeft|fact"><span class="entity_def" id="SubPhase.SubThenAddLeft_code|fact"><span class="entity_def" id="SubPhase.SubThenAddLeft(2)|thm"><span class="entity_def" id="SubPhase.SubThenAddLeft(1)|thm"><span class="entity_def" id="SubPhase.SubThenAddLeft_code|thm"><span class="entity_def" id="SubPhase.SubThenAddLeft_code_raw|axiom"><span>SubThenAddLeft</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval.simps|fact"><span>unary_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.unfold_unary|fact"><span>unfold_unary</span></a><span> 
      </span><a class="entity_ref" href="SubPhase.html#offset_1977..1998"><span>val_sub_then_left_add</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="SubPhase.SubThenAddRight_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="SubPhase.SubThenAddRight|fact"><span class="entity_def" id="SubPhase.SubThenAddRight_code|fact"><span class="entity_def" id="SubPhase.SubThenAddRight(2)|thm"><span class="entity_def" id="SubPhase.SubThenAddRight(1)|thm"><span class="entity_def" id="SubPhase.SubThenAddRight_code|thm"><span class="entity_def" id="SubPhase.SubThenAddRight_code_raw|axiom"><span>SubThenAddRight</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="main"><span>-</span></span><span class="free"><span>x</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_add_sym|fact"><span>intval_add_sym</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval.simps|fact"><span>unary_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.unfold_unary|fact"><span>unfold_unary</span></a><span> 
      </span><a class="entity_ref" href="SubPhase.html#offset_1977..1998"><span>val_sub_then_left_add</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="SubPhase.SubThenSubLeft_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="SubPhase.SubThenSubLeft|fact"><span class="entity_def" id="SubPhase.SubThenSubLeft_code|fact"><span class="entity_def" id="SubPhase.SubThenSubLeft(2)|thm"><span class="entity_def" id="SubPhase.SubThenSubLeft(1)|thm"><span class="entity_def" id="SubPhase.SubThenSubLeft_code|thm"><span class="entity_def" id="SubPhase.SubThenSubLeft_code_raw|axiom"><span>SubThenSubLeft</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.size_simps|fact"><span class="dynamic"><span class="dynamic"><span>size_simps</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_3636..3657"><span>exp_sub_then_left_sub</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
 
</span><span class="keyword1"><span class="command"><span class="entity_def" id="SubPhase.SubtractZero_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="SubPhase.SubtractZero|fact"><span class="entity_def" id="SubPhase.SubtractZero_code|fact"><span class="entity_def" id="SubPhase.SubtractZero(2)|thm"><span class="entity_def" id="SubPhase.SubtractZero(1)|thm"><span class="entity_def" id="SubPhase.SubtractZero_code|thm"><span class="entity_def" id="SubPhase.SubtractZero_code_raw|axiom"><span>SubtractZero</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>⟼</span></a></span><span> </span><span class="free"><span>x</span></span><span> 
                             </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>when</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="SubPhase.html#SubPhase.wf_stamp|const"><span>wf_stamp</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>lo</span></span><span> </span><span class="free"><span>hi</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>add.right_neutral</span><span> </span><span>diff_add_cancel</span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.eval_unused_bits_zero|fact"><span>eval_unused_bits_zero</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_sub.elims|fact"><span>intval_sub.elims</span></a><span> 
      </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_word.simps|fact"><span>intval_word.simps</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int.simps|fact"><span>new_int.simps</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int_bin.simps|fact"><span>new_int_bin.simps</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Doesn't have any subgoals? </span><span>*</span><span>)</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>
optimization SubNegativeConstant: "(x - (const (IntVal b y))) ⟼ 
                                    x + (const (IntVal b y))  when (y &lt; 0)"  
  done
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="SubPhase.SubNegativeValue_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="SubPhase.SubNegativeValue|fact"><span class="entity_def" id="SubPhase.SubNegativeValue_code|fact"><span class="entity_def" id="SubPhase.SubNegativeValue(2)|thm"><span class="entity_def" id="SubPhase.SubNegativeValue(1)|thm"><span class="entity_def" id="SubPhase.SubNegativeValue_code|thm"><span class="entity_def" id="SubPhase.SubNegativeValue_code_raw|axiom"><span class="entity_def" id="offset_5981..5997">SubNegativeValue</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>add_2_eq_Suc'</span><span> </span><span>less_SucI</span><span> </span><span>less_add_Suc1</span><span> </span><span>not_less_eq</span><span> </span><a class="entity_ref" href="Common.html#Common.size_binary_const|fact"><span>size_binary_const</span></a><span> </span><a class="entity_ref" href="Common.html#Common.size_non_add|fact"><span>size_non_add</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_3226..3248"><span>exp_sub_negative_value</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>thm_oracles</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_5981..5997"><span>SubNegativeValue</span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6187..6192">lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.negate_idempotent|fact"><span class="entity_def" id="SubPhase.negate_idempotent|thm"><span class="entity_def" id="offset_6193..6210">negate_idempotent</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>val[</span></span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_6187..6192"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.is_IntVal_def|fact"><span>is_IntVal_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6330..6335">lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.remove_sub_preserve_take_bit|fact"><span class="entity_def" id="SubPhase.remove_sub_preserve_take_bit|thm"><span class="entity_def" id="offset_6336..6364">remove_sub_preserve_take_bit</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>64</span></span><span> </span><span>word</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="numeral"><span>64</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_6330..6335"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span class="numeral"><span>64</span></span><span> </span><span>word</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>take_bit</span><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>::</span></span><span class="numeral"><span>64</span></span><span> </span><span>word</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>value</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>take_bit</span><span> </span><span class="numeral"><span>64</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>::</span></span><span class="numeral"><span>64</span></span><span> </span><span>word</span><span>"</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> if sign extend take bits of b v get back v </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6639..6644">lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.valid_sub_const|fact"><span class="entity_def" id="SubPhase.valid_sub_const|thm"><span class="entity_def" id="offset_6645..6660">valid_sub_const</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>val[</span></span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.constantAsStamp|const"><span>constantAsStamp</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>val[</span></span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.constantAsStamp|const"><span>constantAsStamp</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_6639..6644"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>int_power_div_base</span><span> </span><a class="entity_ref" href="../Graph/ValueThms.html#ValueThms.signed_take_bit_int_greater_eq_minus_exp_word|fact"><span>signed_take_bit_int_greater_eq_minus_exp_word</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> opaque_lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>One_nat_def</span><span> </span><span>Suc_diff_Suc</span><span> </span><span>Suc_le_lessD</span><span> </span><span>cancel_comm_monoid_add_class.diff_cancel</span><span> </span><span>diff_diff_cancel</span><span> </span><span>gr0_conv_Suc</span><span> </span><span>lessI</span><span> </span><span>less_imp_le_nat</span><span> </span><a class="entity_ref" href="../Graph/ValueThms.html#ValueThms.signed_take_bit_int_less_exp_word|fact"><span>signed_take_bit_int_less_exp_word</span></a><span> </span><a class="entity_ref" href="../Graph/ValueThms.html#ValueThms.size64|fact"><span>size64</span></a><span> </span><span>size_word.rep_eq</span><span> </span><a class="entity_ref" href="../Graph/ValueThms.html#ValueThms.upper_bounds_equiv|fact"><span>upper_bounds_equiv</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>One_nat_def</span><span> </span><span>Suc_less_eq</span><span> </span><span>Suc_pred</span><span> </span><span>le_imp_less_Suc</span><span> </span><a class="entity_ref" href="../Graph/ValueThms.html#ValueThms.signed_take_bit_int_greater_eq_minus_exp_word|fact"><span>signed_take_bit_int_greater_eq_minus_exp_word</span></a><span> </span><a class="entity_ref" href="../Graph/ValueThms.html#ValueThms.size64|fact"><span>size64</span></a><span> </span><a class="entity_ref" href="../Graph/ValueThms.html#ValueThms.upper_bounds_equiv|fact"><span>upper_bounds_equiv</span></a><span> </span><span>wsst_TYs</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>One_nat_def</span><span> </span><span>Suc_le_lessD</span><span> </span><span>Suc_pred</span><span> </span><a class="entity_ref" href="../Graph/ValueThms.html#ValueThms.signed_take_bit_int_less_exp_word|fact"><span>signed_take_bit_int_less_exp_word</span></a><span> </span><a class="entity_ref" href="../Graph/ValueThms.html#ValueThms.size64|fact"><span>size64</span></a><span> </span><a class="entity_ref" href="../Graph/ValueThms.html#ValueThms.upper_bounds_equiv|fact"><span>upper_bounds_equiv</span></a><span> </span><span>wsst_TYs</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_6336..6364"><span>remove_sub_preserve_take_bit</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span> (smt (verit) Groups.add_ac(2) One_nat_def Suc_diff_Suc Suc_less_eq Suc_pred add.inverse_inverse add_Suc_right bit_last_iff bit_take_bit_iff bot_nat_0.not_eq_extremum cancel_comm_monoid_add_class.diff_cancel diff_diff_cancel diff_zero gr0_conv_Suc int_signed_value.simps intval_word.simps len_gt_0 lessI less_imp_diff_less less_imp_le_nat less_numeral_extra(1) linorder_not_le mask_1 mask_eq_take_bit_minus_one nat.simps(1) nat.simps(3) neg_one.elims neg_one_signed neg_one_value new_int_take_bits not_less numeral.simps(2) numeral_eq_Suc numerals(2) one_le_numeral order_le_less order_trans plus_nat.simps(2) remove_sub_preserve_take_bit signed_take_bit_take_bit size64 take_bit_length_eq wsst_TYs(3) zero_le zero_le_numeral)
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8227..8232">lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.unnegated_rhs_evals|fact"><span class="entity_def" id="SubPhase.unnegated_rhs_evals|thm"><span class="entity_def" id="offset_8233..8252">unnegated_rhs_evals</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="keyword1"><span>exp[</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="keyword1"><span>val[</span></span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="keyword1"><span>exp[</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="keyword1"><span>val[</span></span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_negate|const"><span>intval_negate</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>vv</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_8381..8383">vv</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="keyword1"><span>exp[</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="keyword1"><span>val[</span></span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>vv</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_8227..8232"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evaltree_not_undef|fact"><span>evaltree_not_undef</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_negate.elims|fact"><span>intval_negate.elims</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int.elims|fact"><span>new_int.elims</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.unfold_const|fact"><span>unfold_const</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>take_bit</span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>vv</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>vv</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.eval_unused_bits_zero|fact"><span>eval_unused_bits_zero</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>val[</span></span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_8381..8383"><span>vv</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_8227..8232"><span>assms</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_6193..6210"><span>negate_idempotent</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.unfold_const|fact"><span>unfold_const</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>yv</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_8717..8719">yv</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="keyword1"><span>exp[</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="keyword1"><span>val[</span></span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>yv</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_8381..8383"><span>vv</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree.ConstantExpr|fact"><span>evaltree.ConstantExpr</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_6645..6660"><span>valid_sub_const</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.distinct|fact"><span>Value.distinct</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.inject|fact"><span>Value.inject</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.eval_bits_1_64|fact"><span>eval_bits_1_64</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_negate.elims|fact"><span>intval_negate.elims</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int.simps|fact"><span>new_int.simps</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_8227..8232"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_8717..8719"><span>yv</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="SubPhase.SubNegativeConstant_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="SubPhase.SubNegativeConstant|fact"><span class="entity_def" id="SubPhase.SubNegativeConstant_code|fact"><span class="entity_def" id="SubPhase.SubNegativeConstant(2)|thm"><span class="entity_def" id="SubPhase.SubNegativeConstant(1)|thm"><span class="entity_def" id="SubPhase.SubNegativeConstant_code|thm"><span class="entity_def" id="SubPhase.SubNegativeConstant_code_raw|axiom"><span>SubNegativeConstant</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>val[</span></span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Transform|const"><span>⟼</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>defer</span></span></span></span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>allI</span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>impI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_9156..9160">eval</span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> m p v</span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xv</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_9201..9203">xv</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="skolem"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="skolem"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="skolem"><span>xv</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_9156..9160"><span>eval</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>yv</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_9268..9270">yv</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="skolem"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="skolem"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="keyword1"><span>exp[</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>val[</span></span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_negate|const"><span>intval_negate</span></a><span> </span><span class="skolem"><span>yv</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_9156..9160"><span>eval</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>lhs</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_9369..9375">lhsdef</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="skolem"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="skolem"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>val[</span></span><span class="main"><span>-</span></span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="skolem"><span>lhs</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_9156..9160"><span>eval</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9460..9463">lhs</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>lhs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>val[</span></span><span class="skolem"><span>xv</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="skolem"><span>yv</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.BinaryExprE|fact"><span>BinaryExprE</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_9201..9203"><span>xv</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_9268..9270"><span>yv</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>rhs</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_9571..9577">rhsdef</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="skolem"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="skolem"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="skolem"><span>rhs</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_9156..9160"><span>eval</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_8233..8252"><span>unnegated_rhs_evals</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.EvalTreeE|fact"><span>EvalTreeE</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.unfold_binary|fact"><span>unfold_binary</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_2185..2207"><span>val_sub_negative_value</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9769..9772">rhs</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>rhs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>val[</span></span><span class="skolem"><span>xv</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="skolem"><span>yv</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.BinaryExprE|fact"><span>BinaryExprE</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.EvalTreeE|fact"><span>EvalTreeE</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_8233..8252"><span>unnegated_rhs_evals</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_9201..9203"><span>xv</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_9268..9270"><span>yv</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>lhs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>rhs</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_2185..2207"><span>val_sub_negative_value</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_9460..9463"><span>lhs</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_9769..9772"><span>rhs</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.bin_eval.simps|fact"><span>bin_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_9156..9160"><span>eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.unfold_binary|fact"><span>unfold_binary</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_9201..9203"><span>xv</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_9268..9270"><span>yv</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_9156..9160"><span>eval</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.evalDet|fact"><span>evalDet</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_9369..9375"><span>lhsdef</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_9571..9577"><span>rhsdef</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="SubPhase.ZeroSubtractValue_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="SubPhase.ZeroSubtractValue|fact"><span class="entity_def" id="SubPhase.ZeroSubtractValue_code|fact"><span class="entity_def" id="SubPhase.ZeroSubtractValue(2)|thm"><span class="entity_def" id="SubPhase.ZeroSubtractValue(1)|thm"><span class="entity_def" id="SubPhase.ZeroSubtractValue_code|thm"><span class="entity_def" id="SubPhase.ZeroSubtractValue_code_raw|axiom"><span>ZeroSubtractValue</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.ExtraNotation.ConstantNotation|const"><span>const</span></a></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>⟼</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> 
                                  </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>when</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="SubPhase.html#SubPhase.wf_stamp|const"><span>wf_stamp</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>lo</span></span><span> </span><span class="free"><span>hi</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>defer</span></span></span></span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_3509..3519"><span>wf_stamp_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>diff_0</span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_negate.simps|fact"><span>intval_negate.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_sub.elims|fact"><span>intval_sub.elims</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.intval_word.simps|fact"><span>intval_word.simps</span></a><span> 
          </span><a class="entity_ref" href="../Graph/Values.html#Values.new_int_bin.simps|fact"><span>new_int_bin.simps</span></a><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.unary_eval.simps|fact"><span>unary_eval.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEvalThms.html#IRTreeEvalThms.unfold_unary|fact"><span>unfold_unary</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="SubPhase.forPrimitive.elims|fact"><span class="entity_def" id="SubPhase.forPrimitive.induct|fact"><span class="entity_def" id="SubPhase.forPrimitive.simps|fact"><span class="entity_def" id="SubPhase.forPrimitive.pelims|fact"><span class="entity_def" id="SubPhase.forPrimitive.cases|fact"><span class="entity_def" id="SubPhase.forPrimitive.termination|fact"><span class="entity_def" id="SubPhase.forPrimitive.pinduct|fact"><span class="entity_def" id="SubPhase.forPrimitive.psimps|fact"><span class="entity_def" id="SubPhase.forPrimitive_rel.inducts|fact"><span class="entity_def" id="SubPhase.forPrimitive_rel.simps|fact"><span class="entity_def" id="SubPhase.forPrimitive_rel.induct|fact"><span class="entity_def" id="SubPhase.forPrimitive_rel.cases|fact"><span class="entity_def" id="SubPhase.forPrimitive_rel.intros|fact"><span class="entity_def" id="SubPhase.forPrimitive_graph.inducts|fact"><span class="entity_def" id="SubPhase.forPrimitive_graph.simps|fact"><span class="entity_def" id="SubPhase.forPrimitive_graph.induct|fact"><span class="entity_def" id="SubPhase.forPrimitive_graph.cases|fact"><span class="entity_def" id="SubPhase.forPrimitive_graph.intros|fact"><span class="entity_def" id="SubPhase.forPrimitive.elims|thm"><span class="entity_def" id="SubPhase.forPrimitive.induct|thm"><span class="entity_def" id="SubPhase.forPrimitive.simps(8)|thm"><span class="entity_def" id="SubPhase.forPrimitive.simps(7)|thm"><span class="entity_def" id="SubPhase.forPrimitive.simps(6)|thm"><span class="entity_def" id="SubPhase.forPrimitive.simps(5)|thm"><span class="entity_def" id="SubPhase.forPrimitive.simps(4)|thm"><span class="entity_def" id="SubPhase.forPrimitive.simps(3)|thm"><span class="entity_def" id="SubPhase.forPrimitive.simps(2)|thm"><span class="entity_def" id="SubPhase.forPrimitive.simps(1)|thm"><span class="entity_def" id="SubPhase.forPrimitive.pelims|thm"><span class="entity_def" id="SubPhase.forPrimitive.cases|thm"><span class="entity_def" id="SubPhase.forPrimitive.termination|thm"><span class="entity_def" id="SubPhase.forPrimitive.pinduct|thm"><span class="entity_def" id="SubPhase.forPrimitive.psimps(8)|thm"><span class="entity_def" id="SubPhase.forPrimitive.psimps(7)|thm"><span class="entity_def" id="SubPhase.forPrimitive.psimps(6)|thm"><span class="entity_def" id="SubPhase.forPrimitive.psimps(5)|thm"><span class="entity_def" id="SubPhase.forPrimitive.psimps(4)|thm"><span class="entity_def" id="SubPhase.forPrimitive.psimps(3)|thm"><span class="entity_def" id="SubPhase.forPrimitive.psimps(2)|thm"><span class="entity_def" id="SubPhase.forPrimitive.psimps(1)|thm"><span class="entity_def" id="SubPhase.forPrimitive_rel.inducts|thm"><span class="entity_def" id="SubPhase.forPrimitive_rel.simps|thm"><span class="entity_def" id="SubPhase.forPrimitive_rel.induct|thm"><span class="entity_def" id="SubPhase.forPrimitive_rel.cases|thm"><span class="entity_def" id="SubPhase.forPrimitive_graph.inducts|thm"><span class="entity_def" id="SubPhase.forPrimitive_graph.simps|thm"><span class="entity_def" id="SubPhase.forPrimitive_graph.induct|thm"><span class="entity_def" id="SubPhase.forPrimitive_graph.cases|thm"><span class="entity_def" id="SubPhase.forPrimitive_graph.intros(8)|thm"><span class="entity_def" id="SubPhase.forPrimitive_graph.intros(7)|thm"><span class="entity_def" id="SubPhase.forPrimitive_graph.intros(6)|thm"><span class="entity_def" id="SubPhase.forPrimitive_graph.intros(5)|thm"><span class="entity_def" id="SubPhase.forPrimitive_graph.intros(4)|thm"><span class="entity_def" id="SubPhase.forPrimitive_graph.intros(3)|thm"><span class="entity_def" id="SubPhase.forPrimitive_graph.intros(2)|thm"><span class="entity_def" id="SubPhase.forPrimitive_graph.intros(1)|thm"><span class="entity_def" id="SubPhase.forPrimitive_def|axiom"><span class="entity_def" id="SubPhase.forPrimitive_rel_def|axiom"><span class="entity_def" id="SubPhase.forPrimitive_sumC_def|axiom"><span class="entity_def" id="SubPhase.forPrimitive_graph_def|axiom"><span class="entity_def" id="SubPhase.forPrimitive_dom|const"><span class="entity_def" id="SubPhase.forPrimitive_rel|const"><span class="entity_def" id="SubPhase.forPrimitive_sumC|const"><span class="entity_def" id="SubPhase.forPrimitive_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="SubPhase.forPrimitive|const"><span>forPrimitive</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp|type"><span>Stamp</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.int64|type"><span>int64</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr|type"><span>IRExpr</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>forPrimitive</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>lo</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>hi</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.ConstantExpr|const"><span>ConstantExpr</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span>take_bit</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>forPrimitive</span></span><span> </span><span class="main"><span class="bound"><span class="entity"><span>_</span></span></span></span><span> </span><span class="main"><span class="bound"><span class="entity"><span>_</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.ConstantExpr|const"><span>ConstantExpr</span></a><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span>"</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>
optimization SubSelfIsZero: "(x - x) ⟼ const IntVal b 0 when 
                      (wf_stamp x ∧ stamp_expr x = IntegerStamp b lo hi)"
   apply auto
   apply (meson less_add_same_cancel1 less_trans_Suc size_pos)
  by (smt (verit) Value.inject(1) eq_iff_diff_eq_0 evalDet intval_sub.elims new_int.elims 
      new_int_bin.elims take_bit_of_0 unfold_const validDefIntConst valid_stamp.simps(1) 
      valid_value.simps(1) wf_stamp_def)
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.unfold_forPrimitive|fact"><span class="entity_def" id="SubPhase.unfold_forPrimitive|thm"><span class="entity_def" id="offset_11120..11139">unfold_forPrimitive</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SubPhase.html#SubPhase.forPrimitive|const"><span>forPrimitive</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.IRExpr.ConstantExpr|const"><span>ConstantExpr</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.is_IntegerStamp|const"><span>is_IntegerStamp</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span>take_bit</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stp_bits|const"><span>stp_bits</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.stp_bits|const"><span>stp_bits</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><a class="entity_ref" href="../Graph/Values.html#Values.Value.UndefVal|const"><span>UndefVal</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.forPrimitive_size|fact"><span class="entity_def" id="SubPhase.forPrimitive_size|thm"><span>forPrimitive_size</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.size_simps|attribute"><span class="operator"><span>size_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../OptimizationDSL/Canonicalization.html#Canonicalization.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="SubPhase.html#SubPhase.forPrimitive|const"><span>forPrimitive</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11385..11390">lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.forPrimitive_eval|fact"><span class="entity_def" id="SubPhase.forPrimitive_eval|thm"><span>forPrimitive_eval</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="comment1"><span>(</span><span>*</span><span>assumes "valid_value (IntVal b v) s"</span><span>*</span><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>lo</span></span><span> </span><span class="free"><span>hi</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>take_bit</span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><a class="entity_ref" href="SubPhase.html#SubPhase.forPrimitive|const"><span>forPrimitive</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Graph/Values.html#Values.Value.IntVal|const"><span>IntVal</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_11120..11139"><span>unfold_forPrimitive</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_11385..11390"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree.ConstantExpr|fact"><span>evaltree.ConstantExpr</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11672..11677">lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.evalSubStamp|fact"><span class="entity_def" id="SubPhase.evalSubStamp|thm"><span class="entity_def" id="offset_11678..11690">evalSubStamp</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SubPhase.html#SubPhase.wf_stamp|const"><span>wf_stamp</span></a><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.valid_value|const"><span>valid_value</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_11672..11677"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_3509..3519"><span>wf_stamp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IllegalStamp|const"><span>IllegalStamp</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr.simps|fact"><span>stamp_expr.simps</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_binary.simps|fact"><span>stamp_binary.simps</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_binary.elims|fact"><span>stamp_binary.elims</span></a><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.unrestricted_stamp.simps|fact"><span>unrestricted_stamp.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12138..12143">lemma</span></span></span><span> </span><span class="entity_def" id="SubPhase.evalSubArgsStamp|fact"><span class="entity_def" id="SubPhase.evalSubArgsStamp|thm"><span>evalSubArgsStamp</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>,</span></a></span><span> </span><span class="free"><span>p</span></span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>⊢</span></a></span><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.evaltree|const"><span>↦</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_12138..12143"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="SubPhase.SubSelfIsZero_code|const"><span>optimization</span></span></span></span><span> </span><span class="entity_def" id="SubPhase.SubSelfIsZero|fact"><span class="entity_def" id="SubPhase.SubSelfIsZero_code|fact"><span class="entity_def" id="SubPhase.SubSelfIsZero(2)|thm"><span class="entity_def" id="SubPhase.SubSelfIsZero(1)|thm"><span class="entity_def" id="SubPhase.SubSelfIsZero_code|thm"><span class="entity_def" id="SubPhase.SubSelfIsZero_code_raw|axiom"><span>SubSelfIsZero</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>⟼</span></a></span><span> </span><a class="entity_ref" href="SubPhase.html#SubPhase.forPrimitive|const"><span>forPrimitive</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../OptimizationDSL/Markup.html#Markup.Rewrite.Conditional|const"><span>when</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="SubPhase.html#SubPhase.wf_stamp|const"><span>wf_stamp</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="SubPhase.html#SubPhase.wf_stamp|const"><span>wf_stamp</span></a><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Common.html#Common.size_non_const|fact"><span>size_non_const</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>impI</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>allI</span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>impI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_12581..12585">eval</span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> m p v</span><span> 
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Semantics/IRTreeEval.html#IRTreeEval.stamp_expr|const"><span>stamp_expr</span></a><span> </span><span class="keyword1"><span>exp[</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Graph/Stamp.html#Stamp.Stamp.IntegerStamp|const"><span>IntegerStamp</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="bound"><span>lo</span></span><span> </span><span class="bound"><span>hi</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SubPhase.html#offset_11678..11690"><span>evalSubStamp</span></a><span> </span><a class="entity_ref" href="SubPhase.html#offset_12581..12585"><span>eval</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>meson</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>sorry</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>


</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> End of SubPhase </span><span>*</span><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> End of file </span><span>*</span><span>)</span></span><span>
</span></pre>
</body>

</html>